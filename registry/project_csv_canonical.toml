# CSV Canonical Sources Registry
# Wave 6-012: Classification of CSV files as canonical sources vs generated artifacts
# Date: 2026-02-10, Phase 10.3

schema_version = "csv_classification_v1"
authoritative = true
role = "canonical_source"  # This registry contains THE canonical CSV sources
enforcement = "write_verify"  # CSV writes must be verified against this registry

[metadata]
purpose = "Distinguish human-edited canonical CSV sources from generated/computed artifacts"
policy = "Canonical CSVs edited directly; generated CSVs come from Rust computations"
governance_owner = "Data Registry Steward"
last_audit = "2026-02-10"

# Experimental catalog (canonical source)
[[csv_source]]
path = "registry/experiments.csv"
kind = "canonical_source"
role = "experiment_catalog"
description = "Master experiment registry in CSV format (canonical source)"
toml_mirror = "registry/experiments.toml"  # TOML is generated from this CSV
edit_policy = "Direct edit allowed; regenerate TOML after changes"
dimensions = ["experiment_id", "title", "date", "status", "methodology"]
row_count_last_audit = "26"
hash_last_audit = ""
cadence = "as_needed"
owner = "Research Team"

# Claims catalog (canonical source)
[[csv_source]]
path = "registry/claims.csv"
kind = "canonical_source"
role = "claims_catalog"
description = "Master claims registry in CSV format (canonical source)"
toml_mirror = "registry/claims.toml"
edit_policy = "Direct edit allowed; regenerate TOML after changes"
dimensions = ["claim_id", "description", "status", "confidence", "sprint"]
row_count_last_audit = "632"
cadence = "continuous"
owner = "Research Team"

# Insights catalog (canonical source)
[[csv_source]]
path = "registry/insights.csv"
kind = "canonical_source"
role = "insights_catalog"
description = "Master insights registry in CSV format (canonical source)"
toml_mirror = "registry/insights.toml"
edit_policy = "Direct edit allowed; regenerate TOML after changes"
dimensions = ["insight_id", "description", "category", "depth", "sprint"]
row_count_last_audit = "58"
cadence = "continuous"
owner = "Research Team"

# Binaries catalog (canonical source)
[[csv_source]]
path = "registry/binaries.csv"
kind = "canonical_source"
role = "binary_catalog"
description = "Rust binary registry in CSV format (canonical source)"
toml_mirror = "registry/binaries.toml"
edit_policy = "Direct edit; regenerate TOML after changes"
dimensions = ["binary_id", "binary_name", "crate", "description", "entrypoint"]
row_count_last_audit = "42"
cadence = "per_release"
owner = "Build System"

# Artifact inventory (canonical, auto-generated)
[[csv_source]]
path = "data/artifacts/artifact_manifest.csv"
kind = "canonical_source"
role = "artifact_manifest"
description = "Inventory of all data artifacts (auto-generated by build system)"
edit_policy = "DO NOT EDIT; regenerate via 'make artifacts-inventory'"
generator_script = "src/scripts/analysis/build_artifact_scrolls_registry.py"
dimensions = ["artifact_id", "artifact_name", "format", "size_bytes", "generation_date"]
generation_frequency = "daily"
owner = "Build System"

# Markdown inventory (canonical, auto-generated)
[[csv_source]]
path = "registry/markdown_inventory.csv"
kind = "canonical_source"
role = "markdown_inventory"
description = "Comprehensive markdown file inventory (auto-generated)"
edit_policy = "DO NOT EDIT; regenerate via 'make registry-data'"
generator_script = "src/verification/verify_markdown_inventory_toml_first.py"
dimensions = ["markdown_file", "word_count", "owner", "category", "last_modified"]
generation_frequency = "weekly"
owner = "Build System"

# Generated/Artifact CSVs (read-only, do not edit)
[[csv_artifact]]
path = "build/artifacts/phase_census_results.csv"
kind = "generated_artifact"
role = "computation_output"
description = "Phase 10 composition algebra census results (computed output)"
edit_policy = "READ-ONLY; generated by 'cargo test --package algebra_core'"
generator_source = "crates/algebra_core/tests/test_composition_algebra_taxonomy.rs"
generation_trigger = "test_taxonomy_export_summary()"
expected_dimensions = ["algebra_name", "dimension", "construction_method", "commutativity_%", "division_status"]

[[csv_artifact]]
path = "build/artifacts/quantum_hamiltonian_census.csv"
kind = "generated_artifact"
role = "computation_output"
description = "Quantum Hamiltonian evolution solver test results (computed output)"
edit_policy = "READ-ONLY; generated by 'cargo test --package quantum_core'"
generator_source = "crates/quantum_core/src/hamiltonian_evolution.rs"
generation_trigger = "test_hamiltonian_*.rs tests"
expected_dimensions = ["system_size", "alpha", "g", "j", "entropy", "evolution_time"]

[[csv_artifact]]
path = "build/artifacts/gpu_dimensional_census.csv"
kind = "generated_artifact"
role = "computation_output"
description = "GPU dimensional reduction analysis (computed output)"
edit_policy = "READ-ONLY; generated by Phase 10-11 GPU experiments"
generator_source = "crates/algebra_core/src/gpu/dimensional.rs"
generation_trigger = "GPU benchmark suite"
expected_dimensions = ["dimension", "algorithm", "hardware", "runtime_ms", "accuracy"]

# Verification procedures
[verification_procedures]
procedure_1 = "Before committing changes to canonical CSVs, verify row count matches registry entry"
procedure_2 = "After regenerating generated CSVs, verify hash matches expected output"
procedure_3 = "Weekly audit: grep for 'DO NOT EDIT' comments in all edited CSV files (should be zero)"
procedure_4 = "Gating: CI blocks commits if canonical CSV size changes > 50% without investigation"
procedure_5 = "Archival: moved outdated canonical CSVs to archive/csv_history/{date}/"

[mirroring_rules]
rule_1 = "Canonical TOML files are GENERATED from canonical CSVs via 'make registry-data'"
rule_2 = "DO NOT hand-edit TOML files; edits to TOML must come from CSV upstream"
rule_3 = "Markdown mirrors of TOML are GENERATED via 'make docs-publish'; never edit markdown"
rule_4 = "Three-layer architecture: CSV (canonical) -> TOML (derived) -> Markdown (display)"

[ci_gates]
gate_1 = "Test gate: TOML parsers must validate all generated TOML files"
gate_2 = "Audit gate: 'make registry-data' must be idempotent (rerunning produces identical output)"
gate_3 = "Consistency gate: CSV row counts must match TOML entry counts"
gate_4 = "Integrity gate: SHA256 hashes of canonical CSVs must match baseline"
