# Curated migration strategy from markdown-first docs to TOML-first governance.

[migration]
authoritative = true
status = "active"
updated = "2026-02-09"
scope = "knowledge sources and operational trackers"

[[domain]]
id = "KM-001"
name = "claims"
source_markdown = ["docs/CLAIMS_EVIDENCE_MATRIX.md", "docs/CLAIMS_TASKS.md"]
authoritative_toml = ["registry/claims.toml", "registry/claims_tasks.toml"]
generated_mirror = [
  "docs/CLAIMS_EVIDENCE_MATRIX.md",
  "docs/CLAIMS_TASKS.md",
  "docs/generated/CLAIMS_REGISTRY_MIRROR.md",
  "docs/generated/CLAIMS_TASKS_REGISTRY_MIRROR.md",
]
strategy = "toml_primary_markdown_mirror"
status = "complete"
notes = "Claims registry and executable task ledger are TOML-first; claims matrix and claims tasks markdown are generated mirrors."

[[domain]]
id = "KM-008"
name = "claims_domains"
source_markdown = ["docs/claims/CLAIMS_DOMAIN_MAP.csv", "docs/claims/by_domain/*.md"]
authoritative_toml = ["registry/claims_domains.toml"]
generated_mirror = [
  "docs/generated/CLAIMS_DOMAINS_REGISTRY_MIRROR.md",
  "docs/claims/INDEX.md",
  "docs/claims/CLAIMS_DOMAIN_MAP.csv",
  "docs/claims/by_domain/*.md",
]
strategy = "toml_primary_generated_mirror"
status = "complete"
notes = "Domain crosswalk and by-domain markdown/csv mirrors are generated from TOML."

[[domain]]
id = "KM-009"
name = "claim_tickets"
source_markdown = ["docs/tickets/*.md"]
authoritative_toml = ["registry/claim_tickets.toml"]
generated_mirror = [
  "docs/generated/CLAIM_TICKETS_REGISTRY_MIRROR.md",
  "docs/tickets/*.md",
  "docs/tickets/INDEX.md",
]
strategy = "toml_primary_generated_mirror"
status = "complete"
notes = "Claims audit ticket metadata and claim linkage are normalized into TOML and rendered back into docs/tickets mirrors."

[[domain]]
id = "KM-002"
name = "insights"
source_markdown = ["docs/INSIGHTS.md"]
authoritative_toml = ["registry/insights.toml"]
generated_mirror = ["docs/generated/INSIGHTS_REGISTRY_MIRROR.md"]
strategy = "toml_primary_narrative_overlay"
status = "complete"
notes = "Legacy insights markdown is now generated from TOML registry + narrative overlay."

[[domain]]
id = "KM-003"
name = "experiments"
source_markdown = ["docs/EXPERIMENTS_PORTFOLIO_SHORTLIST.md"]
authoritative_toml = ["registry/experiments.toml"]
generated_mirror = ["docs/generated/EXPERIMENTS_REGISTRY_MIRROR.md"]
strategy = "toml_primary_narrative_overlay"
status = "complete"
notes = "Legacy experiments markdown is now generated from TOML registry + narrative overlay."

[[domain]]
id = "KM-004"
name = "operational_trackers"
source_markdown = ["docs/ROADMAP.md", "docs/TODO.md", "docs/NEXT_ACTIONS.md"]
authoritative_toml = ["registry/roadmap.toml", "registry/todo.toml", "registry/next_actions.toml"]
generated_mirror = [
  "docs/generated/ROADMAP_REGISTRY_MIRROR.md",
  "docs/generated/TODO_REGISTRY_MIRROR.md",
  "docs/generated/NEXT_ACTIONS_REGISTRY_MIRROR.md",
]
strategy = "toml_primary_markdown_overlay"
status = "complete"
notes = "Legacy operational markdown is generated from TOML registries + narrative overlays."

[[domain]]
id = "KM-005"
name = "requirements"
source_markdown = ["REQUIREMENTS.md", "docs/REQUIREMENTS.md", "docs/requirements/*.md"]
authoritative_toml = ["registry/requirements.toml"]
generated_mirror = ["docs/generated/REQUIREMENTS_REGISTRY_MIRROR.md"]
strategy = "toml_primary_markdown_overlay"
status = "complete"
notes = "Requirements markdown set is generated from requirements registry + narrative overlay."

[[domain]]
id = "KM-010"
name = "markdown_governance"
source_markdown = ["docs/generated/MARKDOWN_GOVERNANCE_REGISTRY_MIRROR.md"]
authoritative_toml = ["registry/markdown_governance.toml"]
generated_mirror = ["docs/generated/MARKDOWN_GOVERNANCE_REGISTRY_MIRROR.md"]
strategy = "toml_primary_policy_enforcement"
status = "complete"
notes = "Governance registry classifies all markdown lifecycle modes and drives header/parity verifiers."

[[domain]]
id = "KM-011"
name = "bibliography"
source_markdown = ["docs/BIBLIOGRAPHY.md"]
authoritative_toml = ["registry/bibliography.toml"]
generated_mirror = [
  "docs/BIBLIOGRAPHY.md",
  "docs/generated/BIBLIOGRAPHY_REGISTRY_MIRROR.md",
]
strategy = "toml_primary_markdown_mirror"
status = "complete"
notes = "Bibliography is TOML-first with generated markdown mirrors."

[[domain]]
id = "KM-006"
name = "generated_artifacts"
source_markdown = ["reports/*.md", "data/artifacts/*.md", "docs/claims/by_domain/*.md", "docs/tickets/*_claims_audit.md"]
strategy = "artifact_only_no_manual_edit"
status = "active"
notes = "Keep as generated outputs with explicit regeneration commands; do not hand-edit."

[[domain]]
id = "KM-007"
name = "research_narratives"
source_markdown = ["docs/theory/*.md", "docs/engineering/*.md"]
strategy = "narrative_primary_raw_capture_backup"
status = "active"
notes = "Not all narrative content should be normalized into rigid schemas; raw capture in registry/knowledge/docs preserves provenance."

[[domain]]
id = "KM-012"
name = "external_sources"
source_markdown = ["docs/external_sources/*.md"]
authoritative_toml = ["registry/external_sources.toml"]
generated_mirror = [
  "docs/generated/EXTERNAL_SOURCES_REGISTRY_MIRROR.md",
  "docs/external_sources/*.md",
  "docs/external_sources/INDEX.md",
]
strategy = "toml_primary_generated_mirror"
status = "complete"
notes = "External source dossiers are TOML-first; markdown under docs/external_sources is generated from registry/external_sources.toml."

[[phase]]
id = "KMP-P1"
name = "inventory_and_capture"
status = "complete"
deliverables = ["registry/knowledge_sources.toml", "registry/knowledge/documents.toml"]

[[phase]]
id = "KMP-P2"
name = "curated_operational_registries"
status = "complete"
deliverables = ["registry/roadmap.toml", "registry/todo.toml", "registry/next_actions.toml", "registry/requirements.toml"]

[[phase]]
id = "KMP-P3"
name = "toml_to_markdown_mirror_exports"
status = "complete"
deliverables = ["docs/generated/*_REGISTRY_MIRROR.md"]

[[phase]]
id = "KMP-P4"
name = "claims_support_normalization"
status = "complete"
deliverables = ["registry/claims_tasks.toml", "registry/claims_domains.toml", "registry/claim_tickets.toml"]

[[phase]]
id = "KMP-P5"
name = "policy_hardening"
status = "active"
deliverables = [
  "Generated-header compliance verifier for TOML mirrors",
  "Governance parity verifier (knowledge_sources vs markdown_governance)",
  "CI checks for mirror freshness",
  "Registry-first make target sequencing",
  "Ticket mirror consistency verifier (registry/claim_tickets.toml <-> docs/tickets/*.md)",
]

[[phase]]
id = "KMP-P6"
name = "legacy_tracker_retirement"
status = "pending"
deliverables = ["Retire remaining manually-edited markdown trackers after TOML parity review"]

[[phase]]
id = "KMP-P7"
name = "markdown_governance_registry"
status = "complete"
deliverables = [
  "src/scripts/analysis/build_markdown_governance_registry.py",
  "registry/markdown_governance.toml",
  "src/verification/verify_markdown_governance_headers.py",
  "src/verification/verify_markdown_governance_parity.py",
  "docs/generated/MARKDOWN_GOVERNANCE_REGISTRY_MIRROR.md",
]

[[phase]]
id = "KMP-P8"
name = "external_sources_registry_normalization"
status = "complete"
deliverables = [
  "src/scripts/analysis/normalize_external_sources_registry.py",
  "registry/external_sources.toml",
  "docs/generated/EXTERNAL_SOURCES_REGISTRY_MIRROR.md",
  "docs/external_sources/*.md",
  "docs/external_sources/INDEX.md",
]

[[policy]]
id = "KMPOL-001"
name = "bootstrap_vs_operational_authoring"
status = "active"
statement = "Markdown->TOML normalization for claims-support registries is bootstrap-only. Operational authoring is TOML-first with generated markdown mirrors."
enforcement = [
  "normalize_claims_support_registries.py requires --bootstrap-from-markdown",
  "make registry excludes registry-normalize-claims from default ingest flow",
  "mirror freshness and governance verifiers run in make registry",
]
