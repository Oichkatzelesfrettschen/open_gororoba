# Experiment Plan: Warp Turbulence (Rust + CUDA + SIMD)

## Objective
Execute three experiments to validate novel hypotheses regarding algebraic turbulence regularization, p-adic spectral cascades, and topological precursors.

## Constraints
- **Language:** Pure Rust.
- **GPU:** Use `cudarc` (via `lbm_3d_cuda` crate) for LBM fluid dynamics.
- **CPU:** Use SIMD (via `ndarray` + `rayon`) for spectral filtering and topological analysis.
- **Output:** CSV logs and terminal summary.

## Architecture

### 1. Binary: `warp_gpu_experiment`
Located in `crates/gororoba_cli/src/bin/warp_gpu_experiment.rs`.

### 2. Modules
- **`simulation`**: Manages the LBM loop.
    - Uses `LbmSolver3DCuda` if `#[cfg(feature = "gpu")]`.
    - Fallback to CPU D2Q9 (from `lbm_core`) if GPU unavailable.
- **`spectral`**: Handles FFT/IFFT and Filtering.
    - Uses `rustfft` (SIMD-accelerated).
    - Implements `apply_e7_filter`:
        1. FFT `u` -> `u_hat`.
        2. `par_iter_mut` over `u_hat`.
        3. Multiply by `mask(k)` (E7 projection).
        4. IFFT -> `u_filtered`.
- **`analysis`**:
    - `padic_slope`: Computes spectral slope under p-adic norm.
    - `betti_number`: Constructs `TriadHypergraph` and computes Betti-1.

### 3. Experiments

#### Experiment A: Algebraic Viscosity
- **Hypothesis:** E7 filtering extends stability time ($T_{blowup}$) at high Re.
- **Procedure:**
    - Run LBM at $Re=10,000$ (unstable).
    - Case 1: No filter (Control).
    - Case 2: E7 Filter applied every 10 steps.
    - Stop when Enstrophy > threshold or NaN.
    - Compare $T_{blowup}$.

#### Experiment B: P-adic Spectral Tuning
- **Hypothesis:** Spectral slope $\alpha$ depends on prime $p$.
- **Procedure:**
    - Generate Kolmogorov noise.
    - For $p \in \{2, 3, 5, 7\}$:
        - Compute p-adic weighted spectrum.
        - Fit power law $E(k) \sim k^\alpha$.
    - Report $\alpha$ vs $p$.

#### Experiment C: Topological Precursor
- **Hypothesis:** Betti-1 drops before enstrophy spikes.
- **Procedure:**
    - Re-run Exp A (filtered).
    - Every 50 steps:
        - Extract triads.
        - Compute `betti_1`.
        - Record time series.

## Data Artifacts
- `data/csv/warp_experiment_a_viscosity.csv`
- `data/csv/warp_experiment_b_padic.csv`
- `data/csv/warp_experiment_c_topology.csv`

## Implementation Details
- **E7 Projection:** Project 126 E7 roots to 3D grid. Mark nearest integer bins.
- **FFT:** Use `spectral_core::ndfft` (wraps `rustfft`).
- **Parallelism:** `rayon` for grid iterations and hypergraph updates.
