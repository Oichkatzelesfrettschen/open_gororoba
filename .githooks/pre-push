#!/usr/bin/env bash
set -euo pipefail

repo_root="$(git rev-parse --show-toplevel)"
cd "$repo_root"

echo "[pre-push] running make pre-push-gate"
make pre-push-gate

# Upload LFS objects before push (required when core.hooksPath overrides .git/hooks)
if command -v git-lfs >/dev/null 2>&1; then
    git lfs pre-push "$@"
fi
