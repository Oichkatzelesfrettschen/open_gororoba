equations = []
tables = []
full_text = """
ISSN: 1401-5617\r
Wheels\r
—\r
On Division by Zero\r
Jesper Carlstr¨om\r
Research Reports in Mathematics\r
Number 11, 2001\r
Department of Mathematics\r
Stockholm University

Electronic versions of this document are available at\r
http://www.matematik.su.se/reports/2001/11\r
Date of publication: September 10, 2001\r
2000 Mathematics Subject Classification: Primary 16Y99, Secondary 13B30, 13P99,\r
03F65, 08A70.\r
Keywords: fractions, quotients, localization.\r
Postal address:\r
Department of Mathematics\r
Stockholm University\r
S-106 91 Stockholm\r
Sweden\r
Electronic addresses:\r
http://www.matematik.su.se\r
info@matematik.su.se

Wheels\r
—\r
On Division by Zero\r
Jesper Carlstr¨om\r
Department of Mathematics\r
Stockholm University\r
http://www.matematik.su.se/˜jesper/\r
Filosofie licentiatavhandling\r
Abstract\r
We show how to extend any commutative ring (or semiring) so that di\u0002vision by any element, including 0, is in a sense possible. The resulting\r
structure is what is called a wheel. Wheels are similar to rings, but 0x = 0\r
does not hold in general; the subset {x | 0x = 0} of any wheel is a com\u0002mutative ring (or semiring) and any commutative ring (or semiring) with\r
identity can be described as such a subset of a wheel.\r
The main goal of this paper is to show that the given axioms for wheels\r
are natural and to clarify how valid identities for wheels relate to valid\r
identities for commutative rings and semirings.

Contents\r
1 Introduction 3\r
1.1 Why invent the wheel? . . . . . . . . . . . . . . . . . . . . . . . . 3\r
1.2 A sketch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4\r
2 Involution-monoids 7\r
2.1 Definitions and examples . . . . . . . . . . . . . . . . . . . . . . . 8\r
2.2 The construction of involution-monoids from commutative monoids 9\r
2.3 Insertion of the parent monoid . . . . . . . . . . . . . . . . . . . 11\r
2.4 The role of X in the structure of M∗\r
X . . . . . . . . . . . . . . . 12\r
2.5 The construction as a functor . . . . . . . . . . . . . . . . . . . . 14\r
3 Applications to semirings 15\r
3.1 Applications to additive monoids of semirings . . . . . . . . . . . 16\r
3.2 Applications to multiplicative monoids of commutative semirings 19\r
4 Wheels 23\r
4.1 Basic properties . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\r
4.2 Applications to wheels of fractions . . . . . . . . . . . . . . . . . 27\r
4.2.1 The semiring in a wheel of fractions . . . . . . . . . . . . 27\r
4.2.2 Obtaining /-invertible wheels of fractions . . . . . . . . . 28\r
4.2.3 Axiomatizing the class of wheels of fractions . . . . . . . . 29\r
4.2.4 Cancellation of zero-terms . . . . . . . . . . . . . . . . . . 30\r
4.3 Equational logic for wheels of fractions . . . . . . . . . . . . . . . 32\r
5 Wheel-modules 44\r
Acknowledgements\r
I would like to thank Clas L¨ofwall for his support during this work. He\r
followed the process through all of its stages, listening to my vague ideas\r
and reading many preliminary versions of the manuscript. He put me in\r
the right direction many times. If anything is easy to grasp in this paper,\r
it is probably because he asked me to simplify that part and to give some\r
examples.\r
I would also like to thank Per Martin-L¨of, who spent many hours\r
discussing constructive aspects with me. He also read several versions of\r
the manuscript and gave me many valuable comments, on the content as\r
well as on how it should be expressed. The first idea, of which wheel\r
theory is a generalization, originates from him.\r
Thanks also to J¨orgen Backelin, with whom I discussed possible choices\r
of axioms, before the final selection was made.\r
Typeset by LATEX, using Paul Taylor’s package ‘Commutative Diagrams’.\r
\rc 2001 Jesper Carlstr¨om\r
2

1 Introduction\r
1.1 Why invent the wheel?\r
The fact that multiplicative inversion of real numbers is a partial function is\r
annoying for any beginner in mathematics: “Who has forbidden division by\r
zero?”. This problem seems not to be a serious one from a professional point\r
of view, but the situation remains as an unaesthetic fact. We know how to\r
extend the semiring of natural numbers so that we get solutions to equations\r
like 5 + x = 2, 2x = 3, x\r
2 = 2, x2 = −1 etc., we even know how to get\r
completeness, but not how to divide by 0.\r
There are also concrete, pragmatic aspects of this problem, especially in con\u0002nection with exact computations with real numbers. Since it is not in general\r
decidable whether a real number is non-zero, one can’t in general tell whether\r
it is invertible. Edalat and Potts [EP00, Pot98] suggested that two extra ‘num\u0002bers’, ∞ = 1/0 and ⊥ = 0/0, be adjoined to the set of real numbers (thus\r
obtaining what in domain theory is called the ‘lifting’ of the real projective\r
line) in order to make division always possible. In a seminar, Martin-L¨of pro\u0002posed that one should try to include these ‘numbers’ already in the construction\r
of the rationals from the integers, by allowing not only non-zero denominators,\r
but arbitrary denominators, thus ending up not with a field, but with a field\r
with two extra elements. Such structures were called ‘wheels’ (the term inspired\r
by the topological picture \f of the projective line together with an extra point\r
0/0) by Setzer [Set97], who showed how to modify the construction of fields of\r
fractions from integral domains so that wheels are obtained instead of fields.\r
In this paper, we generalize Setzer’s construction, so that it applies not\r
only to integral domains, but to any commutative semiring. Our construction\r
introduces a ‘reciprocal’ to every element, the resulting structure being what\r
will be called a ‘wheel of fractions’. We use the term ‘wheel’ in a more general\r
sense than Setzer, but a wheel in our sense is still a structure in which addition,\r
multiplication and division can always be performed. A wheel in Setzer’s sense\r
will be recognized as what we denote by ‘\fS0A’, where A is an integral domain,\r
S0 the subset A \\ {0}.\r
1\r
Beside applications to exact computations, there are other applications to\r
computer programming: algorithms that split into cases depending on whether\r
their arguments are zero or not, can sometimes be simplified using a total divi\u0002sion function.\r
We also hope for applications in algebraic geometry. Instead of considering\r
‘rational maps’ as partial functions from a variety to a field, one may consider\r
‘rational functions’ from the variety to the wheel extending the field. The set\r
of all such rational functions is a wheel in our sense (but not in Setzer’s) with\r
the operations defined point-wise. We say that rational functions are ‘equal as\r
maps’ if they agree on some non-empty Zariski open subset. This is a congruence\r
relation (it is transitive since the Zariski topology of a variety is irreducible)\r
and the set of congruence classes is again a wheel — the ‘wheel of rational\r
maps’. In the same way, there is a ‘wheel of regular functions’. Every regular\r
function is equal as a map to some rational function. Finally, the most important\r
1The notation S0 will be used for the set of cancellable elements in a monoid, i.e., a ∈\r
S0 means that ax = ay ⇒ x = y for all x, y. When considering semirings, we use the\r
multiplicative monoid for this definition. In integral domains, we get S0 = A \\ {0}.\r
3

methods in algebraic geometry are the projection onto a quotient of the ring of\r
functions considered (the geometric interpretation being restricting attention to\r
a Zariski closed subset of the variety) and the construction of a ring of fractions\r
(localization in the sense that attention is restricted to what happens near some\r
Zariski closed subset). Usually, those constructions are formally very different,\r
even though their interpretations are similar. Using wheels instead of rings,\r
those two situations are both handled by the same method: by projection onto\r
a quotient. That suggests possible simplifications when wheels are used instead\r
of rings.2\r
Finally, there should be applications to the development of constructive\r
mathematic, in which total functions are preferred to partial functions.3\r
1.2 A sketch\r
We indicate briefly what the basic ideas are. Proofs and technical verifications\r
are postponed to the following sections.\r
The natural way of trying to introduce inverses to all elements of a ring, is to\r
modify the usual construction of rings of fractions. If A is a commutative ring\r
with identity, S a multiplicative submonoid of it, then the usual construction is\r
as follows: Define the relation ∼S on A × S (here the product is taken in the\r
category of sets) as\r
(x, s) ∼S (x\r
0\r
, s\r
0\r
) means ∃s\r
00 ∈ S : s00(xs0 − x0\r
s) = 0.\r
Then ∼S is an equivalence relation and A × S/ ∼S is a commutative ring with\r
(the class containing (x, y) is denoted by [x, y])\r
0 = [0, 1]\r
1 = [1, 1]\r
[x, s] + [x\r
0\r
, s\r
0\r
] = [xs0 + x\r
0\r
s, ss0]\r
[x, s][x\r
0\r
, s\r
0\r
] = [xx0, ss0].\r
Clearly, 0 can’t be inverted unless 0 ∈ S, but if that is the case, then ∼S is the\r
improper relation, so that A × S/ ∼S is trivial.\r
The obvious thing to try is to replace A × S by A × A. Considering the\r
multiplicative structure only, A×S is a product of monoids and ∼S a congruence\r
relation on it. Let ≡S be the congruence relation that is generated on the monoid\r
A × A by ∼S. Then\r
(x, y) ≡S (x\r
0\r
, y\r
0\r
) ⇐⇒ ∃s, s\r
0 ∈ S : (sx, sy) = (s0x0\r
, s\r
0\r
y\r
0\r
).\r
2We do not treat algebraic geometry in this paper, but the statements in this paragraph\r
are rather obvious corollaries of the theory developed. It is also possible to treat the more\r
general situation of spectrums and schemes.\r
3That a function f (think of the inversion of real numbers) is ‘partial’ on a set A means that\r
f(x) is defined provided a certain predicate holds for x, say, that P(x) is true. In constructive\r
type theory [ML84], this is interpreted as that f takes pairs (x, p) as arguments, with x an\r
element of A and p a proof of P(x). Thus, formally, f is not at all in the usual sense a\r
partial function, but total on a set of pairs. In that sense, there are no partial functions in\r
constructive type theory, but the term ‘partial’ can still be useful as a way of explaining that\r
one informally thinks of f as defined on some ‘part’ of A. Since a proof of P(x) is needed\r
as an argument for f, it is clearly preferable to have f replaced by a total function. That is\r
a reason for asking for a program of reworking mathematics without partial functions. This\r
paper is in the line with such a program.\r
4

We define \fSA (the wheel of fractions with respect to S) as A×A/ ≡S with\r
the operations\r
0 = [0, 1]\r
1 = [1, 1]\r
[x, y] + [x\r
0\r
, y\r
0\r
] = [xy0 + x\r
0\r
y, yy\r
0\r
]\r
[x, y][x\r
0\r
, y\r
0\r
] = [xx0, yy\r
0\r
]\r
/[x, y] = [y, x].\r
This structure is not a ring (unless it is trivial), since 0x = 0 is not valid\r
in general: with x = [0, 0], we get 0x = [0, 0] which is not equal to [0, 1] unless\r
0 ∈ S, but then ≡S is improper and \fSA is trivial.\r
The additive structure is a commutative monoid, as well as the multiplica\u0002tive. However, the group structure of addition is destroyed, since [0, 0] + x = 0\r
has no solution in non-trivial cases. Instead, one has the formula x − x = 0x\r
2\r
if x − y is defined as x + (−1)y, where −1 = [−1, 1]. Thus x − x = 0 is true for\r
any x with 0x = 0; and in many wheels, there are many such x’s.\r
The unary operation / is an involution on the multiplicative monoid, i.e.\r
//x = x and /(xy) = /y/x. We call it the ‘reciprocal’ operation, with /x being\r
the ‘reciprocal’ of x. One does not have x/x = 1 in general, but x/x = 1+0x/x.\r
4\r
Wheels of fractions are wheels, abstractly defined as follows.\r
Definition 1.1 (wheel). A wheel is a structure hH, 0, 1, +, ·, /i in which the\r
following holds:\r
hH, 0, +i is a commutative monoid (1)\r
hH, 1, ·, /i is a commutative monoid with involution / (2)\r
Distributivity\r
(x + y)z + 0z = xz + yz (3)\r
x\r
y\r
+ z + 0y =\r
x + yz\r
y\r
(4)\r
Rules for zero-terms\r
0 · 0 = 0 (5)\r
(x + 0y)z = xz + 0y (6)\r
/(x + 0y) = /x + 0y (7)\r
x + 0/0 = 0/0. (8)\r
Here, H is a set (we will use the same symbol for the wheel), 0 and 1 are\r
constants, + and · are binary operations and / is a unary operation. We often\r
omit the dot for multiplication and we sometimes write x\r
y\r
for x/y. The usual\r
priority rules apply: lower -arity gives higher priority and multiplication is prior\r
to addition.\r
4That x/x = 1 is not in general true, is the reason why we avoid the notation x−1\r
for\r
/x. The reciprocal should be thought of as a unary version of division, like negation is a\r
unary version of subtraction. The unary negation corresponds to the binary subtraction by\r
x − y = x + (−y) and −y = 0 − y. In the same way, there is a correspondence between the\r
unary reciprocal and the binary division by x/y = x(/y) and /y = 1/y.\r
5

Note that the usual rule ‘0x = 0’, which states that “zero-terms can be\r
erased”, is replaced by rules stating that zero-terms can be moved in certain\r
ways in an expression. Indeed, (6) and (7) state that addition by a zero-term\r
commutes with multiplication and reciprocal, so that if a zero-term occurs some\u0002where inside an expression, then it can be moved outside.\r
Example 1.2. ((x+4+0y)(2+0z)+0x)(2+0z) = ((x+4)2)2+0x+0y+0z+0z.\r
As a derived rule (rule (10) on page 24), we have 0x + 0y = 0xy, so that\r
several zero-terms can be merged together in one.\r
Example 1.3. 0x + 0y + 0z + 0z = 0xyz\r
2\r
.\r
The distributivity rule (3) looks different from the usual one, since we have\r
a zero-term on the left-hand side. But it reduces to the usual rule when 0z = 0.\r
Since e.g. 0 · 2 = 0,5 we have (x + y)2 = x2 + y2 and hence we get from the\r
examples above that ((x + 4 + 0y)(2 + 0z) + 0x)(2 + 0z) = 4x + 16 + 0xyz\r
2\r
.\r
Some examples of wheels of fractions are (we list only the underlying sets):\r
1. \fZ\\{0}Z = Q ∪ {/0, 0/0}.\r
2. \fAA = {0}. This is the trivial wheel.\r
3. \f{1}(Z/2Z) = {0, 1, /0, 0/0}.\r
4. \f{1}Z, the set of fractions of integers where no identifications are made.\r
Hence two fractions are regarded as equal only if they have the same\r
numerators and the same denominators.\r
5. \f{1,3}(Z/4Z) = {0, 1, 2, 3, /0, /2, 0/0, 0/2, 2/0, 2/2}. Note that this wheel\r
extends the ring Z/4Z with six new elements. Thus, it is possible for such\r
an extension to have more “new” elements than “old” ones.\r
6. \fS0A, where S0 = {x ∈ A | xy = xz ⇒ y = z}, is the ‘total wheel\r
of fractions’. It contains the well-known total ring of fractions as the\r
subset {x | 0x = 0}. Moreover, \fS0A is what we will call ‘/-invertible’:\r
if xy = 1, then y = /x. Hence / can be used to compute multiplicative\r
inverses whenever such exist.\r
7. \fU A, where U is the set of units in A, is /-invertible and the subset\r
{x | 0x = 0} is an isomorphic copy of A. This shows that A can be\r
extended to a /-invertible wheel in a structure-preserving way (as opposed\r
to the construction of a total wheel of fractions, which often kills a lot of\r
ideals).\r
An advantage of wheels as compared to rings is that several rules that are\r
valid in rings only in special cases, will have counterparts that are generally\r
valid in wheels. One example is the rule\r
xz = yz ∧ z 6= 0 ⇒ x = y\r
of integral domains, whose general counterpart for wheels is\r
xz = yz ⇒ x + 0z/z = y + 0z/z\r
50(1 + 1) = 0(1 + 1) + 0 · 0 = 0 · 1 + 0 · 1 = 0 + 0 = 0.\r
6

(derived rule (13) on page 24).\r
Since any ring can be extended to a wheel in a structure-preserving way, one\r
may always switch to wheel theory if one likes, even if one works with a problem\r
which originates from a context of rings. Suppose for instance that a, b, c are\r
elements of a ring A and that we have concluded that\r
ac = bc.\r
We may then think of a, b, c as elements of a /-invertible wheel that extends A\r
and use 0c = 0, concluding that\r
a + 0/c = b + 0/c.\r
This does always make sense. Additional information about c can later be used\r
to go further in the calculation.\r
We arrived at wheels of fractions by a modification of a well-known con\u0002struction, and it was by no means clear that the chosen construction yields the\r
best result. We will however show that, in a certain sense, this construction is\r
very natural. We do that in the following steps.\r
First, we forget the operations 0 and + of the ring we started with, so that\r
we are left with the multiplicative monoid. We show that the construction can\r
be carried out in this setting, and that it solves a universal problem for monoids.\r
This shows that it is very natural from the point of view of the multiplicative\r
monoid. We then show that there is a unique way of defining 0 and + such that\r
the construction is functorial from the category of semirings to the category of\r
‘weak wheels’, which is a very general category. That unique way is precisely\r
the one described above.\r
Convention. Any category with structures as objects is assumed\r
to have algebraic morphisms as arrows, i.e., mappings that preserve\r
all operations, including constants which are to be viewed as nullary\r
operations.\r
2 Involution-monoids\r
The construction sketched in the previous section was motivated by a wish\r
to make certain changes to the multiplicative monoid of a commutative ring.\r
Fortunately, it turns out that the construction is compatible with the additive\r
structure too, but that is not needed for the construction to be made. In fact,\r
if one forgets about the additive structure and treats the multiplicative monoid\r
only, then the construction becomes even more natural. A few sections will\r
therefore be devoted to a study of commutative monoids. In this context, the\r
motivation from the previous section amounts to the following.\r
Every monoid M comes with a partial inversion function, defined on the\r
group of units in M. M can be extended to a group only when every element of\r
it is cancellable. However, we will show that if M is commutative, then it can\r
always be extended to a commutative monoid with an involution ∗, such that\r
the partial inversion function of M is the restriction of ∗. This will follow as an\r
application of the more general construction given below.\r
7

2.1 Definitions and examples\r
We use the following notion of involution, the canonical example being the\r
inverse of a group.\r
Definition 2.1 (involution). An involution on M is a mapping ∗ : M → M\r
such that\r
x\r
∗∗ = x\r
(xy)\r
∗ = y∗x∗\r
.\r
Note that e\r
∗ = e for the identity e, since e∗ = ee∗ = e∗∗e∗ = (ee∗\r
)\r
∗ =\r
e\r
∗∗ = e. Therefore, an involution is a homomorphism M op → M. If M is\r
commutative, then an involution is precisely an automorphism of order 2.\r
Definition 2.2 (involution-monoid). An involution-monoid is a pair hM, ∗i\r
where M is a monoid and ∗ an involution on it. A morphism of involution\u0002monoids ϕ : hM, ∗i → hN, ?i is a monoid morphism M → N with ϕ(x\r
∗\r
) = ϕ(x)\r
?\r
for every x.\r
Example 2.3. 1. A group with x\r
∗ = x−1\r
.\r
2. An abelian group (or any commutative monoid) with ∗ being the identity\r
morphism.\r
3. The multiplicative monoid of a field together with\r
x\r
∗ =\r
(\r
0 (x = 0)\r
x\r
−1\r
(x 6= 0).\r
Note however that this definition is constructive only if x = 0 is decidable.\r
That is not the case in e.g. R.\r
4. The monoid of n × n matrices with ∗ being transposition.\r
5. The monoid of strings from a given alphabet (e being the empty string\r
and the composition being concatenation) with x\r
∗ being the string x in\r
reversed order.\r
As is seen, involutions can sometimes be used as approximations of inversion\r
functions. We therefore use the following different notions of inversion.\r
Definition 2.4. Let hM, ∗i be an involution-monoid.\r
1. An element x ∈ M is invertible or a unit if there exists a y ∈ M with\r
xy = yx = e. This is the ordinary notion for monoids and we use the\r
ordinary notation x\r
−1\r
for the element with xx−1 = x\r
−1x = e. We call\r
x\r
−1\r
the multiplicative inverse of x.\r
2. An element x ∈ M is ∗-invertible or a ∗-unit if xx∗ = x\r
∗x = e (hence\r
∗-units are units).\r
3. hM, ∗i is said to be ∗-invertible if all units are ∗-invertible, i.e., if x\r
−1 = x∗\r
whenever x\r
−1\r
is defined.\r
Example 2.5. ‘Orthogonal’ is a more common term for ∗-invertible n × n\u0002matrixes.\r
8

2.2 The construction of involution-monoids from commu\u0002tative monoids\r
From now on, M is assumed to be a commutative monoid and X a\r
subset of it. S is assumed to be the submonoid generated by X, i.e.,\r
S consists of all finite products of elements of X (e being the empty\r
product). Variables s, s\r
0\r
, s\r
00\r
, . . . , s0, s1, . . . are assumed to vary over\r
S when nothing else is stated.\r
The ordinary construction of commutative monoids of fractions is precisely\r
like that of commutative rings of fractions, except that one needs a minor\r
modification to take care of the fact that no subtraction is present. Bour\u0002baki [Bou73] defines MX as the monoid M × S/ ∼S, where (m, s) ∼S (m0\r
, s\r
0\r
)\r
means ∃s\r
00 : s00ms0 = s00m0\r
s\r
0\r
. That construction solves the following universal\r
problem:\r
Find a monoid MX with ι(M,X): M → MX, having the property\r
that whenever ϕ : M → N is a monoid-morphism with ϕ(x) a\r
unit for every x ∈ X, then there is a unique ϕˆ : MX → N with\r
ϕ = ϕˆ ◦ ι(M,X).\r
MX\r
\r
\r
\r
\r
\r
ι(M,X)\r
✒ ❅\r
❅❅❅❅\r
ϕˆ\r
❘\r
M\r
ϕ ✲ N\r
Informally, one asks that the elements of a subset X should ‘turn into units’\r
when mapped into N and defines MX to be universal with that property. Bour\u0002baki does not assume that N is commutative, but the generality is somewhat\r
illusory, since the homomorphic image of a commutative monoid is again com\u0002mutative. Since everything takes place inside the image of M, one has all\r
commutativity that is needed. One could therefore as well require that N be\r
commutative and handle a morphism M → N 0(N0 not commutative) by letting\r
N be the image, factorizing the morphism as M → N → N 0.\r
An analogue for involution-monoids is to ask that the elements x ∈ X should\r
‘turn into ?-units’ when mapped into an involution-monoid hN, ?i. Formally, we\r
state it as follows, with T denoting the forgetful functor taking the monoid out of\r
an involution-monoid. Motivated by the arguments in the previous paragraph,\r
we assume that N is commutative.6\r
Let M be a commutative monoid and X an arbitrary subset of M.\r
Then find an involution-monoid M∗\r
X with η(M,X)\r
: M → T(M∗\r
X),\r
having the property that whenever hN, ?i is a commutative involu\u0002tion-monoid and ϕ : M → N a monoid-morphism with ϕ(x)ϕ(x)\r
? =\r
ϕ(x)\r
?ϕ(x) = e for every x ∈ X, then there is a unique ϕˆ : M∗\r
X →\r
hN, ?i with ϕ = T(ϕˆ) ◦ η(M,X).\r
6\r
In our situation, this requirement is really essential, since we do not any longer work\r
inside the image of M, but in the generated involution-monoid, which is not automatically\r
commutative.\r
9

T(M∗\r
X)\r
\r
\r
\r
\r
\r
η(M,X)\r
✒ ❅❅❅\r
❅❅\r
T(ϕˆ)\r
❘\r
M\r
ϕ ✲ N\r
We show how to find M∗\r
X. Consider the involution-monoid hM × M, ∗i\r
where (x, y)\r
∗ = (y, x) and define ≡S on it by\r
(x, y) ≡S (x\r
0\r
, y\r
0\r
) means ∃s1, s2 : (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
).\r
Then ≡S is clearly reflexive and symmetric, but it is also transitive, since if\r
(s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and (s3, s3)(x\r
0\r
, y\r
0\r
) = (s4, s4)(x\r
00\r
, y\r
00), then it fol\u0002lows that (s1s3, s1s3)(x, y) = (s2s4, s2s4)(x\r
00\r
, y\r
00). It is easily seen that ≡S pre\u0002serves the operations, so that it is in fact a congruence relation. The congruence\r
class containing (x, y) will be denoted by [x, y].\r
Definition 2.6. Let M∗\r
X = hM × M, ∗i / ≡S, and let η(M,X)\r
: M → T(M∗\r
X) be\r
defined by x 7→ [x, e].\r
Theorem 2.7 (solution to the universal problem). Suppose hN, ?i is a\r
commutative involution-monoid and ϕ : M → N a monoid-morphism. Then\r
ϕˆ([x, y]) = ϕ(x)ϕ(y)\r
? defines a morphism of involution-monoids M∗\r
X → hN, ?i\r
and if ψ is such a morphism too, then ϕ = T(ψ) ◦ η(M,X)if and only if ψ = ϕˆ.\r
Proof. We first prove uniqueness of ψ. In order for it to extend ϕ, we must\r
have\r
ψ([x, y]) = ψ([x, e][y, e]\r
∗\r
) = ψ([x, e])ψ([y, e])? = ψ(η(M,X)(x))ψ(η(M,X)(y))?\r
= ϕ(x)ϕ(y)\r
?\r
.\r
Hence, ϕˆ is the only candidate. It is well-defined, since if [x, y] = [x\r
0\r
, y\r
0\r
] then\r
there are s1, s2 with (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and therefore\r
ϕ(x)ϕ(y)\r
? = ϕ(x)eϕ(y)? = ϕ(x)ϕ(s1)ϕ(s1)?ϕ(y)? = ϕ(xs1)ϕ(ys1)?\r
= ϕ(x\r
0\r
s2)ϕ(y\r
0\r
s2)\r
? = ϕ(x0\r
)ϕ(s2)ϕ(s2)\r
?ϕ(y0\r
)\r
? = ϕ(x0\r
)eϕ(y\r
0\r
)\r
?\r
= ϕ(x\r
0\r
)ϕ(y\r
0\r
)\r
?\r
.\r
It is a monoid-morphism since\r
ϕˆ([x, y][x\r
0\r
, y\r
0\r
]) = ϕˆ([xx0, yy\r
0\r
]) = ϕ(xx0)ϕ(y\r
0\r
y)\r
? = ϕ(x)ϕ(x0\r
)ϕ(y)\r
?ϕ(y0\r
)\r
?\r
= ϕ(x)ϕ(y)\r
?ϕ(x0\r
)ϕ(y\r
0\r
)\r
? = ϕˆ([x, y])ϕˆ([x0\r
, y\r
0\r
])\r
and\r
ϕˆ([e, e]) = ϕ(e)ϕ(e)\r
? = ee? = e.\r
It preserves the involution since\r
ϕˆ([x, y]\r
∗\r
) = ϕˆ([y, x]) = ϕ(y)ϕ(x)\r
? = ϕ(y)??ϕ(x)? = (ϕ(x)ϕ(y)?\r
)\r
?\r
= ϕˆ([x, y])?.\r
10

2.3 Insertion of the parent monoid\r
The mapping η(M,X) differs from the usual ι(M,X) only in the choice of codomain,\r
since we will see in theorem 2.10 that MX is included in M∗\r
X. Hence, many\r
properties of ι carry over to η. One such is that η(M,X)is not in general injective.\r
Proposition 2.8. η(M,X)(a) = η(M,X)(b) iff there is some s ∈ S with sa = sb.\r
Proof.\r
[a, e] = [b, e]\r
⇐⇒ ∃s1, s2 : (s1, s1)(a, e) = (s2, s2)(b, e)\r
⇐⇒ ∃s : sa = sb.\r
Corollary 2.9. η(M,X)is injective iff every x ∈ X is cancellable.\r
Proof. If every x ∈ X is cancellable, then every s ∈ S is too, since S is generated\r
by X. Hence sa = sb ⇒ a = b and the rest follows from the proposition.\r
It is convenient to use the same symbol for an element of a monoid M and\r
its image under η(M,X), even when η(M,X)is not injective (remembering that\r
lack of injectivity means that equality in M∗\r
X need not imply equality in M).\r
We will use that notation frequently. In particular, it allows us to write xy ∗\r
instead of [x, y].\r
Theorem 2.10. The homomorphism ηˆ(M,X): MX → T(M∗\r
X), induced by\r
η(M,X) according to the universal property of MX, is injective.\r
MX\r
\r
\r
\r
\r
\r
ι(M,X)\r
✒ ❅\r
❅\r
❅\r
❅\r
❅\r
ηˆ(M,X)\r
❘\r
M\r
η(M,X) ✲ T(M∗\r
X)\r
Proof. This is best seen in a very concrete way, examining how the constructions\r
of MX and M∗\r
X are related.\r
Let ∼S be the restriction of ≡S to M × S. Then\r
(x, s) ∼S (x\r
0\r
, s\r
0\r
) ⇐⇒ ∃s\r
00 : s00xs0 = s00x0\r
s,\r
because on the one hand, if s\r
00xs0 = s00x0\r
s, then we have\r
(s\r
00s0\r
, s\r
00s0\r
)(x, s) = (s\r
00xs0\r
, s\r
00ss0\r
) = (s\r
00x0\r
s, s\r
00ss0\r
) = (s\r
00s, s00s)(x0\r
, s\r
0\r
)\r
and on the other, if (s1, s1)(x, s) = (s2, s2)(x\r
0\r
, s\r
0\r
), then\r
s1xs0 = s2x\r
0\r
s\r
0 = s1x0\r
s.\r
11

Since ∼S is a restriction of ≡S, it follows that the mapping M × S/ ∼S→\r
M × M/ ≡S is injective. This mapping is clearly ηˆ(M,X).\r
M × S ⊂ ✲ M × M\r
M × S/ ∼S\r
❄❄\r
✲ M × M/ ≡S\r
❄❄\r
We therefore regard MX as a submonoid of T(M∗\r
X).\r
2.4 The role of X in the structure of M∗\r
X\r
When exploring possible structures of M ∗\r
X, we don’t have to consider arbitrary\r
subsets X, but only submonoids S, since M∗\r
X = M∗S when S is the submonoid\r
generated by X. When comfortable, we may even restrict our attention to a\r
special class of submonoids: those “closed under division”.\r
Definition 2.11. A submonoid S of M is closed under division if it holds that\r
sx ∈ S ⇒ x ∈ S. (s ∈ S, x ∈ M)\r
Definition 2.12. The divisional closure of a submonoid S of M is the smallest\r
submonoid of M that contains S and is closed under division.\r
Lemma 2.13. S˜ = {x ∈ M | ∃s : sx ∈ S} is the divisional closure of S.\r
Proof. Since es ∈ S, we have s ∈ S˜ and hence S ⊂ S˜.\r
It is obvious that S˜ cannot be smaller, the question is whether it is closed\r
under multiplication and division. Suppose x, y ∈ S˜, say s1x, s2y ∈ S. Then\r
(s1s2)(xy) ∈ S, so that xy ∈ S˜. Hence it is a submonoid of M.\r
To see that it is closed under division, suppose that s˜x ∈ S˜, with s˜ ∈ S˜.\r
Then there is an s with s(sx˜ ) ∈ S. But there is also an s\r
0\r
such that s\r
0\r
s˜ ∈ S.\r
Then ss0s˜ ∈ S and (ss0s˜)x = (ss0)(s˜x) ∈ S, so that x ∈ S˜.\r
This is an algebraic closure operator (in the sense of e.g. [BS81]).\r
Proposition 2.14. M∗\r
X = M∗S = M∗\r
S˜\r
(they are identical as sets and have\r
identical operations).\r
Proof. It is clear by definition of M∗\r
X that it is identical to M∗S\r
. We prove\r
M∗\r
S = M∗\r
S˜\r
.\r
Suppose that [x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S\r
, say (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
).\r
Then, since S ⊂ S˜, [x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S˜\r
. On the other hand, suppose\r
[x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S˜\r
, say (x1, x1)(x, y) = (x2, x2)(x\r
0\r
, y\r
0\r
) with x1, x2 ∈ S˜.\r
Then there are by definition of S˜ some s1, s2 ∈ S with s1x1, s2x2 ∈ S. Hence\r
((s1x1)s2,(s1x1)s2)(x, y) = (s1(s2x2), s1(s2x2))(x\r
0\r
, y\r
0\r
), which means that [x, y]\r
= [x\r
0\r
, y\r
0\r
] in M∗\r
S\r
.\r
Thus M∗\r
S\r
and M∗\r
S˜\r
are identical as sets. Their operations are identical since\r
they are defined in the same way.\r
12

We now investigate the connection between the involution of M∗\r
S\r
and the\r
partial inversion function on its underlying monoid.\r
Proposition 2.15. η(M,X)(x) is ∗-invertible if and only if x belongs to the\r
divisional closure of the submonoid S generated by X.\r
Proof. Let x ∈ S˜, say sx = s\r
0 ∈ S. Then (s, s)(x, x) = (s0\r
, s\r
0\r
)(e, e), so that\r
xx∗ = e in M∗\r
S\r
.\r
On the other hand, suppose xx∗ = e in M∗\r
S\r
, say (s, s)(x, x) = (s\r
0\r
, s\r
0\r
)(e, e).\r
Then sx = s\r
0 ∈ S, so that x ∈ S˜.\r
In particular, we will often (and without explanation) use that ss∗ = e for\r
any s ∈ S.\r
Definition 2.16. A submonoid S ⊂ M is saturated if xy ∈ S ⇒ x, y ∈ S.\r
Example 2.17. The group of units is saturated as a subset of M.\r
Example 2.18. Let S0 = {x ∈ A | xy = xz ⇒ y = z}. It is saturated as a\r
subset of M. We call it “the submonoid of cancellable elements”.\r
Proposition 2.19. M∗\r
S\r
is ∗-invertible if and only if S˜ is saturated in M.\r
Proof. By proposition 2.14 we may assume that S = S˜.\r
Suppose that S is saturated and that [a, b] is a unit in M∗\r
S\r
, say [a, b][a\r
0\r
, b\r
0\r
] =\r
e, which is to say that (s1, s1)(aa0, bb0) = (s2, s2)(e, e) for some s1, s2. Then\r
s1aa0 = s1bb0 = s2 ∈ S, so that a, b ∈ S by saturation. Hence ab ∈ S so that\r
[a, b][a, b]\r
∗ = [ab, ab] = e.\r
Suppose on the other hand that every unit is ∗-invertible and take xy ∈ S.\r
We shall prove x ∈ S. In M∗\r
S\r
, x is a unit with x\r
−1 = y(xy)∗\r
, but then it is\r
∗-invertible by assumption, so that y(xy)\r
∗ = x∗\r
. That means that there are\r
s1, s2 with (s1, s1)(y, xy) = (s2, s2)(e, x), in particular s2x = s1(xy). But xy\r
was taken from S, so we conclude that s2x ∈ S and hence that x ∈ S˜. Since\r
we have assumed that S = S˜, we get x ∈ S. A similar argument proves that\r
y ∈ S.\r
Corollary 2.20. Let U be the group of units in M. Then M∗\r
U\r
is ∗-invertible and\r
it contains M as a submonoid (this solves the problem of finding an extension of\r
M together with an involution extending the partial inversion function of M).\r
Proof. Since U is saturated, M∗\r
U\r
is ∗-invertible by the previous proposition. By\r
corollary 2.9, η(M,U)is injective, since units are cancellable.\r
Proposition 2.21. The restriction to M of the involution of M∗\r
U\r
, is the partial\r
inversion function of M.\r
Proof. The restriction of ∗ to M extends the partial inversion function since M ∗\r
U\r
is ∗-invertible. We shall prove that if x, y ∈ M with y = x\r
∗\r
in M∗\r
U\r
, then xy = e.\r
Suppose therefore that x, y ∈ M and that y = x\r
∗\r
. The latter means that there\r
are units u1, u2 ∈ M with (u1, u1)(y, e) = (u2, u2)(e, x), but then u2x = u1, so\r
that x ∈ U. Hence xx∗ = e, thus xy = e.\r
13

2.5 The construction as a functor\r
We may turn the construction (M, X) 7→ M∗\r
X into a functor F in the following\r
way.\r
Let C be the category of pairs (M, X) where M is a commutative monoid\r
and X a subset of M. A C-arrow (M, X) → (M 0, X0) is a monoid-morphism\r
ϕ : M → M0 with ϕ(X) ⊂ X0. Define F(M, X) to be M∗\r
X and F(ϕ) to be\r
the mapping [x, y] 7→ [ϕ(x), ϕ(y)]. It is well-defined since if [x, y] = [x\r
0\r
, y\r
0\r
],\r
then there are s1, s2 such that (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
). Since ϕ(X) ⊂ X0,\r
it follows that ϕ(s1) and ϕ(s2) are elements of the submonoid generated by\r
X0. Since (ϕ(s1), ϕ(s1))(ϕ(x), ϕ(y)) = (ϕ(s2), ϕ(s2))(ϕ(x\r
0\r
), ϕ(y\r
0\r
)), it follows\r
that [ϕ(x), ϕ(y)] = [ϕ(x\r
0\r
), ϕ(y\r
0\r
)]. It is easily seen that F(ϕ) is a morphism of\r
involution-monoids. It is now easy to check that F is a functor from C to the\r
category CInvMon of commutative involution-monoids.\r
Proposition 2.22. F has a right adjoint G, which is defined on objects by\r
hM, ∗i 7→ (M, X), with X the set of ∗-units in hM, ∗i, and on morphisms by\r
α 7→ T(α). η is a natural transformation from the identity to GF and it is the\r
unit of the adjunction. The counit is \u000F with \u000FhM,∗i : [x, y] 7→ xy∗.\r
Proof. η(M,X) maps X into the set U of ∗-units, thus is a C-arrow (M, X) →\r
T(M∗\r
X,U). The naturalness is obvious.\r
We have to prove that\r
(\u000FF)(M,X)(Fη)(M,X) = IdM∗\r
X\r
and\r
(G\u000F)hM,∗i(ηF)hM,∗i = IdG(hM,∗i).\r
(\u000FF)(M,X): FG(M∗\r
X) → M∗\r
X by [[x, y], [z, w]] 7→ [xw, yz]\r
(Fη)(M,X): M∗\r
X → FG(M∗X) by [x, y] 7→ [[x, e], [y, e]]\r
(G\u000F)H : GFG(hM, ∗i) → G(hM, ∗i) by [x, y] 7→ xy∗\r
(ηG)H : G(hM, ∗i) → GFG(hM, ∗i) by x 7→ [x, e]\r
Then\r
(\u000FF)(M,X)(Fη)(M,X)([x, y]) = (\u000FF)(M,X)([[x, e], [y, e]]) = [xe, ye] = [x, y]\r
and\r
(G\u000F)hM,∗i(ηG)hM,∗i(x) = (G\u000F)hM,∗i([x, e]) = xe∗ = x.\r
ηˆ(M,X)is a transformation from MX to T(M∗\r
X), natural in (M, X).\r
Remark. Involutions on monoids hM, 0, +i will throughout be de\u0002noted by −. We write −x for x\r
∗\r
in this case. Further, we write x−y\r
for x + (−y).\r
Involutions on monoids hM, 1, ·i will throughout be denoted by /.\r
We write /x for x\r
∗\r
in this case. Further, we write x/y for x · (/y).\r
14

3 Applications to semirings\r
The consideration of commutative monoids leads naturally to consideration of\r
semirings in the sense of e.g. Golan [Gol99] (we define this notion below, the\r
word ‘semiring’ has no uniform meaning in the literature), in the following way.\r
When addition has been defined on the natural numbers, turning N into\r
a commutative monoid, one finds that N can be used to add, not only finite\r
collections of elements, but also finite collections of equally large finite collections\r
of elements. This motivates the introduction of multiplication on N.\r
The argument in the previous paragraph is an elementary way of saying\r
that N can be viewed as its own endomorphism monoid with multiplication\r
being composition. The combination with addition turns N into a semiring.\r
In general, suppose that M = hM, 0, +i is a commutative monoid. Then its\r
monoid End(M) of endomorphisms has a natural additive structure inherited\r
from M by\r
0(x) = 0,\r
(f + g)(x) = f(x) + g(x).\r
These definitions make End(M) a semiring.\r
Definition 3.1. A semiring is a structure hM, 0, 1, +, ·i such that\r
1. hM, 0, +i is a commutative monoid.\r
2. hM, 1, ·i is a monoid.\r
3. (x + y)z = xz + yz and x(y + z) = xy + xz.\r
4. 0x = x0 = 0.\r
We do not exclude the trivial case 0 = 1.\r
If there is a solution a to the equation 1 + x = 0 in a semiring A, then we\r
may define −x = ax and we get x + (−x) = 1x + ax = (1 + a)x = 0x = 0, so\r
that A is a ring in this case.\r
Beside the important example End(M), we have many mathematical struc\u0002tures that are semirings, for instance:\r
1. Any ring with identity.\r
2. The (left or right) ideals of a ring, with I + J defined to be {i + j | i ∈\r
I, j ∈ J} and IJ defined to be the (left or right) ideal generated by\r
{ij | i ∈ I, j ∈ J}. 0 is the trivial ideal and 1 is the improper ideal.\r
3. Any bounded distributive lattice, e.g. Heyting algebras and Boolean alge\u0002bras. Here h0, 1, +, ·i is h⊥, >, ∨, ∧i.\r
We need some definitions, which are taken from [Gol99], except that we\r
use the word ‘module’ for what there is called ‘semimodule’. The reason for\r
this choice is that ‘module’ is shorter and we see no point in distinguishing\r
the notions since if A happens to be a ring, then an A-module in the following\r
sense is automatically an A-module in the sense of rings, since if we define\r
−m = (−1)m, then m + (−m) = (1 + (−1))m = 0m = 0.\r
15

Definition 3.2. Let A be a semiring. A left A-module is a commutative monoid\r
hM, 0, +i with multiplication by A-elements to the left defined (formally, a func\u0002tion A×M → M written (a, m) 7→ am) such that for any a, a\r
0 ∈ A, m, m0 ∈ M,\r
(aa0)m = a(a\r
0m)\r
1m = m\r
(a + a\r
0\r
)m = am + a\r
0m\r
a(m + m0) = am + am0\r
0m = 0\r
a0 = 0\r
where 0 to the left is in A, while 0 to the right or alone is in M.\r
Every commutative monoid hM, e, ·i is an N-module with the multiplication\r
(n, m) 7→ mn. This is in analogy with the fact that every abelian group is a\r
Z-module.\r
Definition 3.3. A left ideal of A is a left A-module inside A; i.e., it is a\r
submonoid of the additive monoid of A and it is closed under multiplication to\r
the left by any element from A.\r
7\r
The notions of right A-module and right ideal are defined analogously.\r
3.1 Applications to additive monoids of semirings\r
We show how our construction can be used for extending a semiring so that an\r
additive involution − can be defined on the result. The process is similar to the\r
construction of Z from N, but it does not need that all elements are additively\r
cancellable.\r
The idea is that we first apply our construction to the additive monoid, then\r
defining multiplication on the result.\r
Suppose that hA, 0, +i is the additive monoid of a semiring A and that X is\r
a subset. Let S be the right ideal generated by X; i.e., S consists of all finite\r
sums\r
X\r
i\r
xiai (xi ∈ X, ai ∈ A).\r
We use the construction hA, 0, +i\r
∗\r
S\r
, given in section 2.2, writing −x for x\r
∗\r
.\r
In section 2.2, we noted that each element of M∗\r
X is of the form xy∗\r
for x, y ∈ M;\r
the corresponding statement now is that each element is of the form x + (−y),\r
which will be written as x−y. Such elements x−y and x\r
0−y0\r
(with x, y, x\r
0\r
, y\r
0 ∈\r
A) are equal when there exists s, s\r
0 with (s, s)+(x, y) = (s0\r
, s\r
0\r
)+(x\r
0\r
, y\r
0\r
) in A×A\r
(in particular, 1−1 = 0 holds precisely when there is some s such that s+1 ∈ S,\r
see proposition 2.15).\r
We now define a ‘multiplication’ by\r
(x − y)(z − w) = (xz + yw) − (xw + yz). (x, y, z, w ∈ A)\r
7We accept improper ideals, which [Gol99] does not. This is natural since we accept trivial\r
semirings.\r
16

It is well-defined, since if x − y = x\r
0 − y0\r
, then there are s, s\r
0 ∈ S with (s, s) +\r
(x, y) = (s\r
0\r
, s\r
0\r
) + (x\r
0\r
, y\r
0\r
) in A × A, so that\r
(sx0 + sy0, sx0 + sy0) + (xz + yw, xw + yz)\r
= ((s + x)z + (s + y)w,(s + x)w + (s + y)z)\r
= ((s\r
0 + x0\r
)z + (s\r
0 + y0\r
)w,(s\r
0 + x0\r
)w + (s\r
0 + y0\r
)z)\r
= (s\r
0\r
z + s\r
0w, s0w + s0\r
z) + (x\r
0\r
z + y\r
0w, x0w + y0\r
z)\r
and since S is a right ideal, sx0 + sy0 ∈ S and s\r
0\r
z + s\r
0w ∈ S. Hence (xz + yz) −\r
(xw + yz) = (x\r
0\r
z + y\r
0\r
z) − (x\r
0w + y0\r
z).\r
The structure obtained, together with the constant 1, will be denoted by A\r
−\r
X.\r
It is clearly a semiring: indeed, it is a quotient of A\r
−\r
∅ which is the ‘convolution\r
algebra’, or ‘monoid-semiring’, on A defined by the monoid {1, −1}.\r
8 A natural\r
morphism η(A,X): A → A\r
−\r
X is given by η(A,X)(x) = η(hA,0,+i,X)(x) = x.\r
Example 3.4. Z = N\r
−\r
N\r
.\r
Example 3.5. An example when 1−1 6= 0 is obtained by thinking of machines\r
not capable of counting with elements larger than the natural number N.\r
Let ∼ be defined on N as “equal or large”, formally:\r
x ∼ y means x = y ∨ (x ≥ N ∧ y ≥ N).\r
Then ∼ is a congruence relation and N/∼ consists of N + 1 elements. Since\r
no element except 0 is additively cancellable, we can’t introduce an additive\r
inverse, but we may construct (N/∼)\r
−\r
∅\r
, in which 1 − 1 6= 0.\r
Now, consider (N/∼)×(Z/7Z) (it can be thought of as a data structure with\r
elements being pairs representing numbers together with a day of the week). An\r
element (x, y) of it is additively cancellable if and only if x = 0. Let S0 be the\r
set of such elements. It holds in ((N/∼) × (Z/7Z))−\r
S0\r
that (0, x) − (0, x) = 0,\r
but not that 1 − 1 = 0.\r
Example 3.6. Let N∞ be N extended with an element ∞ with\r
x + ∞ = ∞ + x = ∞\r
x∞ = ∞x =\r
(\r
0 (x = 0)\r
∞ (x 6= 0).\r
This notion of infinity differs from that in the introduction, since here we have\r
0∞ = 0, while we had 0∞ = ⊥ in the introduction.\r
N∞ is clearly a semiring, thus we may construct (N∞)\r
−\r
X . However, if a ∈ X\r
for some a 6= 0, then ∞ is an element of the right ideal generated by X, hence\r
(N∞)\r
−\r
X is trivial, since (∞, ∞) + (x, y) = (∞, ∞) + (x\r
0\r
, y\r
0\r
) for all x, y, x\r
0\r
, y\r
0\r
.\r
Hence, if we want non-triviality, we need to take X ⊂ {0}, ending up with the\r
structure (N∞)\r
−\r
∅\r
. In that structure, x − x = 0 is true only for x = 0.\r
The operation − makes A\r
−\r
X a semiring−:\r
8See [Gol99, example 3.3, p. 29]. The notation is different.\r
17

Definition 3.7. A semiring− is a semiring with an additive involution − such\r
that\r
−x = (−1)x = x(−1).\r
A homomorphism of semirings− is a semiring homomorphism which also pre\u0002serves −.\r
One could also describe a semiring− as a semiring with a constant −1 such\r
that (−1)(−1) = 1 and (−1)x = x(−1) for all x. An involution with the required\r
properties is then given by −x = (−1)x.\r
Note that a ring is precisely a semiring− in which 1 − 1 = 0 holds. Then\r
x − x = (1 − 1)x = 0x = 0 for all x.\r
The construction solves the following universal problem. Let T be the func\u0002tor which forgets the − of semirings−, turning them into semirings.\r
Theorem 3.8. Suppose that A is a semiring and X a subset of it. Suppose\r
also that B is a semiring− and ϕ : A → T(B) a semiring morphism such\r
that ϕ(x) − ϕ(x) = 0 for all x ∈ X. Then there exists a unique morphism\r
ϕˆ : A\r
−\r
X → B of semirings− such that ϕ = T(ϕˆ) ◦ η(A,X)\r
.\r
T(A\r
−\r
X)\r
\r
\r
\r
\r
\r
η(A,X)\r
✒ ❅\r
❅\r
❅\r
❅\r
❅\r
T(ϕˆ)\r
❘\r
A\r
ϕ ✲ T(B)\r
Proof. Note first that if s ∈ S, then ϕ(s) − ϕ(s) = 0, since\r
ϕ(\r
X\r
i\r
xiai) − ϕ(\r
X\r
i\r
xiai) =\r
X\r
i\r
(ϕ(xi) − ϕ(xi))ϕ(ai)\r
=\r
X\r
i\r
(0ϕ(ai)) = 0.\r
Hence, we may replace X by S everywhere in the statement of the theorem.\r
Then theorem 2.7 gives the unique candidate ϕˆ : [x, y] 7→ ϕ(x)−ϕ(y) and proves\r
that it preserves 0, +, −. It also preserves 1, since ϕˆ(1) = ϕˆ([1, 0]) = ϕ(1) = 1.\r
Preservation of multiplication is checked thus: Let x, y, z, w ∈ A.\r
ϕˆ((x − y)(z − w)) = ϕˆ((xz + yw) − (xw + yz))\r
= ϕ(xz + yw) − ϕ(xw + yz)\r
= ϕ(x)ϕ(z) + ϕ(y)ϕ(w) − (ϕ(x)ϕ(w) + ϕ(y)ϕ(z))\r
= (ϕ(x) − ϕ(y))(ϕ(z) − ϕ(w))\r
= ϕˆ(x − y)ϕˆ(z − w).\r
The rules −x = (−1)x = x(−1) were applied in the fourth step.\r
18

3.2 Applications to multiplicative monoids of commuta\u0002tive semirings\r
In the following, all monoids and semirings are assumed to be com\u0002mutative (a semiring is commutative if + and · are commutative).\r
When we use notions like units, divisional closures etc., we refer to\r
the multiplicative monoid (when nothing else is stated).\r
We will sometimes write x\r
y\r
for x/y.\r
Given a commutative semiring, one may first apply the construction to the\r
additive monoid, introducing an additive involution as was explained in the\r
previous section. One may then continue by applying the construction to the\r
multiplicative monoid, introducing also a multiplicative involution /. We show\r
in this section how that second step is carried out. It is not necessary that\r
an additive involution is present, one may as well start from a plain semiring.\r
However, if both − and / are wanted, then − should be constructed first, since\r
the result of the construction in this section will not be a semiring anymore.\r
In section 1.2, it was sketched how this construction is made. We there\r
supposed that it was applied to a ring, but semirings work as well. We now\r
show that the choice of definition of + was not arbitrary, it is the unique choice\r
which yields a functorial definition (using some very general conditions). More\r
precisely, let M be the multiplicative monoid of a semiring. Then there is a\r
unique way of defining on M∗\r
X a binary operation + with neutral element 0,\r
such that the functor F : M 7→ M∗\r
X acts functorially also with respect to 0 and\r
+ and such that η(M,X) preserves also these operations.\r
Technically, we state it in the theorem below. We need some preliminaries.\r
Definition 3.9. Let C0be the category with objects (A, X) where A is a (com\u0002mutative) semiring and X a subset of it. An arrow (A, X) → (A0\r
, X0) is a\r
semiring morphism ϕ : A → A0 with ϕ(X) ⊂ X0.\r
Note that there is a forgetful functor T1 : C0 → C (the category C was\r
defined on page 14), forgetting the additive structure.\r
Definition 3.10 (weak wheel). A weak wheel is a structure hH, 0, 1, +, ·, /i\r
with hH, 1, ·, /i a commutative involution-monoid and 0 neutral for +, i.e. 0 +\r
x = x + 0 = x.\r
Let T2 be the forgetful functor (forgetting 0 and +) from the category WW\r
of weak wheels to the category CInvMon of commutative involution-monoids.\r
Theorem 3.11. There is a unique functor F\r
0\r
: C0 → WW such that the\r
diagram\r
C\r
0 F\r
0\r
✲ WW\r
C\r
T1\r
❄ F ✲ CInvMon\r
T2\r
❄\r
19

commutes and such that, for each (A, X), there is an operation-preserving func\u0002tion η(A,X) which makes the following diagram commute (here M is the multi\u0002plicative monoid of A).\r
(A, X)\r
η(A,X) ✲ F\r
0\r
(A, X)\r
(M, X)\r
x 7→ x\r
❄ η(M,X) ✲ M∗\r
X\r
x 7→ x\r
❄\r
Proof. There is a unique possible definition of η(A,X): by the lower diagram,\r
F\r
0\r
(A, X) is M∗\r
X with additional structure (with the notation / instead of ∗ and\r
with ‘\r
x\r
y\r
’ sometimes denoting x/y), so that we must have η(A,X)(x) = η(M,X)(x).\r
We therefore define η(A,X) as x 7→ η(M,X)(x). We then have what is needed to\r
check that the lower diagram commutes, but it is not clear that η(A,X) preserves\r
the operations, since 0 and + have not yet been defined.\r
Preservation of 0 requires that 0 be defined in F\r
0\r
(A, X) as η(A,X)(0), which\r
has to be η(M,X)(0) by the previous paragraph. We therefore make this defi\u0002nition. Note that it is compatible with our general use of the notation ‘x’ for\r
η(M,X)(x).\r
It remains to investigate how + must be defined in order for η(A,X) to pre\u0002serve + and for the upper diagram to commute.\r
Uniqueness:\r
The requirement that + be preserved by η(A,X) means that there should be\r
no difference between η(A,X)(x) + η(A,X)(y) and η(A,X)(x + y). Thus, we may\r
safely use the notation ‘x + y’ for both.\r
We have to know how F\r
0 must act on arrows. Let ϕ be an arrow in C0\r
. How\r
F\r
0\r
(ϕ) acts on elements is given by how it acts after the forgetful functor T2 has\r
been applied. We have for x, y ∈ A that ((T2F\r
0\r
)(ϕ))(x/y) = ((FT1)(ϕ))(x/y) =\r
ϕ(x)/ϕ(y).\r
Consider N[x1, x2, x3, x4], the semiring of polynomials in {x1, x2, x3, x4}\r
with natural numbers as coefficients.9 Clearly, in F\r
0\r
(N[x1, x2, x3, x4], ∅), we\r
have\r
x1\r
x2\r
+\r
x3\r
x4\r
=\r
p(x1, x2, x3, x4)\r
q(x1, x2, x3, x4)\r
for some pair of polynomials (p, q) with natural numbers as coefficients. For\r
any (A, X) in C0 and any a1, a2, a3, a4 ∈ A, there is a unique morphism ϕ :\r
(N[x1, x2, x3, x4], ∅) → (A, X) with ϕ(xi) = ai, hence\r
a1\r
a2\r
+\r
a3\r
a4\r
=\r
ϕ(x1)\r
ϕ(x2)\r
+\r
ϕ(x3)\r
ϕ(x4)\r
= (F\r
0\r
(ϕ)) \u0012\r
x1\r
x2\r
+\r
x3\r
x4\r
\u0013\r
= (F\r
0\r
(ϕ)) \u0012\r
p(x1, x2, x3, x4)\r
q(x1, x2, x3, x4)\r
\u0013\r
=\r
ϕ(p(x1, x2, x3, x4))\r
ϕ(q(x1, x2, x3, x4))\r
=\r
p(a1, a2, a3, a4)\r
q(a1, a2, a3, a4)\r
.\r
9We use x1, x2, x3, x4 as formal symbols, distinguishing them from variables x1, x2, x3, x4.\r
20

So, addition has to be defined by p and q in F\r
0\r
(A, X), for any choice of (A, X).\r
The polynomials p and q are homogeneous of the same degree, since in F\r
0\r
(N, {2})\r
we must have (for x, y, z, w ∈ N)\r
p(2x, 2y, 2z, 2w)\r
q(2x, 2y, 2z, 2w)\r
=\r
2x\r
2y\r
+\r
2z\r
2w\r
=\r
2\r
2\r
·\r
x\r
y\r
+\r
2\r
2\r
·\r
z\r
w\r
= 1 ·\r
x\r
y\r
+ 1 ·\r
z\r
w\r
=\r
x\r
y\r
+\r
z\r
w\r
=\r
p(x, y, z, w)\r
q(x, y, z, w)\r
so that there exist n, m with\r
(2n, 2\r
n\r
)(p(2x, 2y, 2z, 2w), q(2x, 2y, 2z, 2w)) =\r
(2m, 2\r
m)(p(x, y, z, w), q(x, y, z, w)).\r
But then p and q must be homogeneous of degree m − n.\r
We now compute q. Since the η(A,X) are required to preserve +, we must\r
have\r
x\r
1\r
+\r
y\r
1\r
=\r
x + y\r
1\r
so that q(x, 1, z, 1) = 1. Hence q(x, y, z, w) = y\r
iwj\r
for some i, j with i + j =\r
m − n. Since 0 is required to be neutral for +, we must also have\r
x\r
y\r
+\r
0\r
1\r
=\r
x\r
y\r
,\r
0\r
1\r
+\r
z\r
w\r
=\r
z\r
w\r
,\r
hence q(x, y, 0, 1) = y and q(0, 1, z, w) = w. Hence i = j = 1 and we conclude\r
that q(x, y, z, w) = yw.\r
We now compute p, which has to be homogeneous of degree 2, as q is.\r
Preservation of + gives (see above) that p(x, 1, z, 1) = x+z, hence p(x, y, z, w) =\r
xykw\r
1−k+zy`w1−`\r
for some k, ` ∈ {0, 1}. That 0 is neutral gives p(x, y, 0, 1) = x\r
and p(0, 1, z, w) = z, hence k = 0 and ` = 1, so that p(x, y, z, w) = xw + yz.\r
Existence:\r
Let F\r
0\r
(A, X) be M∗\r
X (again with the notation / instead of ∗ and with ‘\r
x\r
y\r
’\r
sometimes denoting x/y) with 0 = [0, 1] and + defined as\r
x\r
y\r
+\r
z\r
w\r
=\r
xw + yz\r
yw\r
. (x, y, z, w ∈ A)\r
It is well-defined, since if x\r
0\r
, y\r
0\r
, z\r
0\r
, w\r
0 ∈ A and x0/y0 = x/y and z0/w0 = z/w,\r
then there are s1, s2, s3, s4 with (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and (s3, s3)(z, w)\r
= (s4, s4)(z\r
0\r
, w\r
0\r
), hence\r
x\r
0w0 + y0\r
z\r
0\r
y\r
0w0\r
=\r
s2s4\r
s2s4\r
·\r
x\r
0w0 + y0\r
z\r
0\r
y\r
0w0\r
=\r
s2x\r
0\r
s4w\r
0 + s2y0\r
s4z\r
0\r
s2y\r
0s4w0\r
=\r
s1xs3w + s1ys3z\r
s1ys3w\r
=\r
s1s3\r
s1s3\r
·\r
xw + yz\r
yw\r
=\r
xw + yz\r
yw\r
.\r
If ϕ : (A, XA) → (B, XB) is a C0-arrow, then let F\r
0\r
(ϕ) be x/y 7→ ϕ(x)/ϕ(y)\r
(for x, y ∈ A). Let us check that it is well-defined. Let SA be the multiplicative\r
monoid generated by XA and SB the one generated by XB. That ϕ is a C0-\r
arrow means that ϕ(XA) ⊂ XB, hence ϕ(s) ∈ SB for all s ∈ SA, so that every\r
21

ϕ(s) is /-invertible in F\r
0\r
(B, X). Suppose x/y = x\r
0/y0 with x0\r
, y\r
0 ∈ A. That\r
means that there are s, s\r
0 ∈ S such that (s, s)(x, y) = (s0\r
, s\r
0\r
)(x\r
0\r
, y\r
0\r
) and hence\r
ϕ(x\r
0\r
)\r
ϕ(y\r
0)\r
=\r
ϕ(s\r
0\r
)\r
ϕ(s\r
0)\r
·\r
ϕ(x\r
0\r
)\r
ϕ(y\r
0)\r
=\r
ϕ(s\r
0\r
)ϕ(x\r
0\r
)\r
ϕ(s\r
0)ϕ(y0)\r
=\r
ϕ(s\r
0x0\r
)\r
ϕ(s\r
0y0)\r
=\r
ϕ(sx)\r
ϕ(sy)\r
=\r
ϕ(s)ϕ(x)\r
ϕ(s)ϕ(y)\r
=\r
ϕ(s)\r
ϕ(s)\r
·\r
ϕ(x)\r
ϕ(y)\r
=\r
ϕ(x)\r
ϕ(y)\r
.\r
F\r
0\r
is now clearly a functor.\r
According to the proof of this theorem, the construction of wheels of frac\u0002tions, as given in section 1.2, is in a sense the most well-behaving one can\r
have as a solution to the problem of making division a total function. We used\r
the category WW as a tool for showing that, and we will not need this cate\u0002gory anymore, neither the functor F\r
0\r
, as defined in the proof above. Instead,\r
we use the full subcategory Wheel, with objects being the wheels (definition\r
1.1). We regard \f as a functor C0 → Wheel, given by (A, X) 7→ \fXA and\r
ϕ 7→ (x/y 7→ ϕ(x)/ϕ(y)) (it is easy to verify that wheels of fractions are indeed\r
wheels). The full subcategory of wheels of fractions will be denoted by WF.\r
Note that \fXA is defined for any commutative semiring A, not only for\r
rings as was the case in section 1.2.\r
Example 3.12. \f∅N is the initial object in Wheel.\r
Example 3.13. \fN\\{0}N is the wheel which is obtained from the semiring of\r
non-negative rational numbers by adjoining two extra elements 1/0 and 0/0.\r
The next proposition shows that the wheels of fractions are special among\r
the wheels and the theorem that follows states that these rules characterize\r
wheels of fractions completely up to isomorphism.\r
Proposition 3.14. Any wheel of fractions is a wheel (definition 1.1 on page 5)\r
and it holds in it that\r
1. ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0,\r
2. ∀x∀y∀x\r
0∀y0\r
: (x/y = x\r
0/y0 ∧0x = 0y = 0x0 = 0y0 = 0 ⇒ ∃z : x = zx0 ∧y =\r
zy\r
0 ∧ 0z = 0/z = 0).\r
Proof. That a wheel of fractions is a wheel is straight-forward to check.\r
To show ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0, use that every element x ∈ \fXA\r
is of the form y/z, where y, z ∈ A.\r
See theorem 4.16 for the proof of 2.\r
Theorem 3.15 (completeness for wheels of fractions). A wheel is iso\u0002morphic to a wheel of fractions if and only if it has the properties given in the\r
previous proposition.\r
Proof. See theorem 4.16.\r
Remark. We refer in the proofs to theorem 4.16 which is not\r
yet given. There is no risk for circular reasoning, since we will not\r
use these results for deriving others, just for constructions of some\r
examples.\r
We state them now because it is good to know a complete axioma\u0002tization in order to understand the class of structures under consid\u0002eration.\r
22

4 Wheels\r
Since the class of wheels is defined by a set of equations (it is an ‘equational\r
class’), it follows that substructures of wheels are wheels (‘subwheels’), that\r
homomorphic images of wheels are wheels, and that products of wheels are\r
wheels (for formal definitions, see some textbook in universal algebra, e.g. [BS81,\r
Gr¨a79]). It is also complete and cocomplete as a category (see [Bor94, p. 138]).\r
The corresponding is however not true for wheels of fractions: there are\r
such which have subwheels or quotients that are not isomorphic to any wheel\r
of fractions.\r
Example 4.1. Let A be the ring of functions Z × Z → Z, with the operations\r
defined point-wise. Let x be the element [π1, π2] of \f∅A, with π1(x, y) = x and\r
π2(x, y) = y. Let H be the subwheel generated by x, i.e., the elements of H\r
are those which are given by terms composed of (zero or more occurrences of)\r
x and the operations. We will show that ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0 fails\r
to hold in H. We do that by showing that for any y, z ∈ H with 0y = 0z = 0,\r
we have x 6= y/z.\r
Every element [f, g] of \f∅A defines a function Z×Z → Z×Z by [f, g](x, y) =\r
(f(x, y), g(x, y)). x defines the identity function. Note that\r
x(0, 0) = (0, 0)\r
(x + [f, g])(0, 0) = (0, 0)\r
(x · [f, g])(0, 0) = (0, 0)\r
(/x)(0, 0) = (0, 0)\r
so that the elements of H which are given by terms in which x occurs at least\r
once, define functions which takes the value (0, 0) in at least one point.\r
Suppose 0y = 0z = 0 and y, z ∈ H. Take f, g such that y = [f, g]. Then\r
0y = [0, g] = [0, 1], but then g = 1 and hence y = [f, 1], so that y defines a\r
function that does not take (0, 0) as value. Hence y is described by a term\r
which does not contain x. The same argument applies to z. But then y/z is\r
described by a term which does not contain x, so that y/z defines a constant\r
function. Then x 6= y/z, since the function defined by x is not constant.\r
Hence H is not isomorphic to any wheel of fractions.\r
Example 4.2. Let H = \f{1,3}(Z/4Z) and define the congruence relation\r
x ≡ y means x = y ∨ x, y ∈ {0/0, 0/2, 2/0, 2/2}.\r
Then the rule ∀x, y, x\r
0\r
, y\r
0\r
: (x/y = x\r
0/y0 ∧ 0x = 0y = 0x0 = 0y0 = 0 ⇒ ∃z : x =\r
zx\r
0 ∧ y = zy0 ∧ 0z = 0/z = 0) fails in H/ ≡, since 0/0 = 2/2, but 2 6= z0 for\r
every z.\r
Hence H/ ≡ is not isomorphic to any wheel of fractions.\r
Hence, the class of wheels isomorphic to wheels of fractions is not axiomatiz\u0002able by equations. It is therefore not an accident that we needed non-equational\r
rules to characterize (up to isomorphism) the wheels of fractions among the\r
wheels.\r
It is not satisfactory to work in a class that is not closed under such opera\u0002tions, sooner or later one is lead to consider constructions like those given above.\r
23

Also, it is not satisfactory to succeed in making division total, but introducing\r
partiality of important class operations.\r
That is the reason why we choose to study wheels, instead of wheels of\r
fractions only.\r
10\r
4.1 Basic properties\r
We devote some pages to an abstract study of wheels (definition 1.1, p. 5).\r
Wheels of fractions are studied more in section 4.2.\r
Remember that the distributivity rule (3) for wheels looks different from the\r
one for rings (or semirings). However, when 0z = 0, it gives that (x + y)z =\r
xz + yz. We emphasize this fact now once and for all, in the following we will\r
apply it freely in computing things like 0(x + y) = 0x + 0y.\r
Proposition 4.3 (derived rules). The following rules hold in wheels:\r
/1 = 1 (9)\r
0x + 0y = 0xy (10)\r
(0/0)x = 0/0 (11)\r
x/x = 1 + 0x/x (12)\r
xz = yz ⇒ x + 0z/z = y + 0z/z. (13)\r
Proof. (9) Since / is an involution. To repeat the argument: /1 = 1/1 =\r
//1/1 = /(/1 · 1) = //1 = 1.\r
(10) 0x + 0y\r
(6)\r
= (0 + 0y)x = 0xy.\r
(11) (0/0)x = 0x/0\r
(10)\r
= 0x + 0/0\r
(8)\r
= 0/0.\r
(12) x/x = (0 + x · 1)/x (4)= 0/x + 1 + 0x\r
(10)\r
= 1 + 0x/x.\r
(13) One should really learn to do without implicational rules like this, but we\r
state it since it is characteristic for computations in wheel algebra.\r
xz = yz\r
xz/z = yz/z\r
x(1 + 0z/z) = y(1 + 0z/z) by (12)\r
x + 0z/z = y + 0z/z. by (6)\r
Note that by (8) and (11), a term is equal to ‘0/0’ if it contains ‘0/0’ as a\r
subterm.\r
A notion of negation can sometimes be introduced. If H is a wheel and\r
a ∈ H with 0a = 0 and a\r
2 = 1, then − : x 7→ ax is an additive involution since\r
a(x + y) = (x + y)a + 0a = xa + ya = ay + ax and aax = 1x = x. There are at\r
least three natural ways in which such an a can appear.\r
1. a = 1. This gives the identity (thus not an interesting involution to use).\r
10See section 4.3 for further comments on the choice of axioms\r
24

2. If H = \fXA with A a semiring−. Then a = −1 gives an involution which\r
extends the − of A. If A is a ring, then this case coincides with the next.\r
3. If a is a solution to the equation 1+x = 0, then 0a = 1·0+a·0 = (1+a)0 =\r
0·0 = 0 and a\r
2 = 1+a+a2 = 1+(1+a)a+0a = 1+0a+0a = 1+0+0 = 1.\r
With this choice of a, we have the nice formula\r
x − x = 0x\r
2\r
,\r
since x − x = 1x + ax = (1 + a)x + 0x = 0x + 0x = 0x\r
2\r
.\r
The wheel of fractions \f∅(Z/2Z) is the (up to isomorphism unique) smallest\r
non-trivial wheel, since it contains only four elements:\r
Proposition 4.4. If any two of the elements 0, 1, /0 and 0/0 are equal in a\r
wheel H, then H is trivial.\r
Proof. There are six cases to go through.\r
0 = 1 Then 1 = 1/1 = 0/0. See below for the rest.\r
0 = /0 Then 0 = 0 · 0 = 0/0. See below.\r
0 = 0/0 Then x = 0 + x = 0/0 + x = 0/0.\r
1 = /0 Then 1 = 1/1 = /0//0 = 0/0. See below.\r
1 = 0/0 Then x = 1x = (0/0)x = 0/0.\r
/0 = 0/0 Then x = 0 + x = //0 + x = /(0/0) + x = 0/0 + x = 0/0.\r
The two notions of reciprocal and multiplicative inverse are connected by\r
the operations 0, + as follows.\r
Proposition 4.5. Let x be a unit.\r
1. x\r
−1 + 0/x = /x + 0x−1\r
.\r
2. x\r
−1 = /x + 0\r
x\r
−1\r
x−1 .\r
3. /x = x\r
−1 + 0\r
x\r
x\r
.\r
Proof. 1. x\r
−1 + 0/x = x−1/(xx−1\r
) + 0/x = /x + 0x\r
−1/(xx−1\r
) = /x + 0x\r
−1\r
.\r
2. Add 0/(x\r
−1\r
) to each side of 1.\r
3. Add 0x to each side of 1.\r
Note also that if xy is /-invertible, then x and y are units with x\r
−1 =\r
y/(xy) = /x + 0y/y and y\r
−1 = x/(xy) = /y + 0x/x.\r
We may construct a right adjoint to the functor \f in the following steps.\r
Definition 4.6. Let H be a wheel. Then define the following subsets:\r
RH = {x | 0x = 0},\r
SH = {x | 0x = 0/x = 0}.\r
25

Proposition 4.7. RH is a semiring under the operations 0, 1, + and ·. SH\r
is a multiplicative group in RH.\r
Proof. Suppose that x, y ∈ RH. Then\r
1. 0(x + y) = 0(x + y) + 0 · 0 = 0x + 0y = 0 + 0 = 0,\r
2. 0(xy) = (0x)y = 0y = 0.\r
Thus RH is closed under addition and multiplication. 0 ∈ RH by (5) and\r
1 ∈ RH since 1 is the identity in the multiplicative monoid.\r
That SH is closed under multiplication follows from the fact that if x, y ∈\r
SH, then 0/(xy) = (0/y)/x = 0/x = 0. We have 1 ∈ SH by (9). Given\r
an element x ∈ SH, then /x ∈ SH (since / is an involution) and it is the\r
multiplicative inverse of x by the computation x/x = 1+0x/x = 1+0/x = 1.\r
We will use the notation RH also for the semiring it becomes when the\r
operations 0, 1, +, · are induced by H. It will be called ‘the semiring of H’ or\r
simply ‘the semiring’ when the context is clear. It is the largest semiring in H\r
since 0x = 0 holds in any semiring.\r
Remarks. We showed that every element of SH is /-invertible. On\r
the other hand, SH contains every /-unit that is inside the subset\r
RH, since if x is /-invertible and 0x = 0, then 0/x = 0x/x = 0·1 = 0.\r
An element of RH is a unit in RH iff it is a unit in H. To see\r
this, note that if x ∈ RH and xy = 1, then also y ∈ RH, since\r
0y = 0xy = 0 · 1 = 0.\r
The question whether x ∈ H is a unit or not is partially answered\r
by the information whether or not x ∈ RH and/or /x ∈ RH:\r
x ∈ RH? /x ∈ RH? x unit? x /-unit?\r
No No ⇒ Maybe Maybe\r
Yes No ⇒ Maybe No\r
No Yes ⇒ Maybe No\r
Yes Yes ⇒ Yes Yes\r
Let us consider η(A,X): x 7→ [x, 0] as a C0-arrow (A, X) → (R\fXA, S\fXA),\r
which we may do since, if x ∈ X, then 0/η(A,X)(x) = [0, 1]/[x, 1] = [0, x] =\r
[0, 1] = 0, so that η(A,X)(X) ⊂ S\fXA.\r
Let (R, S) be the functor Wheel → C0 given by (R, S)(H) = (RH, SH)\r
and (R, S)(ϕ) being the restriction of ϕ to RH. This works since if 0x = 0,\r
then 0ϕ(x) = ϕ(0)ϕ(x) = ϕ(0x) = ϕ(0) = 0 (thus ϕ actually maps the semiring\r
of the domain into the semiring of the codomain), and if in addition 0/x = 0,\r
then 0/ϕ(x) = ϕ(0)/ϕ(x) = ϕ(0/x) = ϕ(0) = 0 (thus (R, S)(ϕ) behaves as it\r
should with respect to S).\r
Theorem 4.8. The functor \f : C0 → Wheel is left adjoint to (R, S) :\r
Wheel → C0 with unit η and counit \u000F, given by \u000FH : [x, y] 7→ x/y.\r
Proof. \u000FH is well-defined since if [x, y] = [x\r
0\r
, y\r
0\r
], then there exist s1, s2 ∈ SH\r
such that (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and hence x/y = (x/y)(1 + 0s1/s1) =\r
26

(s1x)/(s1y) = (s2x\r
0\r
)/(s2y\r
0\r
) = (x\r
0/y0\r
)(1 + 0s2/s2) = x\r
0/y0\r
. It is easily seen that\r
\u000F is a natural transformation.\r
By basic category theory, the result follows if we show that for any C-object\r
(A, X) and any wheel H, we have\r
11\r
(\u000F\f)(A,X)(\fη)(A,X) = Id\fX A\r
and\r
((R, S)\u000F)H (η(R, S))H = Id(RH,SH).\r
(\u000F\f)(A,X): \fS\fX AR\fXA → \fXA by [[x, y], [z, w]] 7→ [xw, yz]\r
(\fη)(A,X): \fX A → \fS\fX AR\fXA by [x, y] 7→ [[x, 1], [y, 1]]\r
((R, S)\u000F)H : (R\fSHRH, S\fSHRH) → (RH, SH) by [x, y] 7→ x/y\r
(η(R, S))H : (RH, SH) → (R\fSHRH, S\fSHRH) by x 7→ [x, 1]\r
Then\r
(\u000F\f)(A,X)(\fη)(A,X)([x, y]) = (\u000F\f)(A,X)([[x, 1], [y, 1]]) = [x · 1, y · 1] = [x, y]\r
and\r
((R, S)\u000F)H (η(R, S))H (x) = ((R, S)\u000F)H ([x, 1]) = x/1 = x.\r
4.2 Applications to wheels of fractions\r
4.2.1 The semiring in a wheel of fractions\r
The following fact will be used freely without reference to the proposition.\r
Proposition 4.9. If x ∈ A, then 0/x = 0 in \fXA if and only if x ∈ S˜, which\r
is the divisional closure of S, which is the multiplicative monoid generated by\r
X.\r
Proof. Proposition 2.15 gives us that x/x = 1 is equivalent to x ∈ S˜. We need\r
to prove x/x = 1 ⇐⇒ 0/x = 0 under the condition 0x = 0.\r
Suppose x/x = 1. Then 0/x = 0x/x = 0 · 1 = 0.\r
Suppose 0/x = 0. Then x/x = 1 + 0x/x = 1.\r
The elements of R\fXA are of a very special form:\r
Lemma 4.10. x ∈ R\fXA iff x = r/s for some r ∈ A, s ∈ S, with S the\r
multiplicative monoid generated by X.\r
Proof. If x = r/s, then 0x = 0r/s = 0/s = 0. On the other hand, suppose that\r
0x = 0, say with x = y/z (y, z ∈ A). Then 0/z = 0x = 0, so that z ∈ S˜, say\r
s\r
0\r
z ∈ S. With r = s\r
0y, s = s0\r
z, we get r/s = (s\r
0y)/(s0\r
z) = (s\r
0/s0\r
)(y/z) = x.\r
In commutative algebra and algebraic geometry, one often uses the ring of\r
fractions S\r
−1A, where S is a multiplicative submonoid of a commutative ring\r
A (often the complement of a prime ideal). One defines S\r
−1A as the monoid\r
AS together with 0 = [0, 1] and [x, s] + [x\r
0\r
, s\r
0\r
] = [xs0 + x\r
0\r
s, ss0]. As is seen, this\r
construction is similar to ours. In fact, we have factorized it in two parts: as \f\r
followed by R.\r
11The naturalness must also be checked, but our constructions are obviously natural.\r
27

Theorem 4.11. If A is a commutative ring with identity and S a multiplicative\r
submonoid, then S\r
−1A ∼= R\fSA by the isomorphism r/s 7→ r/s.\r
Proof. The mapping ηˆ(A,S): AS → R\fSA, r/s 7→ r/s is an injective morphism\r
of the multiplicative monoids by theorem 2.10. It is easy to see that it preserves\r
0 and + too. It is surjective by the previous lemma and thus a bijection. S\r
−1A\r
is a ring so ηˆ(A,S)is an isomorphism of rings.\r
Any wheel of fractions is (according to proposition 2.14) of the form \fSA\r
with S being closed under division. For that presentation, we have a stronger\r
version of the previous theorem.\r
Theorem 4.12. S\r
−1A and R\fSA are identical iff S is closed under division.\r
Proof. Take [x, y] ∈ R\fSA. Then 0/y = 0x/y = 0, so that y ∈ S˜. If S is closed\r
under division, we get y ∈ S, so that (x, y) ∈ A × S. Hence R\fSA = S\r
−1A in\r
that case.\r
Suppose instead that R\fSA and S\r
−1A are identical as sets. Take x ∈ S˜;\r
we shall prove x ∈ S. We have (x, x) ∈ [x, x] = x/x but since x/x ∈ R\fSA\r
by the previous lemma, we get that (x, x) ∈ A × S when R\fSA and S\r
−1A are\r
identical as sets.\r
We summarize the results above in the following corollary. It states one\r
isomorphism and two identities:\r
Corollary 4.13. Let A be a semiring, S a multiplicative monoid in it, S˜ its\r
divisional closure. Then S\r
−1A ∼= R\fSA = R\fS˜A = S˜−1A.\r
Proof. By theorem 4.11, S\r
−1A ∼= R\fSA. By theorem 2.14, R\fSA = R\fS˜A\r
and by theorem 4.12, R\fS˜A = S˜−1A.\r
4.2.2 Obtaining /-invertible wheels of fractions\r
In the choice between S\r
−1A and \fSA in practical computing when A is a\r
ring, it may seem to be a drawback of the latter that one has to distinguish\r
between reciprocals and multiplicative inverses. One should then remember that\r
S\r
−1A and R\fSA are isomorphic as rings and that the multiplicative inversion\r
therefore is the same in both structures. The difficulty appears first at the\r
moment when we start using the involution /. Hence, there is no real drawback,\r
since one can stick to multiplicative inversion when that is more comfortable.\r
But that does not explain why we introduced the operation /. If finding\r
inverses is what we want it for, then we would like to have no difference between\r
reciprocals and inverses, i.e., we would like to have a /-invertible wheel, so that\r
x\r
−1 = /x whenever x−1\r
is defined. By proposition 2.19, we obtain that if\r
and only if S˜ is saturated as a submonoid of the multiplicative monoid of A.\r
The question is therefore if a given S can be replaced by one having saturated\r
divisional closure.\r
Definition 4.14 (saturated closure). The saturated closure S¯ of a sub\u0002monoid S of a commutative monoid M is the set {x ∈ M | ∃y ∈ M : xy ∈ S}\r
(it is the smallest saturated submonoid of M that contains S).\r
28

Since S\r
˜¯ = S¯, S¯ is a submonoid with saturated divisional closure. In the\r
following, S¯ will denote the saturated closure of S in the multiplicative monoid\r
of A.\r
There is a well-known natural isomorphism S\r
−1A ∼= S¯−1A given by r/s 7→\r
r/s. Theorem 4.12 shows that S¯−1A = R\fS¯A, so that the isomorphism is\r
in fact S\r
−1A → R\fS¯A. Since \fS¯A is /-invertible, it is in a sense a better\r
extension of S\r
−1A than \fSA is.12\r
It is well-known that any ring A may be extended to its ‘total ring of frac\u0002tions’ S\r
−1\r
0 A, so that every multiplicatively cancelable element in A becomes a\r
unit. However, when doing that, some structure of A can be lost. For instance,\r
in extending Z to Q, one looses all non-trivial proper ideals. Hence, there is\r
a reason for not always extending rings as much as one can. The construction\r
of wheels of fractions have the advantage that it need not destroy any struc\u0002ture. The following corollary shows that a semiring can always be extended to\r
a /-invertible wheel in such a way that it can be retrieved using the R operator.\r
Corollary 4.15. Let U be the set of units in a semiring A. Then \fU A is\r
/-invertible and it extends A in the sense that\r
1. R\fU A is isomorphic to A,\r
2. the operations 0, 1, +, · of A are extended to corresponding operations of\r
\fU A,\r
3. if A is a semiring−, then the involution − of A is extended to an involution\r
− of \fU A.\r
4. the restriction of / to A is the partial function ·\r
−1\r
.\r
Proof. This is just a restatement of 2.20 and 2.21, together with information on\r
how + and − are defined (see page 24 for the latter).\r
4.2.3 Axiomatizing the class of wheels of fractions\r
We now restate and prove the completeness theorem for the axioms of wheels\r
of fractions. The symbols R and S simplify the notation compared to that used\r
in proposition 3.14.\r
Theorem 4.16. A wheel H is isomorphic to some wheel of fractions if and only\r
if it has the following properties:\r
∀x∃y, z ∈ RH : x = y/z (14)\r
∀x, y, x\r
0\r
, y\r
0 ∈ RH : (x/y = x0\r
/y0 ⇒ ∃s ∈ SH : x = sx0 ∧ y = sy0) (15)\r
Proof. (14) holds in any \fXA since every x is of the form y/z for some y, z ∈ A\r
so we have x = y/z for the corresponding elements in R\fXA.\r
To show that (15) holds in \fXA, suppose that x/y = x\r
0/y0∧0x = 0y = 0x0 =\r
0y\r
0 = 0. By lemma 4.10, we may assume that x = a/s1, y = b/s2, x0 = c/s3,\r
12It is true that R\fSA and R\fS¯A are isomorphic as rings by the mapping r/s 7→ r/s, but\r
not in general that / is preserved under this isomorphism. Consider e.g. R\f{1,2,3,...}\r
and\r
R\f{±1,±2,±3,...}. They are isomorphic as rings, but /(−1) = −1 is true only in the latter.\r
(−1)−1 = −1 is of course true whenever − is obtained in one of the ways mentioned on page\r
24.\r
29

y\r
0 = d/s4 with a, b, c, d ∈ A. Then (s2/s1)a/b = x/y = x0/y0 = (s4/s3)(c/d), so\r
there exist s\r
0\r
, s\r
00 such that\r
(s\r
0\r
, s\r
0\r
)(s2, s1)(a, b) = (s\r
00\r
, s\r
00)(s4, s3)(c, d).\r
Taking\r
s =\r
s3s4s\r
00\r
s1s2s\r
0\r
(which is in SH), we get\r
sx0 =\r
s3s4s\r
00\r
s1s2s\r
0\r
·\r
c\r
s3\r
=\r
s3s4s\r
00c\r
s1s2s3s\r
0\r
=\r
s3s2s\r
0a\r
s1s2s3s\r
0\r
=\r
a\r
s1\r
= x.\r
and\r
sy0 =\r
s3s4s\r
00\r
s1s2s\r
0\r
·\r
d\r
s4\r
=\r
s3s4s\r
00d\r
s1s2s4s\r
0\r
=\r
s1s4s\r
0\r
b\r
s1s2s4s\r
0\r
=\r
b\r
s2\r
= y.\r
On the other hand, suppose that (14) and (15) are true in a wheel H. Then\r
\u000FH (defined in theorem 4.8) is surjective by (14) and injective by (15). Hence it\r
is an isomorphism \fSHRH → H.\r
4.2.4 Cancellation of zero-terms\r
In computing with (semi-)rings, one does not only use equational rules, but\r
additional information, for instance, that a certain element a is ‘multiplicatively\r
cancellable’ (·-cancellable): ax = ay ⇒ x = y.\r
We have seen that any semiring can be viewed as a part of a wheel; tech\u0002nically, that any semiring A is embedded in \fU A (where U is the set of units\r
of A) and that an isomorphic copy of A can be recovered from \fU A by the\r
operator R. It is important that we can transfer information about cancellation\r
to the wheel.\r
Consider the equation ax = ay in a semiring A. The information ‘a is ·-\r
cancellable’ lets us conclude that x = y. When A is considered as embedded in a\r
wheel, it is instead natural to reason as follows (without any use of cancellation):\r
ax = ay\r
ax/a = ay/a\r
x + 0a/a = y + 0a/a\r
x + 0/a = y + 0/a.\r
The question of cancellation now comes in since we need to know whether\r
0/a is additively cancellable (+-cancellable). In this way, the problem of ·-\r
cancellation is reduced to a problem of +-cancellation. One might however\r
suspect that there could be situations in which a is ·-cancellable in A, but 0/a\r
is not +-cancellable in \fXA. Fortunately, there are no such cases, according to\r
the following proposition.\r
Proposition 4.17. If a is ·-cancellable in A, then 0/a is +-cancellable in \fX A.\r
Proof. Suppose that a is ·-cancellable in A. Suppose also that [x, y] + 0/a =\r
[x\r
0\r
, y\r
0\r
] + 0/a, that is, that [ax, ay] = [ax0, ay0]. Then there are s, s\r
0\r
such that\r
sax = s\r
0ax0 and say = s0ay0 but since a is ·-cancellable, we conclude that\r
sx = s\r
0x and sy = s0y0\r
, hence [x, y] = [x\r
0\r
, y\r
0\r
].\r
30

Suppose now that if a 6= 0 in A, then a is ·-cancellable, i.e., that S0 = A\\{0}.\r
We say (following [Gol99]) that such a semiring is multiplicatively cancellative.\r
13\r
This is a maximality property, since if a = 0, then a cannot be ·-cancellable\r
unless the semiring is trivial. A corresponding maximality property for wheels\r
is 0x 6= x ⇒ (0/x is +-cancellable), since if 0x = x, then 0/x can’t be +-\r
cancellable unless the wheel is trivial (y + 0/x = z + 0/x holds for any y and\r
z if 0x = x, since then y + 0/x = y + 0/(0x) = 0/0 = z + 0/(0x) = z + 0/x).\r
These properties are connected as follows.\r
Proposition 4.18. 1. If A is multiplicatively cancellative, then 0x 6= x ⇒\r
(0/x is +-cancellable) holds in \fXA.\r
2. If 0x 6= x ⇒ (0/x is +-cancellable) holds in H, then RH is multiplicatively\r
cancellative.\r
Proof. 1. We shall prove that 0/x is +-cancellable whenever 0x 6= x. Let\r
x = [x\r
0\r
, x\r
00] and assume 0x 6= x. Suppose that x0 = 0. Then x = [0, x00] =\r
[0, 1][0, x\r
00] = 0x, which is refuted, hence x0 6= 0. If A is multiplicatively\r
cancellative, then x\r
0\r
is ·-cancellable. Hence 0/x0is +-cancellable, but\r
0/x = 0/x0 and we are done.\r
2. Take x ∈ RH with x 6= 0. Then 0x = 0 6= x, so that 0/x is +-cancellable.\r
We may then compute as follows:\r
xy = xz\r
xy/x = xz/x\r
y + 0x/x = z + 0x/x\r
y + 0/x = z + 0/x\r
y = z.\r
Note that we did not need to assume that y, z ∈ RH.\r
Example 4.19. Solve the equation 3x = 12.\r
We have x + 0/3 = 3x/3 = 12/3 = 3 · 4/3 = 4 + 0/3. That gives x =\r
4 whenever 0/3 is +-cancellable, which happens for instance if the wheel in\r
question is \fXZ, for any subset X ⊂ Z, since 3 is ·-cancellable in Z. In general\r
we may not conclude more than x + 0/3 = 4 + 0/3, which is sound since the\r
equation does not have a unique solution in general.\r
Ring algebra does not allow us to derive anything from 3x = 12 when 3\r
is not ·-cancellable (e.g. when the equation have several solutions), but wheel\r
algebra always lets us develop to x+0/3 = 4+0/3, which can be used in further\r
calculations: if x and 0/3 appear in the left hand side of an equation, then we\r
may use the axioms for zero-terms to move 0/3 close to x, then replacing x+0/3\r
by 4+0/3 and finally move the term 0/3 out using the rules for zero-terms again.\r
If x appears, but not 0/3, then we may add 0/3 to both sides of the equation,\r
hence introducing 0/3 but eliminating an occurrence of x. Note that when such\r
an introduction has been made, then one can use the introduced term over and\r
13The term ‘integral’ is unfortunately already used in another sense in the context of semi\u0002rings [Gol99]. E.g. \r
/6is integral as a semiring in this sense.\r
31

over again, until all occurrences of x are eliminated. One may view these 0/3-\r
terms as flags indicating that the result is worthless if e.g. 0 = 3, since then the\r
rule ‘x + 0/0 = 0/0’ can be used for reducing the equation to 0/0 = 0/0.\r
Say that we want to compute the value of x\r
2 + x, given that 3x = 12. We\r
can’t give a definite answer, since the value is not uniquely determined unless we\r
specify which semiring we think of. What we can do is to compute x\r
2 +x+0/3:\r
x\r
2 + x + 0/3 = x2 + 4 + 0/3 = x(x + 0/3) + 4 = x(4 + 0/3) + 4\r
= (x + 0/3)4 + 4 = (4 + 0/3)4 + 4 = 4 · 4 + 4 + 0/3\r
= 20 + 0/3.\r
If we get information at a later stage, letting us conclude that 0/3 is +-\r
cancellable, then we can get something explicit for x\r
2 +x. This might happen if\r
we get more knowledge about the semiring we started with, but also if we pass\r
to a quotient of that semiring. For instance, suppose that we conclude that we\r
need the value modulo 16. We then pass to a quotient defined by 0 = 16. In\r
such a quotient, 3 is a unit, and hence 0/3 is +-cancellable.14 We conclude that\r
x\r
2 + x = 20 = 4 (mod 16).\r
We may view the wheel alternative as computing modulo everything at the\r
same time.\r
4.3 Equational logic for wheels of fractions\r
One may ask if our definition of ‘wheel’ is ‘the right one’. Are the axioms chosen\r
ad hoc, or do they axiomatize a class of structures that is in some sense naturally\r
delimited?\r
There is some evidence that we can’t improve the definition:\r
1. The wheels of fractions are wheels according to our definition.\r
2. The axioms are a set of equations. That is by Birkhoff’s theorem [Bir35]\r
necessary for the axiomatized class to be closed under substructures, quo\u0002tients, products and isomorphisms. Further, by ‘compactness for equa\u0002tional logic’, if it is finitely axiomatizable in first order predicate logic,\r
then it is finitely axiomatizable by equations. Hence, there is no need to\r
consider other candidates than equations as axioms.\r
3. The axioms are finitely many.\r
4. We have empirical experience that the axioms are precisely what we need\r
to make natural computations.\r
On the other hand, there is some counterevidence too: There are identities,\r
like (x + 1)2 = x(x + 2) + 1, that hold in any wheel of fractions but does not\r
seem to be provable from our axioms. But (x + 1)2 = x(x + 2) + 1 is not a\r
very natural identity and may be thought of as valid in wheels of fractions ‘by\r
accident’: that it just ‘happens to be’ and that there is nothing conceptual that\r
suggests that it should be valid in all wheels.15\r
14If x is a unit, then 0x and 0/x are +-cancellable since 0x + 0x−1 = 0xx−1 = 0 and\r
0/x + 0/(x−1) = 0/(xx−1) = 0 in that case.\r
15However, by completeness, (14) (see theorem 4.16) suffices (together with wheel axioms)\r
for derivation of any identity that is valid in all wheels of fractions, since every wheel which\r
has this property is a homomorphic image of a wheel of fractions. This is because \u000FH (defined\r
in theorem 4.8) is surjective by (14).\r
32

Anyway, one might wish to include more axioms for wheels, perhaps those\r
needed to prove every identity that is valid in the class WF of wheels of fractions.\r
By Birkhoff’s theorem, we should have equational axioms only, so that the class\r
axiomatized is still closed under products, substructures and quotients. This\r
amounts to axiomatizing the class V (WF), called ‘the variety generated by\r
WF’, consisting of structures that can be obtained in finitely many steps from\r
wheels of fractions, taking products, substructures, quotients and isomorphic\r
copies.16\r
We will study the class V (WF), but also simultaneously the following. A\r
wheel with negation is a wheel with an additional constant −1 such that 1 +\r
(−1) = 0. By the discussion on page 24, such a constant determines an additive\r
involution by −x = (−1)x and it holds that x − x = 0x\r
2\r
, hence the semiring in\r
such a wheel is in fact a ring. A wheel of fractions with negation is obtained\r
for instance when the semiring used in the construction is a ring. We denote by\r
Wheelneg the class of wheels with negation and by WFneg the class of wheels\r
of fractions with negation. A morphism of wheels with negation should preserve\r
−1, but that is automatically satisfied by any morphism of wheels: suppose H\r
and H0 are wheels with negation and ϕ : H → H0 a wheel morphism. Then it\r
holds in H0that ϕ(−1) = 1+(−1)+ϕ(−1) = −1+ϕ(1+(−1)) = −1+ϕ(0) = −1.\r
We will emphasize on the classes Wheel, WF and V (WF) in the following,\r
but the treatment of Wheelneg, WFneg and V (WFneg) is precisely analo\u0002gous, just replace N by Z, N[x1, . . . , xn] by Z[x1, . . . , xn], \f∅N by \f∅Z, “wheel\r
axioms” by “wheel axioms and ‘1+(−1) = 0’ ”, “semirings” by “rings with iden\u0002tity”, and so on. One has to check some details of negation in the proofs, but\r
that is straight-forward and omitted for the purpose of readability (we include\r
a remark at a crucial point).\r
Definition 4.20. A term p(x1, . . . , xn) is a polynomial term if it contains no\r
occurrence of /. We say that such terms are equivalent if they can be proved\r
to be equal using the axioms for commutative semirings. This is an equivalence\r
relation and its equivalence classes are called polynomials.\r
Example 4.21. The polynomial terms ‘(x + 1)(x + 1)’ and ‘(xx) + ((2x) + 1)’\r
are not identical, but equivalent. Hence they define the same polynomial.\r
When wheels with negation are treated, polynomial terms are equivalent if\r
they can be proved to be equal using axioms for commutative rings with identity.\r
Theorem 4.22. The following are equivalent for a wheel H.\r
1. H ∈ V (WF).\r
2. H ∈ V ({\f∅N}).\r
3. Any identity which is valid in all wheels of fractions is valid in H too.\r
4. Any identity which is valid in \f∅N is valid in H too.\r
5. H is isomorphic to a quotient of a subwheel of a power of \f∅N.\r
6. H is isomorphic to a quotient of a subwheel of \f∅(N\r
I\r
), where N\r
I\r
is the\r
semiring of functions I → N, for some set I.\r
16See some textbook in universal algebra, e.g. [BS81, Gr¨a79].\r
33

Proof. We first prove 1 ⇐⇒ 2 ⇐⇒ 3 ⇐⇒ 4 by showing 1 ⇒ 3 ⇒ 4 ⇒ 2 ⇒ 1.\r
The step 4 ⇒ 2 follows from Birkhoff’s theorem and the other steps are obvious,\r
except for 3 ⇒ 4 which needs a proof.\r
Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is valid in \f∅N. We shall prove that it\r
is valid in all wheels of fractions. Substitute [x\r
0\r
i\r
, x\r
00\r
i\r
] for every xiin the identity\r
and compute the values of each side. The result is [p(x1, . . . , xn), q(x1, . . . , xn)]\r
= [p\r
0\r
(x1, . . . , xn), q\r
0\r
(x1, . . . , xn)] for polynomials p, p\r
0\r
, q, q\r
0 with coefficients from\r
N. That t(x1, . . . , xn) = s(x1, . . . , xn) is valid in \f∅N means that (p(x1, . . . , xn),\r
q(x1, . . . , xn)) and (p\r
0\r
(x1, . . . , xn), q\r
0\r
(x1, . . . , xn)) takes the same values if we\r
substitute natural numbers for the variables. But then p = p\r
0 and q = q0 as\r
polynomials, so that the identity is valid in any wheel of fractions.\r
A theorem by Tarski gives 2 ⇒ 5 (see e.g. [BS81]) and 5 ⇒ 2 is obvious.\r
To establish 5 ⇐⇒ 6, we need to show (\f∅N)\r
I ∼= \f∅(NI\r
). We get this\r
from the identity (N × N)\r
I ∼= NI × NI\r
for the multiplicative monoid of N. It is\r
obvious that this isomorphism preserves also 0 and +.\r
One says that \f∅N is generic for V (WF), because of the equivalence 1 ⇐⇒\r
4. It is moreover the WF-free wheel over ∅. In general, if K is a class of wheels,\r
then the K-free wheel over a set X is the (up to isomorphism unique) wheel\r
FK(X) with the property that for any function X → H, where H ∈ K, there\r
is a morphism FK(X) → H that extends it. It is easily seen from Birkhoff’s\r
construction that FK(X) = FV (K)(X) and in our case we have V (WF) =\r
V ({\f∅N}), so that FWF(X) = F{\f∅N}(X) and the latter is (again by Birkhoff’s\r
construction) a subwheel of some wheel of the form (\f∅N)\r
I — which, as we\r
proved in the theorem, is isomorphic to \f∅(N\r
I\r
). One may consider it as the\r
wheel of wheel-terms with identification made when two terms yield identical\r
values in \f∅N. Hence an equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid in WF\r
if and only if t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
Remark. Note how we use the terms ‘valid’ and ‘true’. We only\r
apply ‘true’ to a closed formula (which in our case means a formula\r
in which no variable occur, since we consider quantifier-free formu\u0002las only). An open formula is valid if it becomes true after any\r
substitution with elements from any of the structures considered.\r
The corresponding theorem for wheels with negation reads as follows.\r
Theorem 4.23. The following are equivalent for a wheel H with negation (\f∅Z\r
is here considered as a wheel with negation, that means for instance that \f∅N\r
is not considered to be a substructure of it).\r
1. H ∈ V (WFneg).\r
2. H ∈ V ({\f∅Z}).\r
3. Any identity which is valid in all wheels of fractions with negation is valid\r
in H too.\r
4. Any identity which is valid in \f∅Z is valid in H too.\r
5. H is isomorphic to a quotient of a subwheel of a power of \f∅Z.\r
6. H is isomorphic to a quotient of a subwheel of \f∅(Z\r
I\r
), where Z\r
I\r
is the\r
ring of functions I → Z, for some set I.\r
34

Proof. As the previous proof.\r
Since validity in WF is equivalent to truth in FWF({x1, . . . , xn}), we get a\r
completeness result for WF if we give a complete method for deriving formu\u0002las which are true in FWF({x1, . . . , xn}). In this section, we will study such\r
derivations, and similar ones.\r
We work in a language which is obtained from the language of wheels by\r
adjoining constant symbols x1, . . . , xn (and when wheels with negation are con\u0002sidered, the language has an additional constant symbol ‘−1’). In the following,\r
xi will denote\r
1. a constant symbol in the language,\r
2. an element of FK({x1, . . . , xn}) for several choices of K,\r
3. an element of N[x1, . . . , xn],\r
4. an element of \f∅(N[x1, . . . , xn]),\r
so the reader should be careful to observe which is the case for every occurrence.\r
As a consequence, when t is a term, t(x1, . . . , xn) can be interpreted as a closed\r
term in the language or as an element of FK({x1, . . . , xn}) for several choices\r
of K, or as an element of \f∅(N[x1, . . . , xn]).\r
When we say things like “t(x1, . . . , xn) = s(x1, . . . , xn) can be proved using\r
the wheel axioms together with an axiom ‘0xi = 0’ for each i”, we mean that\r
there is a formal derivation of the formula t(x1, . . . , xn) = s(x1, . . . , xn) in the\r
system of equational logic with the axioms indicated (here, ‘axioms’ should be\r
interpreted in the sense of formal systems). The formula ‘1 + (−1) = 0’ is an\r
axiom when we work with wheels with negation.\r
Theorem 4.24 (completeness). The equation t(x1, . . . , xn) = s(x1, . . . , xn)\r
is valid in WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) =\r
s(x1, . . . , xn) is provable using the axioms for wheels together with the axioms\r
‘0xi is +-cancellable’ (i = 1, . . . , n).\r
Proof. Validity of the equation t(x1, . . . , xn) = s(x1, . . . , xn) is equivalent to\r
the truth of t(x1, . . . , xn) = s(x1, . . . , xn) in FWF({x1, . . . , xn) (by definition\r
of the latter wheel). Lemma 4.47 will show that if the latter equation is true,\r
then it is provable using the axioms for wheels together with the axioms ‘0xiis\r
+-cancellable’.\r
On the other hand, if it is provable by that technique, then it is true by\r
lemma 4.39.\r
Before we state and prove some technical lemmas, we state the following the\u0002orems, which are alternatives to the previous ones. By distinguishing between\r
‘balanced’ and ‘unbalanced’ equations, they make more precise statements than\r
the previous ones.\r
Definition 4.25. An equation is balanced if each variable occurs equally many\r
times on each side. Otherwise, it is unbalanced.\r
Note that all axioms for wheels except ‘x + 0/0 = 0/0’ are balanced. Re\u0002member that x occurs n times in ‘x\r
n’, since ‘xn’ is just a short notation for a\r
product of n x’s. A warning: the equation ‘0xi = 0’ is balanced, since xiis not\r
35

a variable in our formal sense, but a constant symbol, interpreted as a special\r
element of the structure considered in the context.\r
Theorem 4.26. An unbalanced equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid\r
in WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) = 0/0 and\r
s(x1, . . . , xn) = 0/0 are true in \f∅(N[x1, . . . , xn]).\r
Proof. Use lemma 4.49 and the equivalence between validity and truth.\r
Example 4.27. The formula 1 + 1\r
x = x+1x\r
is valid in Q \\ {0}. Is it perhaps\r
valid in all wheels of fractions? The answer is no, since it is not balanced, and\r
one easily checks that 1 +\r
1\r
x\r
6=\r
0\r
0\r
in \f∅(N[x]). A balanced analogue is\r
1 +\r
1\r
x\r
+ 0x =\r
x + 1\r
x\r
,\r
which is easily proved by the wheel axioms.\r
Theorem 4.28. A balanced equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid in\r
WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) = s(x1, . . . , xn)\r
is true in \f∅(N[x1, . . . , xn]).\r
Proof. If t(x1, . . . , xn) = s(x1, . . . , xn) is valid, t(x1, . . . , xn) = s(x1, . . . , xn) is\r
clearly true.\r
For the other direction, use lemma 4.50 and the equivalence between validity\r
and truth.\r
Example 4.29. (x+1)2\r
x =\r
x(x+2)+1\r
x\r
is valid in all wheels of fractions since it is\r
balanced (x occurs three times on each side) and (x+1)2\r
x =\r
x(x+2)+1\r
x\r
is true in\r
\f∅(N[x]).\r
Example 4.30. (x + y)(x − y) = x\r
2 − y2\r
is valid in all wheels of fractions with\r
negation. This follows since it is balanced and (x1 + x2)(x1 − x2) = x\r
2\r
1 − x\r
2\r
2\r
is\r
true in \f∅(Z[x1, x2]).\r
These two results give a completeness result for WF together with the fol\u0002lowing theorem:\r
Theorem 4.31. The equation t(x1, . . . , xn) = s(x1, . . . , xn) is true in the wheel\r
\f∅(N[x1, . . . , xn]) if and only if it is provable by the wheel axioms together with\r
the rules ‘0xi = 0’ for each i = 1, . . . , n.\r
Proof. 0xi = 0 is evidently true in \f∅(N[x1, . . . , xn]), so provable equations are\r
true.\r
Suppose on the other hand that t(x1, . . . , xn) = s(x1, . . . , xn) is true in\r
\f∅(N[x1, . . . , xn]). Then t(x1, . . . , xn) ≡ s(x1, . . . , xn) in FWheel({x1, . . . , xn})\r
(definition 4.40 and lemma 4.44), say t(x1, . . . , xn) + zt1 = s(x1, . . . , xn) + zt2\r
is true in FWheel({x1, . . . , xn}) for some zero-terms zt1 and zt2. Then (by\r
completeness) it is provable from the wheel axioms. The rules ‘0xi = 0’ can\r
finally be used to prove that zt1 = 0 and zt2 = 0.\r
The acceptance of the rules ‘0xi = 0’ lets us count as in rings with polynomial\r
expressions in x1, . . . , xn.\r
36

Example 4.32. (x + 1)2 = x(x + 2) + 1 is provable using wheel axioms and\r
‘0x = 0’:\r
(x + 1)2 = (x + 1)(x + 1) + 0x + 0 · 1 = (x + 1)(x + 1) + 0(x + 1)\r
= x(x + 1) + 1(x + 1) = x(x + 1) + x + 1\r
= x(x + 1 + 1) + 0x + 1 = x(x + 2) + 1\r
The theorems above have some corollaries. The first states how identities\r
from semirings can be transferred to wheels of fractions.\r
Corollary 4.33. If t(x1, . . . , xn) and s(x1, . . . , xn) are polynomial terms, then\r
t(x1, . . . , xn) = s(x1, . . . , xn) is valid in WF if and only if it is balanced and\r
valid in N.\r
Proof. Suppose it is valid in WF. Then it is valid in \f∅N and hence in N. Since\r
t(x1, . . . , xn) ∈ N[x1, . . . , xn] ∼= R\f∅(N[x1, . . . , xn]), we conclude that it cannot\r
be equal to 0/0. So the equation is balanced.\r
On the other hand, if the equation is valid in N, then t(x1, . . . , xn) =\r
s(x1, . . . , xn) in\r
N[x1, . . . , xn] ⊂ \f∅(N[x1, . . . , xn]).\r
If it is also balanced, then it is valid in WF.\r
Example 4.34. (x + 1)2 = x(x + 2) + 1 is balanced and valid in N, hence it is\r
valid in wheels of fractions.\r
Example 4.35. (x + y)(x − y) = x\r
2 − y2\r
is balanced and valid in Z, hence it\r
is valid in wheels of fractions with negation.\r
The next result states how equations that have partial meaning and partial\r
validity in fields of characteristic zero can be transferred to wheels of fractions.\r
Corollary 4.36. Suppose there is an infinite subset X of Q such that the terms\r
t(x1, . . . , xn) and s(x1, . . . , xn) are meaningful and Q-valued when values from\r
X are substituted for the variables and / is interpreted as inversion. Suppose\r
also that t and s yield the same values when such substitutions are made. Then\r
t(x1, . . . , xn) + 0s(x1, . . . , xn) = s(x1, . . . , xn) + 0t(x1, . . . , xn)\r
is valid in WF.\r
Proof. Since the latter equation is balanced, we use that its validity in WF is\r
equivalent to the truth of\r
t(x1, . . . , xn) + 0s(x1, . . . , xn) = s(x1, . . . , xn) + 0t(x1, . . . , xn)\r
in \f∅(N[x1, . . . , xn]).\r
If each side is computed, we get [pt(x1, . . . , xn), qt(x1, . . . , xn)] on the left\r
for some polynomials pt, qt and [ps(x1, . . . , xn), qs(x1, . . . , xn)] on the right for\r
some polynomials ps, qs. Clearly, qt and qs will be equal as polynomials. We\r
shall prove that also pt and ps must be equal as polynomials.\r
When x1, . . . , xn are replaced by values from X, then we get values in Q =\r
R\fS0 Z. Hence qt and qs are non-zero for such substitutions. Since we also\r
know that the values for t and s are equal for such substitutions, we conclude\r
that the values for pt and ps are equal. But since X is infinite, that implies that\r
pt and ps are equal as polynomials.\r
37

Example 4.37. The equation x/x = 1 is valid in Q \\ {0}, hence x/x + 0 · 1 =\r
1+0x/x is valid in wheels of fractions (this is of course a known rule for wheels,\r
but it is instructive to see how it is related to validity in Q).\r
Example 4.38. The equation x/x − 1 = 0 is valid in Q \\ {0}, hence x/x − 1 =\r
0x/x is valid in wheels of fractions with negation.\r
We now prove the lemmas for the theorems.\r
Lemma 4.39. 0xi is +-cancellable in FWF({x1, . . . , xn}), for i = 1, . . . , n.\r
Proof. We shall prove that if t(x1, . . . , xn) + 0xi = s(x1, . . . , xn) + 0xiis valid\r
in \f∅N, then t(x1, . . . , xn) = s(x1, . . . , xn) is too.\r
Substitute therefore x\r
0\r
j\r
/x00\r
j\r
for every variable xj and compute the values of\r
the terms, ending up with the following form, where pt, qt, ps, qs are polynomials:\r
t(x1, . . . , xn) =\r
pt(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
qt(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
s(x1, . . . , xn) =\r
ps(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
qs(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
.\r
The values of t(x1, . . . , xn) + 0xi and s(x1, . . . , xn) + 0xi are then\r
t(x1, . . . , xn) + 0xi =\r
pt(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
qt(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
s(x1, . . . , xn) + 0xi =\r
ps(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
qs(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
.\r
Since t(x1, . . . , xn) + 0xi = s(x1, . . . , xn) + 0xiis valid in \f∅N, we have\r
identical values for any substitution in \f∅N, hence pt = ps and qt = qs as\r
polynomials. But then t(x1, . . . , xn) and s(x1, . . . , xn) take the same values for\r
any substitution with elements from \f∅N, hence t(x1, . . . , xn) = s(x1, . . . , xn)\r
is valid in \f∅N.\r
Definition 4.40. Let t(x1, . . . , xn) ≡ s(x1, . . . , xn) mean that there are zero\u0002terms 0x\r
n1\r
1\r
. . . x\r
nn\r
n and 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
such that\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = s(x1, . . . , xn) + 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
in FWheel({x1, . . . , xn}).\r
Lemma 4.41. ≡ is a congruence relation.\r
Proof. It is clearly reflexive and symmetric. The transitivity follows from 0x +\r
0y = 0xy (10). We must prove that it preserves +, · and /. Suppose therefore\r
that t ≡ s (let us suppress the part (x1, . . . , xn) everywhere). Then there are\r
zero-terms, say zt1 and zt2 for short, such that t+zt1 = s+zt2. We then have\r
(using (6) and (7) in the second and third row)\r
t + u + zt1 = s + u + zt2\r
tu + zt1 = (t + zt1)u = (s + zt2)u = su + zt2\r
/t + zt1 = /(t + zt1) = /(s + zt2) = /s + zt2.\r
38

Lemma 4.42. If the polynomial terms p(x1, . . . , xn) and q(x1, . . . , xn) are equi\u0002valent, then p(x1, . . . , xn) ≡ q(x1, . . . , xn).\r
Proof. We first prove that 0p(x1, . . . , xn) ≡ 0 by induction on the number\r
of occurrences of operations composing p. It is obvious if p is xi or a con\u0002stant. If p is t + s, then 0p(x1, . . . , xn) = 0(t(x1, . . . , xn) + s(x1, . . . , xn)) =\r
0t(x1, . . . , xn) + 0s(x1, . . . , xn) ≡ 0 + 0 = 0. If p is ts, then 0p(x1, . . . , xn) =\r
0t(x1, . . . , xn)s(x1, . . . , xn) ≡ 0s(x1, . . . , xn) ≡ 0.\r
Hence, if p is a polynomial term and z = p(x1, . . . , xn), then for every\r
x, y ∈ FWheel({x1, . . . , xn}) we have (x+y)z = (x+y)z +0z ≡ xz +yz, so that\r
we have\r
x + y = y + x\r
x + (y + z) = (x + y) + z\r
0 + x = x\r
xy = yx\r
x(yz) = (xy)z\r
1x = x\r
(x + y)z ≡ xz + yz\r
0z ≡ 0\r
when counting with polynomial terms. We conclude that every derivation of\r
p(x1, . . . , xn) = q(x1, . . . , xn) that uses the axioms for commutative semirings\r
only, is transformed into an argument that proves p(x1, . . . , xn) ≡ q(x1, . . . , xn),\r
by changing each ‘=’ to ‘≡’.\r
Remark: The analogous case of wheels with negation is treated by use of\r
z − z ≡ 0, which is true since z − z = 0z\r
2\r
.\r
On the other hand, if p(x1, . . . , xn) ≡ q(x1, . . . , xn) for polynomial terms p\r
and q, then they are equivalent. Hence ≡ can be thought of as an extension of\r
the equivalence for polynomial terms.17\r
Lemma 4.43. For any term t(x1, . . . , xn), one can find two polynomial terms\r
p(x1, . . . , xn) and q(x1, . . . , xn) with\r
t(x1, . . . , xn) ≡\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
in FWheel({x1, . . . , xn}).\r
Proof. We use induction on the number of occurrences of operations composing\r
t.\r
0 occurrences: t(x1, . . . , xn) is xi. Then choose p(x1, . . . , xn) = xi and\r
q(x1, . . . , xn) = 1 and the result is obvious.\r
N+1 occurrences, assuming that we have proved the result for N occurrences\r
(let us suppress the part (x1, . . . , xn) everywhere): If t is a constant, then choose\r
p = t and q = 1. Otherwise, we have the following possibilities.\r
17Note however that this statement is informal, since ≡ is not a relation between terms,\r
but between elements of a certain wheel.\r
39

1. t is t1 + t2. By the induction hypotheses, we have t1 ≡ p1/q1 and t2 ≡\r
p2/q2. Hence\r
t = t1 + t2 ≡\r
pt1\r
qt1\r
+\r
pt2\r
qt2\r
≡\r
pt1\r
qt1\r
+\r
pt2\r
qt2\r
+ 0qt1 =\r
pt1 +\r
pt2qt1\r
qt2\r
qt1\r
≡\r
pt1 +\r
pt2qt1\r
qt2\r
qt1\r
+ 0qt2 =\r
pt1 +\r
pt2qt1\r
qt2\r
+ 0qt2\r
qt1\r
=\r
pt1qt2 +pt2qt1\r
qt2\r
qt1\r
=\r
pt1qt2 + pt2qt1\r
qt1qt2\r
.\r
2. t is t1t2.\r
t = t1t2 ≡\r
\u0012\r
pt1\r
qt1\r
\u0013 \u0012\r
pt2\r
qt2\r
\u0013\r
=\r
pt1 pt2\r
qt1qt2\r
3. t is /t1.\r
t = /t1 ≡ /(pt1 /qt1) = qt1 /pt1\r
Lemma 4.44. (FWheel({x1, . . . , xn})/≡) ∼= \f∅(N[x1, . . . , xn]).\r
Proof. The evaluation morphism FWheel({x1, . . . , xn}) → \f∅(N[x1, . . . , xn]) is\r
surjective, we shall prove that its kernel is ≡.\r
Clearly, if t(x1, . . . , xn) ≡ s(x1, . . . , xn) is true in FWheel({x1, . . . , xn}),\r
then t(x1, . . . , xn) = s(x1, . . . , xn) is true in \f∅(N[x1, . . . , xn]). We need to\r
prove the other direction.\r
Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) in \f∅(N[x1, . . . , xn]). By the\r
previous lemma, there are polynomial terms pt, qt, ps, qs such that\r
t(x1, . . . , xn) ≡\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
and\r
s(x1, . . . , xn) ≡\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
.\r
Hence it holds in \f∅(N[x1, . . . , xn]) that\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
= t(x1, . . . , xn) = s(x1, . . . , xn) =\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
.\r
Therefore, pt and ps are equivalent, as well as qt and qs. Hence, by lemma 4.42,\r
we have\r
pt(x1, . . . , xn) ≡ ps(x1, . . . , xn)\r
and\r
qt(x1, . . . , xn) ≡ qs(x1, . . . , xn),\r
so that\r
t(x1, . . . , xn) ≡\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
≡\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
≡ s(x1, . . . , xn).\r
40

Lemma 4.45. Suppose p and q are polynomial terms, not both equivalent to 0.\r
If\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
is true in FWF({x1, . . . , xn}), then it is true in FWheel({x1, . . . , xn}) too.\r
Proof. We prove that (n1, . . . , nn) = (m1, . . . , mn).\r
Choose distinct positive prime numbers a1, . . . , an, b1, . . . , bn such that\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
=\r
a\r
b\r
6=\r
0\r
0\r
in \f∅N.\r
Then\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
+ 0(a1/b1)\r
n1\r
. . .(an/bn)\r
nn =\r
abn1\r
1\r
. . . b\r
nn\r
n\r
bbn1\r
1\r
. . . b\r
nn\r
n\r
and\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
+ 0(a1/b1)\r
m1\r
. . .(an/bn)\r
mn =\r
abm1\r
1\r
. . . b\r
mn\r
n\r
bbm1\r
1\r
. . . b\r
mn\r
n\r
but by assumption, these should be equal. Since a 6= 0 or b 6= 0, we conclude\r
that (n1, . . . , nn) = (m1, . . . , mn).\r
Lemma 4.46. If t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}),\r
then there is a term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
such that t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n is true in FWheel({x1, . . . , xn}).\r
Proof. Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
Then it is in \f∅(N[x1, . . . , xn]) too. Hence, there are polynomials p(x1, . . . , xn)\r
and q(x1, . . . , xn) with\r
t(x1, . . . , xn) =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
s(x1, . . . , xn) =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
true in \f∅(N[x1, . . . , xn]).\r
If both p and q are equivalent to ‘0’, then we may suppose that they are\r
actually both the term ‘0’.\r
Since FWheel({x1, . . . , xn})/≡ ∼= \f∅(N[x1, . . . , xn]), there are zero-terms,\r
say zt1, zt2, zt3, zt4 for short, such that\r
t(x1, . . . , xn) + zt1 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2\r
s(x1, . . . , xn) + zt3 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4\r
in FWheel({x1, . . . , xn)}).\r
41

Since\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3 = t(x1, . . . , xn) + zt1 + zt3\r
= s(x1, . . . , xn) + zt1 + zt3\r
=\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
in FWF({x1, . . . , xn) and zt2 + zt3 and zt4 + zt1 compute to zero-terms of the\r
form used in the statement of the previous lemma, we may use that lemma to\r
conclude that if p and q are not both the term ‘0’, then\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
is true also in FWheel({x1, . . . , xn}). But if p and q are both ‘0’, then this fact\r
follows from the axiom 8 instead of from the lemma.\r
Now choose (n1, . . . , nn) such that zt1 + zt3 = 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
. Then\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3\r
=\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
= s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
Lemma 4.47. Any equation t(x1, . . . , xn) = s(x1, . . . , xn) which is true in\r
FWF({x1, . . . xn}) can be proved using the wheel axioms together with the axioms\r
‘0xi is +-cancellable’ (i = 1, . . . , n).\r
Proof. Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}). By\r
the previous lemma, we get an equation which is true in FWheel({x1, . . . , xn})\r
by adding a zero-term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
to each side. The resulting equation can\r
be proved using the axioms for wheels. The term 0x\r
n1\r
1\r
. . . x\r
nn\r
n can then be\r
cancelled by the use of ‘0xiis +-cancellable’ several times for different i, since\r
it is provable that\r
0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
Xn\r
j=1\r
Xnj\r
k=1\r
0xj .\r
Lemma 4.48. Suppose that t(x1, . . . , xn) = 0/0 is true in \f∅(N[x1, . . . , xn]).\r
Then it is true in FWF({x1, . . . , xn}) too.\r
Proof. Assume the conditions. t(x1, . . . , xn) ≡ 0/0 in FWheel({x1, . . . , xn})\r
according to lemma 4.44, say\r
t(x1, . . . , xn) + zt1 = 0/0 + zt2 = 0/0 = 0/0 + zt1.\r
Hence t(x1, . . . , xn)+zt1 = 0/0+zt1 also in FWF({x1, . . . , xn}), but by lemma\r
4.39, we conclude that t(x1, . . . , xn) = 0/0.\r
42

Lemma 4.49. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is an unbalanced\r
equation. Then t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}) if\r
and only if each side is equal to 0/0 in \f∅(N[x1, . . . , xn]) (and hence, by the\r
previous lemma, in FWF({x1, . . . , xn}) too).\r
Proof. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
By lemma 4.46, there is a zero-term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
such that\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
in FWheel({x1, . . . , xn}). By completeness, this equation is provable using the\r
wheel axioms, but since it is unbalanced, one must use an unbalanced axiom.\r
There is just one, namely ‘x+0/0 = 0/0’. That can be used only if ‘0/0’ occurs\r
as a subterm in the derivation; but if it does, then every term in the derivation\r
can be proved to be equal to 0/0.\r
Hence\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
and\r
s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
in FWF({x1, . . . , xn}) and hence also in \f∅(N[x1, . . . , xn]). But in the latter,\r
we have 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0, hence we conclude that\r
t(x1, . . . , xn) = t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
and\r
s(x1, . . . , xn) = s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
holds in \f∅(N[x1, . . . , xn]).\r
The other direction was proved in the previous lemma.\r
Lemma 4.50. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is a balanced equation\r
and that t(x1, . . . , xn) = s(x1, . . . , xn) is true in \f∅(N[x1, . . . , xn]). Then it is\r
true also in FWF({x1, . . . , xn}).\r
Proof. Assume the conditions. Then t(x1, . . . , xn) ≡ s(x1, . . . , xn) is true in\r
FWheel({x1, . . . , xn}) by lemma 4.44, say that t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
s(x1, . . . , xn) + 0x\r
m1\r
1\r
. . . x\r
mn\r
n . Since this is true in FWheel({x1, . . . , xn}), it is\r
in FWF({x1, . . . , xn}) too. If (n1, . . . , nn) = (m1, . . . , mn), then it follows by\r
lemma 4.39 that t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
If (n1, . . . , nn) 6= (m1, . . . , mn), then the equation t(x1, . . . , xn)+0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
= s(x1, . . . , xn)+0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
is unbalanced, hence, by the previous lemma, we\r
have that t(x1, . . . , xn)+0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0 and s(x1, . . . , xn)+0x\r
m1\r
1\r
. . . x\r
mn\r
n =\r
0/0 in \f∅(N[x1, . . . , xn]). But since 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0 in \f∅(N[x1, . . . , xn]), we\r
have\r
t(x1, . . . , xn) = 0/0\r
and\r
s(x1, . . . , xn) = 0/0\r
which by lemma 4.48 implies that t(x1, . . . , xn) = s(x1, . . . , xn) is true in\r
FWF({x1, . . . , xn}).\r
43

5 Wheel-modules\r
Since the notion of module is central in the study of rings, and wheels can be\r
used as a replacement of rings, we should introduce the notion of an H-module\r
over a wheel H. We indicate briefly how a theory of modules may be developed.\r
The notion of A-module, where A is an arbitrary semiring, was defined in\r
section 3 (definition 3.2) and it was noted that when A happens to be a ring,\r
then an A-module in the defined sense is an A-module in the usual sense of rings.\r
The following definition is similar to that definition. Note that the axioms are\r
the wheel axioms that are interpretable in the given context, we mark to the\r
right to which wheel axiom each axiom corresponds.\r
Definition 5.1. Let H be a wheel. An H-module is a commutative monoid\r
hM, 0, +i with multiplication by H-elements defined (formally, a function H ×\r
M → M written (x, m) 7→ xm) such that for any x, x\r
0 ∈ H, m, m0 ∈ M,\r
(xx0)m = x(x\r
0m) (as 2)\r
1m = m (as 2)\r
(x + x\r
0\r
)m + 0m = xm + x\r
0m (as 3)\r
x(m + m0) + x0 = xm + xm0(as 3)\r
(/x)m + m0 + x0 = (/x)(m + xm0) (as 4)\r
0 · 0 = 0 (as 5)\r
x(m + 0m0) = xm + 0m0(as 6)\r
m + (/0)0 = (/0)0 (as 8)\r
where 0 to the left is in H, while 0 to the right or alone is in M.\r
A morphism of H-modules is as usual a monoid-morphism which also pre\u0002serves the multiplication. Let RHM be the subset {m ∈ M | 0m = 0}, which is\r
clearly an RH-module and for any H-module-morphism ϕ : M → N, let RHϕ\r
be the RH-module-morphism obtained by restriction to RHM. RH is clearly\r
a functor from the category of H-modules to the category of RH-modules.\r
The construction of wheels of fractions works also for modules over commu\u0002tative semirings, so that we may construct “\fXA-modules” from A-modules.\r
Let A be a commutative semiring, X a subset and S the multiplicative\r
monoid generated by X. Let M be an A-module and define ∼ on M × A by\r
(m, a) ∼ (m0, a\r
0\r
) ⇐⇒ ∃s1, s2 ∈ S : (s1m, s1a) = (s2m0, s2a\r
0\r
).\r
That this is an equivalence relation is seen in the same way as before. Let \fXM\r
be M × A/∼ with the operations ([c, d] ∈ \fXA)\r
0 = [0, 1]\r
[m, a] + [m0, a\r
0\r
] = [a\r
0m + am0\r
, aa0]\r
[c, d][m, a\r
0\r
] = [cm, da0].\r
These operations are well-defined by the same arguments as before, and the\r
resulting structure is clearly a \fXA-module, denoted \fXM.\r
If ϕ : M → N is an A-module homomorphism, let \fXϕ be the \fXA\u0002module homomorphism \fXM → \fX N given by [m, a] 7→ [ϕ(m), a]. \fX is then\r
44

a functor from the category of A-modules to the category of \fXA-modules;\r
with right adjoint R\fX A. If A is a ring, then the composition R\fX A\fX is the\r
well-known functor S\r
−1\r
.\r
As an application, we may define \fXA in the case when A is a commutative\r
ring without identity element. Suppose A is such a ring, X a subset of it. Let\r
A[1] be (following Nagata) the additive group Z × A together with the extra\r
operations 1 = (1, 0) and\r
(n, a)(n\r
0\r
, a\r
0\r
) = (nn0, na0 + n\r
0\r
a + aa0),\r
which makes A[1] a commutative ring with identity 1, and with A injectively\r
embedded by the operation-preserving injection x 7→ (0, x). Identify A with\r
its image under this embedding. A is then an ideal of A[1], in particular an\r
A[1]-module. In this way, \fX A is defined as a \fXA[1]-module.\r
Another application is exponentiation with fractions as exponents. Since\r
every commutative monoid hM, e, ·i is an N-module by multiplication mn(m ∈\r
M, n ∈ N), it is extended to a \fS0N-module \fS0M consisting of elements [m, n]\r
(m ∈ M, n ∈ N, write √n m for [m, n]). One has √n m\r
p/q =\r
q√n mp. In particular,\r
x\r
1/0 and x0/0\r
is defined in this way.\r
45

References\r
[AM69] M. F. Atiyah and I. G. MacDonald. Introduction to Commutative\r
Algebra. Addison-Wesley, London, 1969.\r
[Bir35] Birkhoff, 1935. See e.g. [BS81] theorem 11.9, p. 75 or [Gr¨a79] theorem\r
3, p. 171.\r
[Bor94] F. Borceux. Handbook of Categorical Algebra, volume 2. Cambridge\r
University Press, Cambridge, 1994.\r
[Bou73] N. Bourbaki. Elements of Mathematics, Algebra, Part I. Addison\u0002Wesley, Reading, Massachusetts, 1973.\r
[BS81] S. Burris and H. P. Sankappanavar. A Course in Universal Algebra.\r
Springer-Verlag, New York, 1981.\r
[EP00] A. Edalat and P. J. Potts. A new representation for exact real num\u0002bers. In S. Brookes and M. Mislove, editors, Electronic Notes in\r
Theoretical Computer Science, volume 6. Elsevier Science Publishers,\r
2000.\r
[Gol99] J. S. Golan. Semirings and their Applications. Kluwer Academic\r
Publishers, Dordrecht, 1999.\r
[Gr¨a79] G. Gr¨atzer. Universal Algebra. Springer-Verlag, New York, second\r
edition, 1979.\r
[Har77] R. Hartshorne. Algebraic Geometry. Springer-Verlag, New York, 1977.\r
[Hey56] A. Heyting. Intuitionism: An Introduction. North-Holland, Amster\u0002dam, 1956.\r
[ML84] P. Martin-L¨of. Intuitionistic Type Theory. Bibliopolis, Naples, 1984.\r
[MRR88] R. Mines, F. Richman, and W. Ruitenburg. A Course in Constructive\r
Algebra. Springer-Verlag, New York, 1988.\r
[Ob¨ e00] M. Ob¨ erg. Algebraiska och topologiska hjul. Examensarbete i matem\u0002atik, Stockholm University, 2000.\r
[Pot98] P. J. Potts. Exact Real Arithmetic using M¨obius Transformations.\r
PhD thesis, University of London, 1998. Currently available at\r
http://www.purplefinder.com/˜potts/.\r
[Set97] A. Setzer. Wheels (draft). Currently available at http://www\u0002compsci.swan.ac.uk/˜csetzer/, 1997.\r
46"""

[metadata]
title = "carlstrom 2001 wheels report"
authors = ["Unknown"]
year = 2001

[[sections]]
number = "0"
title = "Preamble"
text = """
ISSN: 1401-5617\r
Wheels\r
—\r
On Division by Zero\r
Jesper Carlstr¨om\r
Research Reports in Mathematics\r
Number 11, 2001\r
Department of Mathematics\r
Stockholm University

Electronic versions of this document are available at\r
http://www.matematik.su.se/reports/2001/11\r
Date of publication: September 10, 2001"""

[[sections]]
number = "2000"
title = "Mathematics Subject Classification: Primary 16Y99, Secondary 13B30, 13P99,"
text = """
03F65, 08A70.\r
Keywords: fractions, quotients, localization.\r
Postal address:\r
Department of Mathematics\r
Stockholm University\r
S-106 91 Stockholm\r
Sweden\r
Electronic addresses:\r
http://www.matematik.su.se\r
info@matematik.su.se

Wheels\r
—\r
On Division by Zero\r
Jesper Carlstr¨om\r
Department of Mathematics\r
Stockholm University\r
http://www.matematik.su.se/˜jesper/\r
Filosofie licentiatavhandling\r
Abstract\r
We show how to extend any commutative ring (or semiring) so that di\u0002vision by any element, including 0, is in a sense possible. The resulting\r
structure is what is called a wheel. Wheels are similar to rings, but 0x = 0\r
does not hold in general; the subset {x | 0x = 0} of any wheel is a com\u0002mutative ring (or semiring) and any commutative ring (or semiring) with\r
identity can be described as such a subset of a wheel.\r
The main goal of this paper is to show that the given axioms for wheels\r
are natural and to clarify how valid identities for wheels relate to valid\r
identities for commutative rings and semirings.

Contents"""

[[sections]]
number = "1"
title = "Introduction 3"
text = ""

[[sections]]
number = "1.1"
title = "Why invent the wheel? . . . . . . . . . . . . . . . . . . . . . . . . 3"
text = ""

[[sections]]
number = "1.2"
title = "A sketch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4"
text = ""

[[sections]]
number = "2"
title = "Involution-monoids 7"
text = ""

[[sections]]
number = "2.1"
title = "Definitions and examples . . . . . . . . . . . . . . . . . . . . . . . 8"
text = ""

[[sections]]
number = "2.2"
title = "The construction of involution-monoids from commutative monoids 9"
text = ""

[[sections]]
number = "2.3"
title = "Insertion of the parent monoid . . . . . . . . . . . . . . . . . . . 11"
text = ""

[[sections]]
number = "2.4"
title = "The role of X in the structure of M∗"
text = "X . . . . . . . . . . . . . . . 12"

[[sections]]
number = "2.5"
title = "The construction as a functor . . . . . . . . . . . . . . . . . . . . 14"
text = ""

[[sections]]
number = "3"
title = "Applications to semirings 15"
text = ""

[[sections]]
number = "3.1"
title = "Applications to additive monoids of semirings . . . . . . . . . . . 16"
text = ""

[[sections]]
number = "3.2"
title = "Applications to multiplicative monoids of commutative semirings 19"
text = ""

[[sections]]
number = "4"
title = "Wheels 23"
text = ""

[[sections]]
number = "4.1"
title = "Basic properties . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24"
text = ""

[[sections]]
number = "4.2"
title = "Applications to wheels of fractions . . . . . . . . . . . . . . . . . 27"
text = ""

[[sections]]
number = "4.2.1"
title = "The semiring in a wheel of fractions . . . . . . . . . . . . 27"
text = ""

[[sections]]
number = "4.2.2"
title = "Obtaining /-invertible wheels of fractions . . . . . . . . . 28"
text = ""

[[sections]]
number = "4.2.3"
title = "Axiomatizing the class of wheels of fractions . . . . . . . . 29"
text = ""

[[sections]]
number = "4.2.4"
title = "Cancellation of zero-terms . . . . . . . . . . . . . . . . . . 30"
text = ""

[[sections]]
number = "4.3"
title = "Equational logic for wheels of fractions . . . . . . . . . . . . . . . 32"
text = ""

[[sections]]
number = "5"
title = "Wheel-modules 44"
text = """
Acknowledgements\r
I would like to thank Clas L¨ofwall for his support during this work. He\r
followed the process through all of its stages, listening to my vague ideas\r
and reading many preliminary versions of the manuscript. He put me in\r
the right direction many times. If anything is easy to grasp in this paper,\r
it is probably because he asked me to simplify that part and to give some\r
examples.\r
I would also like to thank Per Martin-L¨of, who spent many hours\r
discussing constructive aspects with me. He also read several versions of\r
the manuscript and gave me many valuable comments, on the content as\r
well as on how it should be expressed. The first idea, of which wheel\r
theory is a generalization, originates from him.\r
Thanks also to J¨orgen Backelin, with whom I discussed possible choices\r
of axioms, before the final selection was made.\r
Typeset by LATEX, using Paul Taylor’s package ‘Commutative Diagrams’.\r
\rc 2001 Jesper Carlstr¨om\r
2"""

[[sections]]
number = "1"
title = "Introduction"
text = ""

[[sections]]
number = "1.1"
title = "Why invent the wheel?"
text = """
The fact that multiplicative inversion of real numbers is a partial function is\r
annoying for any beginner in mathematics: “Who has forbidden division by\r
zero?”. This problem seems not to be a serious one from a professional point\r
of view, but the situation remains as an unaesthetic fact. We know how to\r
extend the semiring of natural numbers so that we get solutions to equations\r
like 5 + x = 2, 2x = 3, x\r
2 = 2, x2 = −1 etc., we even know how to get\r
completeness, but not how to divide by 0.\r
There are also concrete, pragmatic aspects of this problem, especially in con\u0002nection with exact computations with real numbers. Since it is not in general\r
decidable whether a real number is non-zero, one can’t in general tell whether\r
it is invertible. Edalat and Potts [EP00, Pot98] suggested that two extra ‘num\u0002bers’, ∞ = 1/0 and ⊥ = 0/0, be adjoined to the set of real numbers (thus\r
obtaining what in domain theory is called the ‘lifting’ of the real projective\r
line) in order to make division always possible. In a seminar, Martin-L¨of pro\u0002posed that one should try to include these ‘numbers’ already in the construction\r
of the rationals from the integers, by allowing not only non-zero denominators,\r
but arbitrary denominators, thus ending up not with a field, but with a field\r
with two extra elements. Such structures were called ‘wheels’ (the term inspired\r
by the topological picture \f of the projective line together with an extra point\r
0/0) by Setzer [Set97], who showed how to modify the construction of fields of\r
fractions from integral domains so that wheels are obtained instead of fields.\r
In this paper, we generalize Setzer’s construction, so that it applies not\r
only to integral domains, but to any commutative semiring. Our construction\r
introduces a ‘reciprocal’ to every element, the resulting structure being what\r
will be called a ‘wheel of fractions’. We use the term ‘wheel’ in a more general\r
sense than Setzer, but a wheel in our sense is still a structure in which addition,\r
multiplication and division can always be performed. A wheel in Setzer’s sense\r
will be recognized as what we denote by ‘\fS0A’, where A is an integral domain,\r
S0 the subset A \\ {0}."""

[[sections]]
number = "1"
title = "Beside applications to exact computations, there are other applications to"
text = """
computer programming: algorithms that split into cases depending on whether\r
their arguments are zero or not, can sometimes be simplified using a total divi\u0002sion function.\r
We also hope for applications in algebraic geometry. Instead of considering\r
‘rational maps’ as partial functions from a variety to a field, one may consider\r
‘rational functions’ from the variety to the wheel extending the field. The set\r
of all such rational functions is a wheel in our sense (but not in Setzer’s) with\r
the operations defined point-wise. We say that rational functions are ‘equal as\r
maps’ if they agree on some non-empty Zariski open subset. This is a congruence\r
relation (it is transitive since the Zariski topology of a variety is irreducible)\r
and the set of congruence classes is again a wheel — the ‘wheel of rational\r
maps’. In the same way, there is a ‘wheel of regular functions’. Every regular\r
function is equal as a map to some rational function. Finally, the most important\r
1The notation S0 will be used for the set of cancellable elements in a monoid, i.e., a ∈\r
S0 means that ax = ay ⇒ x = y for all x, y. When considering semirings, we use the\r
multiplicative monoid for this definition. In integral domains, we get S0 = A \\ {0}.\r
3

methods in algebraic geometry are the projection onto a quotient of the ring of\r
functions considered (the geometric interpretation being restricting attention to\r
a Zariski closed subset of the variety) and the construction of a ring of fractions\r
(localization in the sense that attention is restricted to what happens near some\r
Zariski closed subset). Usually, those constructions are formally very different,\r
even though their interpretations are similar. Using wheels instead of rings,\r
those two situations are both handled by the same method: by projection onto\r
a quotient. That suggests possible simplifications when wheels are used instead\r
of rings.2\r
Finally, there should be applications to the development of constructive\r
mathematic, in which total functions are preferred to partial functions.3"""

[[sections]]
number = "1.2"
title = "A sketch"
text = """
We indicate briefly what the basic ideas are. Proofs and technical verifications\r
are postponed to the following sections.\r
The natural way of trying to introduce inverses to all elements of a ring, is to\r
modify the usual construction of rings of fractions. If A is a commutative ring\r
with identity, S a multiplicative submonoid of it, then the usual construction is\r
as follows: Define the relation ∼S on A × S (here the product is taken in the\r
category of sets) as\r
(x, s) ∼S (x\r
0\r
, s\r
0\r
) means ∃s\r
00 ∈ S : s00(xs0 − x0\r
s) = 0.\r
Then ∼S is an equivalence relation and A × S/ ∼S is a commutative ring with\r
(the class containing (x, y) is denoted by [x, y])\r
0 = [0, 1]\r
1 = [1, 1]\r
[x, s] + [x\r
0\r
, s\r
0\r
] = [xs0 + x\r
0\r
s, ss0]\r
[x, s][x\r
0\r
, s\r
0\r
] = [xx0, ss0].\r
Clearly, 0 can’t be inverted unless 0 ∈ S, but if that is the case, then ∼S is the\r
improper relation, so that A × S/ ∼S is trivial.\r
The obvious thing to try is to replace A × S by A × A. Considering the\r
multiplicative structure only, A×S is a product of monoids and ∼S a congruence\r
relation on it. Let ≡S be the congruence relation that is generated on the monoid\r
A × A by ∼S. Then\r
(x, y) ≡S (x\r
0\r
, y\r
0\r
) ⇐⇒ ∃s, s\r
0 ∈ S : (sx, sy) = (s0x0\r
, s\r
0\r
y\r
0\r
).\r
2We do not treat algebraic geometry in this paper, but the statements in this paragraph\r
are rather obvious corollaries of the theory developed. It is also possible to treat the more\r
general situation of spectrums and schemes.\r
3That a function f (think of the inversion of real numbers) is ‘partial’ on a set A means that\r
f(x) is defined provided a certain predicate holds for x, say, that P(x) is true. In constructive\r
type theory [ML84], this is interpreted as that f takes pairs (x, p) as arguments, with x an\r
element of A and p a proof of P(x). Thus, formally, f is not at all in the usual sense a\r
partial function, but total on a set of pairs. In that sense, there are no partial functions in\r
constructive type theory, but the term ‘partial’ can still be useful as a way of explaining that\r
one informally thinks of f as defined on some ‘part’ of A. Since a proof of P(x) is needed\r
as an argument for f, it is clearly preferable to have f replaced by a total function. That is\r
a reason for asking for a program of reworking mathematics without partial functions. This\r
paper is in the line with such a program."""

[[sections]]
number = "4"
title = "We define \fSA (the wheel of fractions with respect to S) as A×A/ ≡S with"
text = """
the operations\r
0 = [0, 1]\r
1 = [1, 1]\r
[x, y] + [x\r
0\r
, y\r
0\r
] = [xy0 + x\r
0\r
y, yy\r
0\r
]\r
[x, y][x\r
0\r
, y\r
0\r
] = [xx0, yy\r
0\r
]\r
/[x, y] = [y, x].\r
This structure is not a ring (unless it is trivial), since 0x = 0 is not valid\r
in general: with x = [0, 0], we get 0x = [0, 0] which is not equal to [0, 1] unless\r
0 ∈ S, but then ≡S is improper and \fSA is trivial.\r
The additive structure is a commutative monoid, as well as the multiplica\u0002tive. However, the group structure of addition is destroyed, since [0, 0] + x = 0\r
has no solution in non-trivial cases. Instead, one has the formula x − x = 0x\r
2\r
if x − y is defined as x + (−1)y, where −1 = [−1, 1]. Thus x − x = 0 is true for\r
any x with 0x = 0; and in many wheels, there are many such x’s.\r
The unary operation / is an involution on the multiplicative monoid, i.e.\r
//x = x and /(xy) = /y/x. We call it the ‘reciprocal’ operation, with /x being\r
the ‘reciprocal’ of x. One does not have x/x = 1 in general, but x/x = 1+0x/x."""

[[sections]]
number = "4"
title = "Wheels of fractions are wheels, abstractly defined as follows."
text = """
Definition 1.1 (wheel). A wheel is a structure hH, 0, 1, +, ·, /i in which the\r
following holds:\r
hH, 0, +i is a commutative monoid (1)\r
hH, 1, ·, /i is a commutative monoid with involution / (2)\r
Distributivity\r
(x + y)z + 0z = xz + yz (3)\r
x\r
y\r
+ z + 0y =\r
x + yz\r
y\r
(4)\r
Rules for zero-terms\r
0 · 0 = 0 (5)\r
(x + 0y)z = xz + 0y (6)\r
/(x + 0y) = /x + 0y (7)\r
x + 0/0 = 0/0. (8)\r
Here, H is a set (we will use the same symbol for the wheel), 0 and 1 are\r
constants, + and · are binary operations and / is a unary operation. We often\r
omit the dot for multiplication and we sometimes write x\r
y\r
for x/y. The usual\r
priority rules apply: lower -arity gives higher priority and multiplication is prior\r
to addition.\r
4That x/x = 1 is not in general true, is the reason why we avoid the notation x−1\r
for\r
/x. The reciprocal should be thought of as a unary version of division, like negation is a\r
unary version of subtraction. The unary negation corresponds to the binary subtraction by\r
x − y = x + (−y) and −y = 0 − y. In the same way, there is a correspondence between the\r
unary reciprocal and the binary division by x/y = x(/y) and /y = 1/y."""

[[sections]]
number = "5"
title = "Note that the usual rule ‘0x = 0’, which states that “zero-terms can be"
text = """
erased”, is replaced by rules stating that zero-terms can be moved in certain\r
ways in an expression. Indeed, (6) and (7) state that addition by a zero-term\r
commutes with multiplication and reciprocal, so that if a zero-term occurs some\u0002where inside an expression, then it can be moved outside.\r
Example 1.2. ((x+4+0y)(2+0z)+0x)(2+0z) = ((x+4)2)2+0x+0y+0z+0z.\r
As a derived rule (rule (10) on page 24), we have 0x + 0y = 0xy, so that\r
several zero-terms can be merged together in one.\r
Example 1.3. 0x + 0y + 0z + 0z = 0xyz"""

[[sections]]
number = "2"
title = "The distributivity rule (3) looks different from the usual one, since we have"
text = """
a zero-term on the left-hand side. But it reduces to the usual rule when 0z = 0.\r
Since e.g. 0 · 2 = 0,5 we have (x + y)2 = x2 + y2 and hence we get from the\r
examples above that ((x + 4 + 0y)(2 + 0z) + 0x)(2 + 0z) = 4x + 16 + 0xyz"""

[[sections]]
number = "2"
title = "Some examples of wheels of fractions are (we list only the underlying sets):"
text = ""

[[sections]]
number = "1"
title = 'Z\{0}Z = Q ∪ {/0, 0/0}.'
text = ""

[[sections]]
number = "2"
title = "AA = {0}. This is the trivial wheel."
text = """
3. \f{1}(Z/2Z) = {0, 1, /0, 0/0}.\r
4. \f{1}Z, the set of fractions of integers where no identifications are made.\r
Hence two fractions are regarded as equal only if they have the same\r
numerators and the same denominators.\r
5. \f{1,3}(Z/4Z) = {0, 1, 2, 3, /0, /2, 0/0, 0/2, 2/0, 2/2}. Note that this wheel\r
extends the ring Z/4Z with six new elements. Thus, it is possible for such\r
an extension to have more “new” elements than “old” ones."""

[[sections]]
number = "6"
title = "S0A, where S0 = {x ∈ A | xy = xz ⇒ y = z}, is the ‘total wheel"
text = """
of fractions’. It contains the well-known total ring of fractions as the\r
subset {x | 0x = 0}. Moreover, \fS0A is what we will call ‘/-invertible’:\r
if xy = 1, then y = /x. Hence / can be used to compute multiplicative\r
inverses whenever such exist."""

[[sections]]
number = "7"
title = "U A, where U is the set of units in A, is /-invertible and the subset"
text = """
{x | 0x = 0} is an isomorphic copy of A. This shows that A can be\r
extended to a /-invertible wheel in a structure-preserving way (as opposed\r
to the construction of a total wheel of fractions, which often kills a lot of\r
ideals).\r
An advantage of wheels as compared to rings is that several rules that are\r
valid in rings only in special cases, will have counterparts that are generally\r
valid in wheels. One example is the rule\r
xz = yz ∧ z 6= 0 ⇒ x = y\r
of integral domains, whose general counterpart for wheels is\r
xz = yz ⇒ x + 0z/z = y + 0z/z\r
50(1 + 1) = 0(1 + 1) + 0 · 0 = 0 · 1 + 0 · 1 = 0 + 0 = 0.\r
6

(derived rule (13) on page 24).\r
Since any ring can be extended to a wheel in a structure-preserving way, one\r
may always switch to wheel theory if one likes, even if one works with a problem\r
which originates from a context of rings. Suppose for instance that a, b, c are\r
elements of a ring A and that we have concluded that\r
ac = bc.\r
We may then think of a, b, c as elements of a /-invertible wheel that extends A\r
and use 0c = 0, concluding that\r
a + 0/c = b + 0/c.\r
This does always make sense. Additional information about c can later be used\r
to go further in the calculation.\r
We arrived at wheels of fractions by a modification of a well-known con\u0002struction, and it was by no means clear that the chosen construction yields the\r
best result. We will however show that, in a certain sense, this construction is\r
very natural. We do that in the following steps.\r
First, we forget the operations 0 and + of the ring we started with, so that\r
we are left with the multiplicative monoid. We show that the construction can\r
be carried out in this setting, and that it solves a universal problem for monoids.\r
This shows that it is very natural from the point of view of the multiplicative\r
monoid. We then show that there is a unique way of defining 0 and + such that\r
the construction is functorial from the category of semirings to the category of\r
‘weak wheels’, which is a very general category. That unique way is precisely\r
the one described above.\r
Convention. Any category with structures as objects is assumed\r
to have algebraic morphisms as arrows, i.e., mappings that preserve\r
all operations, including constants which are to be viewed as nullary\r
operations."""

[[sections]]
number = "2"
title = "Involution-monoids"
text = """
The construction sketched in the previous section was motivated by a wish\r
to make certain changes to the multiplicative monoid of a commutative ring.\r
Fortunately, it turns out that the construction is compatible with the additive\r
structure too, but that is not needed for the construction to be made. In fact,\r
if one forgets about the additive structure and treats the multiplicative monoid\r
only, then the construction becomes even more natural. A few sections will\r
therefore be devoted to a study of commutative monoids. In this context, the\r
motivation from the previous section amounts to the following.\r
Every monoid M comes with a partial inversion function, defined on the\r
group of units in M. M can be extended to a group only when every element of\r
it is cancellable. However, we will show that if M is commutative, then it can\r
always be extended to a commutative monoid with an involution ∗, such that\r
the partial inversion function of M is the restriction of ∗. This will follow as an\r
application of the more general construction given below.\r
7"""

[[sections]]
number = "2.1"
title = "Definitions and examples"
text = """
We use the following notion of involution, the canonical example being the\r
inverse of a group.\r
Definition 2.1 (involution). An involution on M is a mapping ∗ : M → M\r
such that\r
x\r
∗∗ = x\r
(xy)\r
∗ = y∗x∗\r
.\r
Note that e\r
∗ = e for the identity e, since e∗ = ee∗ = e∗∗e∗ = (ee∗\r
)\r
∗ =\r
e\r
∗∗ = e. Therefore, an involution is a homomorphism M op → M. If M is\r
commutative, then an involution is precisely an automorphism of order 2.\r
Definition 2.2 (involution-monoid). An involution-monoid is a pair hM, ∗i\r
where M is a monoid and ∗ an involution on it. A morphism of involution\u0002monoids ϕ : hM, ∗i → hN, ?i is a monoid morphism M → N with ϕ(x\r
∗\r
) = ϕ(x)\r
?\r
for every x.\r
Example 2.3. 1. A group with x\r
∗ = x−1\r
."""

[[sections]]
number = "2"
title = "An abelian group (or any commutative monoid) with ∗ being the identity"
text = "morphism."

[[sections]]
number = "3"
title = "The multiplicative monoid of a field together with"
text = """
x\r
∗ =\r
(\r
0 (x = 0)\r
x\r
−1\r
(x 6= 0).\r
Note however that this definition is constructive only if x = 0 is decidable.\r
That is not the case in e.g. R."""

[[sections]]
number = "4"
title = "The monoid of n × n matrices with ∗ being transposition."
text = ""

[[sections]]
number = "5"
title = "The monoid of strings from a given alphabet (e being the empty string"
text = """
and the composition being concatenation) with x\r
∗ being the string x in\r
reversed order.\r
As is seen, involutions can sometimes be used as approximations of inversion\r
functions. We therefore use the following different notions of inversion.\r
Definition 2.4. Let hM, ∗i be an involution-monoid."""

[[sections]]
number = "1"
title = "An element x ∈ M is invertible or a unit if there exists a y ∈ M with"
text = """
xy = yx = e. This is the ordinary notion for monoids and we use the\r
ordinary notation x\r
−1\r
for the element with xx−1 = x\r
−1x = e. We call\r
x\r
−1\r
the multiplicative inverse of x."""

[[sections]]
number = "2"
title = "An element x ∈ M is ∗-invertible or a ∗-unit if xx∗ = x"
text = """
∗x = e (hence\r
∗-units are units).\r
3. hM, ∗i is said to be ∗-invertible if all units are ∗-invertible, i.e., if x\r
−1 = x∗\r
whenever x\r
−1\r
is defined.\r
Example 2.5. ‘Orthogonal’ is a more common term for ∗-invertible n × n\u0002matrixes.\r
8"""

[[sections]]
number = "2.2"
title = "The construction of involution-monoids from commu\u0002tative monoids"
text = """
From now on, M is assumed to be a commutative monoid and X a\r
subset of it. S is assumed to be the submonoid generated by X, i.e.,\r
S consists of all finite products of elements of X (e being the empty\r
product). Variables s, s\r
0\r
, s\r
00\r
, . . . , s0, s1, . . . are assumed to vary over\r
S when nothing else is stated.\r
The ordinary construction of commutative monoids of fractions is precisely\r
like that of commutative rings of fractions, except that one needs a minor\r
modification to take care of the fact that no subtraction is present. Bour\u0002baki [Bou73] defines MX as the monoid M × S/ ∼S, where (m, s) ∼S (m0\r
, s\r
0\r
)\r
means ∃s\r
00 : s00ms0 = s00m0\r
s"""

[[sections]]
number = "0"
title = "That construction solves the following universal"
text = """
problem:\r
Find a monoid MX with ι(M,X): M → MX, having the property\r
that whenever ϕ : M → N is a monoid-morphism with ϕ(x) a\r
unit for every x ∈ X, then there is a unique ϕˆ : MX → N with\r
ϕ = ϕˆ ◦ ι(M,X).\r
MX\r
\r
\r
\r
\r
\r
ι(M,X)\r
✒ ❅\r
❅❅❅❅\r
ϕˆ\r
❘\r
M\r
ϕ ✲ N\r
Informally, one asks that the elements of a subset X should ‘turn into units’\r
when mapped into N and defines MX to be universal with that property. Bour\u0002baki does not assume that N is commutative, but the generality is somewhat\r
illusory, since the homomorphic image of a commutative monoid is again com\u0002mutative. Since everything takes place inside the image of M, one has all\r
commutativity that is needed. One could therefore as well require that N be\r
commutative and handle a morphism M → N 0(N0 not commutative) by letting\r
N be the image, factorizing the morphism as M → N → N 0.\r
An analogue for involution-monoids is to ask that the elements x ∈ X should\r
‘turn into ?-units’ when mapped into an involution-monoid hN, ?i. Formally, we\r
state it as follows, with T denoting the forgetful functor taking the monoid out of\r
an involution-monoid. Motivated by the arguments in the previous paragraph,\r
we assume that N is commutative.6\r
Let M be a commutative monoid and X an arbitrary subset of M.\r
Then find an involution-monoid M∗\r
X with η(M,X)\r
: M → T(M∗\r
X),\r
having the property that whenever hN, ?i is a commutative involu\u0002tion-monoid and ϕ : M → N a monoid-morphism with ϕ(x)ϕ(x)\r
? =\r
ϕ(x)\r
?ϕ(x) = e for every x ∈ X, then there is a unique ϕˆ : M∗\r
X →\r
hN, ?i with ϕ = T(ϕˆ) ◦ η(M,X).\r
6\r
In our situation, this requirement is really essential, since we do not any longer work\r
inside the image of M, but in the generated involution-monoid, which is not automatically\r
commutative."""

[[sections]]
number = "9"
title = "T(M∗"
text = """
X)\r
\r
\r
\r
\r
\r
η(M,X)\r
✒ ❅❅❅\r
❅❅\r
T(ϕˆ)\r
❘\r
M\r
ϕ ✲ N\r
We show how to find M∗\r
X. Consider the involution-monoid hM × M, ∗i\r
where (x, y)\r
∗ = (y, x) and define ≡S on it by\r
(x, y) ≡S (x\r
0\r
, y\r
0\r
) means ∃s1, s2 : (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
).\r
Then ≡S is clearly reflexive and symmetric, but it is also transitive, since if\r
(s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and (s3, s3)(x\r
0\r
, y\r
0\r
) = (s4, s4)(x\r
00\r
, y\r
00), then it fol\u0002lows that (s1s3, s1s3)(x, y) = (s2s4, s2s4)(x\r
00\r
, y\r
00). It is easily seen that ≡S pre\u0002serves the operations, so that it is in fact a congruence relation. The congruence\r
class containing (x, y) will be denoted by [x, y].\r
Definition 2.6. Let M∗\r
X = hM × M, ∗i / ≡S, and let η(M,X)\r
: M → T(M∗\r
X) be\r
defined by x 7→ [x, e].\r
Theorem 2.7 (solution to the universal problem). Suppose hN, ?i is a\r
commutative involution-monoid and ϕ : M → N a monoid-morphism. Then\r
ϕˆ([x, y]) = ϕ(x)ϕ(y)\r
? defines a morphism of involution-monoids M∗\r
X → hN, ?i\r
and if ψ is such a morphism too, then ϕ = T(ψ) ◦ η(M,X)if and only if ψ = ϕˆ.\r
Proof. We first prove uniqueness of ψ. In order for it to extend ϕ, we must\r
have\r
ψ([x, y]) = ψ([x, e][y, e]\r
∗\r
) = ψ([x, e])ψ([y, e])? = ψ(η(M,X)(x))ψ(η(M,X)(y))?\r
= ϕ(x)ϕ(y)\r
?\r
.\r
Hence, ϕˆ is the only candidate. It is well-defined, since if [x, y] = [x\r
0\r
, y\r
0\r
] then\r
there are s1, s2 with (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and therefore\r
ϕ(x)ϕ(y)\r
? = ϕ(x)eϕ(y)? = ϕ(x)ϕ(s1)ϕ(s1)?ϕ(y)? = ϕ(xs1)ϕ(ys1)?\r
= ϕ(x\r
0\r
s2)ϕ(y\r
0\r
s2)\r
? = ϕ(x0\r
)ϕ(s2)ϕ(s2)\r
?ϕ(y0\r
)\r
? = ϕ(x0\r
)eϕ(y\r
0\r
)\r
?\r
= ϕ(x\r
0\r
)ϕ(y\r
0\r
)\r
?\r
.\r
It is a monoid-morphism since\r
ϕˆ([x, y][x\r
0\r
, y\r
0\r
]) = ϕˆ([xx0, yy\r
0\r
]) = ϕ(xx0)ϕ(y\r
0\r
y)\r
? = ϕ(x)ϕ(x0\r
)ϕ(y)\r
?ϕ(y0\r
)\r
?\r
= ϕ(x)ϕ(y)\r
?ϕ(x0\r
)ϕ(y\r
0\r
)\r
? = ϕˆ([x, y])ϕˆ([x0\r
, y\r
0\r
])\r
and\r
ϕˆ([e, e]) = ϕ(e)ϕ(e)\r
? = ee? = e.\r
It preserves the involution since\r
ϕˆ([x, y]\r
∗\r
) = ϕˆ([y, x]) = ϕ(y)ϕ(x)\r
? = ϕ(y)??ϕ(x)? = (ϕ(x)ϕ(y)?\r
)\r
?\r
= ϕˆ([x, y])?.\r
10"""

[[sections]]
number = "2.3"
title = "Insertion of the parent monoid"
text = """
The mapping η(M,X) differs from the usual ι(M,X) only in the choice of codomain,\r
since we will see in theorem 2.10 that MX is included in M∗\r
X. Hence, many\r
properties of ι carry over to η. One such is that η(M,X)is not in general injective.\r
Proposition 2.8. η(M,X)(a) = η(M,X)(b) iff there is some s ∈ S with sa = sb.\r
Proof.\r
[a, e] = [b, e]\r
⇐⇒ ∃s1, s2 : (s1, s1)(a, e) = (s2, s2)(b, e)\r
⇐⇒ ∃s : sa = sb.\r
Corollary 2.9. η(M,X)is injective iff every x ∈ X is cancellable.\r
Proof. If every x ∈ X is cancellable, then every s ∈ S is too, since S is generated\r
by X. Hence sa = sb ⇒ a = b and the rest follows from the proposition.\r
It is convenient to use the same symbol for an element of a monoid M and\r
its image under η(M,X), even when η(M,X)is not injective (remembering that\r
lack of injectivity means that equality in M∗\r
X need not imply equality in M).\r
We will use that notation frequently. In particular, it allows us to write xy ∗\r
instead of [x, y].\r
Theorem 2.10. The homomorphism ηˆ(M,X): MX → T(M∗\r
X), induced by\r
η(M,X) according to the universal property of MX, is injective.\r
MX\r
\r
\r
\r
\r
\r
ι(M,X)\r
✒ ❅\r
❅\r
❅\r
❅\r
❅\r
ηˆ(M,X)\r
❘\r
M\r
η(M,X) ✲ T(M∗\r
X)\r
Proof. This is best seen in a very concrete way, examining how the constructions\r
of MX and M∗\r
X are related.\r
Let ∼S be the restriction of ≡S to M × S. Then\r
(x, s) ∼S (x\r
0\r
, s\r
0\r
) ⇐⇒ ∃s\r
00 : s00xs0 = s00x0\r
s,\r
because on the one hand, if s\r
00xs0 = s00x0\r
s, then we have\r
(s\r
00s0\r
, s\r
00s0\r
)(x, s) = (s\r
00xs0\r
, s\r
00ss0\r
) = (s\r
00x0\r
s, s\r
00ss0\r
) = (s\r
00s, s00s)(x0\r
, s\r
0\r
)\r
and on the other, if (s1, s1)(x, s) = (s2, s2)(x\r
0\r
, s\r
0\r
), then\r
s1xs0 = s2x\r
0\r
s\r
0 = s1x0\r
s."""

[[sections]]
number = "11"
title = "Since ∼S is a restriction of ≡S, it follows that the mapping M × S/ ∼S→"
text = """
M × M/ ≡S is injective. This mapping is clearly ηˆ(M,X).\r
M × S ⊂ ✲ M × M\r
M × S/ ∼S\r
❄❄\r
✲ M × M/ ≡S\r
❄❄\r
We therefore regard MX as a submonoid of T(M∗\r
X)."""

[[sections]]
number = "2.4"
title = "The role of X in the structure of M∗"
text = """
X\r
When exploring possible structures of M ∗\r
X, we don’t have to consider arbitrary\r
subsets X, but only submonoids S, since M∗\r
X = M∗S when S is the submonoid\r
generated by X. When comfortable, we may even restrict our attention to a\r
special class of submonoids: those “closed under division”.\r
Definition 2.11. A submonoid S of M is closed under division if it holds that\r
sx ∈ S ⇒ x ∈ S. (s ∈ S, x ∈ M)\r
Definition 2.12. The divisional closure of a submonoid S of M is the smallest\r
submonoid of M that contains S and is closed under division.\r
Lemma 2.13. S˜ = {x ∈ M | ∃s : sx ∈ S} is the divisional closure of S.\r
Proof. Since es ∈ S, we have s ∈ S˜ and hence S ⊂ S˜.\r
It is obvious that S˜ cannot be smaller, the question is whether it is closed\r
under multiplication and division. Suppose x, y ∈ S˜, say s1x, s2y ∈ S. Then\r
(s1s2)(xy) ∈ S, so that xy ∈ S˜. Hence it is a submonoid of M.\r
To see that it is closed under division, suppose that s˜x ∈ S˜, with s˜ ∈ S˜.\r
Then there is an s with s(sx˜ ) ∈ S. But there is also an s\r
0\r
such that s\r
0\r
s˜ ∈ S.\r
Then ss0s˜ ∈ S and (ss0s˜)x = (ss0)(s˜x) ∈ S, so that x ∈ S˜.\r
This is an algebraic closure operator (in the sense of e.g. [BS81]).\r
Proposition 2.14. M∗\r
X = M∗S = M∗\r
S˜\r
(they are identical as sets and have\r
identical operations).\r
Proof. It is clear by definition of M∗\r
X that it is identical to M∗S\r
. We prove\r
M∗\r
S = M∗\r
S˜\r
.\r
Suppose that [x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S\r
, say (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
).\r
Then, since S ⊂ S˜, [x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S˜\r
. On the other hand, suppose\r
[x, y] = [x\r
0\r
, y\r
0\r
] in M∗\r
S˜\r
, say (x1, x1)(x, y) = (x2, x2)(x\r
0\r
, y\r
0\r
) with x1, x2 ∈ S˜.\r
Then there are by definition of S˜ some s1, s2 ∈ S with s1x1, s2x2 ∈ S. Hence\r
((s1x1)s2,(s1x1)s2)(x, y) = (s1(s2x2), s1(s2x2))(x\r
0\r
, y\r
0\r
), which means that [x, y]\r
= [x\r
0\r
, y\r
0\r
] in M∗\r
S\r
.\r
Thus M∗\r
S\r
and M∗\r
S˜\r
are identical as sets. Their operations are identical since\r
they are defined in the same way."""

[[sections]]
number = "12"
title = "We now investigate the connection between the involution of M∗"
text = """
S\r
and the\r
partial inversion function on its underlying monoid.\r
Proposition 2.15. η(M,X)(x) is ∗-invertible if and only if x belongs to the\r
divisional closure of the submonoid S generated by X.\r
Proof. Let x ∈ S˜, say sx = s\r
0 ∈ S. Then (s, s)(x, x) = (s0\r
, s\r
0\r
)(e, e), so that\r
xx∗ = e in M∗\r
S\r
.\r
On the other hand, suppose xx∗ = e in M∗\r
S\r
, say (s, s)(x, x) = (s\r
0\r
, s\r
0\r
)(e, e).\r
Then sx = s\r
0 ∈ S, so that x ∈ S˜.\r
In particular, we will often (and without explanation) use that ss∗ = e for\r
any s ∈ S.\r
Definition 2.16. A submonoid S ⊂ M is saturated if xy ∈ S ⇒ x, y ∈ S.\r
Example 2.17. The group of units is saturated as a subset of M.\r
Example 2.18. Let S0 = {x ∈ A | xy = xz ⇒ y = z}. It is saturated as a\r
subset of M. We call it “the submonoid of cancellable elements”.\r
Proposition 2.19. M∗\r
S\r
is ∗-invertible if and only if S˜ is saturated in M.\r
Proof. By proposition 2.14 we may assume that S = S˜.\r
Suppose that S is saturated and that [a, b] is a unit in M∗\r
S\r
, say [a, b][a\r
0\r
, b\r
0\r
] =\r
e, which is to say that (s1, s1)(aa0, bb0) = (s2, s2)(e, e) for some s1, s2. Then\r
s1aa0 = s1bb0 = s2 ∈ S, so that a, b ∈ S by saturation. Hence ab ∈ S so that\r
[a, b][a, b]\r
∗ = [ab, ab] = e.\r
Suppose on the other hand that every unit is ∗-invertible and take xy ∈ S.\r
We shall prove x ∈ S. In M∗\r
S\r
, x is a unit with x\r
−1 = y(xy)∗\r
, but then it is\r
∗-invertible by assumption, so that y(xy)\r
∗ = x∗\r
. That means that there are\r
s1, s2 with (s1, s1)(y, xy) = (s2, s2)(e, x), in particular s2x = s1(xy). But xy\r
was taken from S, so we conclude that s2x ∈ S and hence that x ∈ S˜. Since\r
we have assumed that S = S˜, we get x ∈ S. A similar argument proves that\r
y ∈ S.\r
Corollary 2.20. Let U be the group of units in M. Then M∗\r
U\r
is ∗-invertible and\r
it contains M as a submonoid (this solves the problem of finding an extension of\r
M together with an involution extending the partial inversion function of M).\r
Proof. Since U is saturated, M∗\r
U\r
is ∗-invertible by the previous proposition. By\r
corollary 2.9, η(M,U)is injective, since units are cancellable.\r
Proposition 2.21. The restriction to M of the involution of M∗\r
U\r
, is the partial\r
inversion function of M.\r
Proof. The restriction of ∗ to M extends the partial inversion function since M ∗\r
U\r
is ∗-invertible. We shall prove that if x, y ∈ M with y = x\r
∗\r
in M∗\r
U\r
, then xy = e.\r
Suppose therefore that x, y ∈ M and that y = x\r
∗\r
. The latter means that there\r
are units u1, u2 ∈ M with (u1, u1)(y, e) = (u2, u2)(e, x), but then u2x = u1, so\r
that x ∈ U. Hence xx∗ = e, thus xy = e.\r
13"""

[[sections]]
number = "2.5"
title = "The construction as a functor"
text = """
We may turn the construction (M, X) 7→ M∗\r
X into a functor F in the following\r
way.\r
Let C be the category of pairs (M, X) where M is a commutative monoid\r
and X a subset of M. A C-arrow (M, X) → (M 0, X0) is a monoid-morphism\r
ϕ : M → M0 with ϕ(X) ⊂ X0. Define F(M, X) to be M∗\r
X and F(ϕ) to be\r
the mapping [x, y] 7→ [ϕ(x), ϕ(y)]. It is well-defined since if [x, y] = [x\r
0\r
, y\r
0\r
],\r
then there are s1, s2 such that (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
). Since ϕ(X) ⊂ X0,\r
it follows that ϕ(s1) and ϕ(s2) are elements of the submonoid generated by\r
X0. Since (ϕ(s1), ϕ(s1))(ϕ(x), ϕ(y)) = (ϕ(s2), ϕ(s2))(ϕ(x\r
0\r
), ϕ(y\r
0\r
)), it follows\r
that [ϕ(x), ϕ(y)] = [ϕ(x\r
0\r
), ϕ(y\r
0\r
)]. It is easily seen that F(ϕ) is a morphism of\r
involution-monoids. It is now easy to check that F is a functor from C to the\r
category CInvMon of commutative involution-monoids.\r
Proposition 2.22. F has a right adjoint G, which is defined on objects by\r
hM, ∗i 7→ (M, X), with X the set of ∗-units in hM, ∗i, and on morphisms by\r
α 7→ T(α). η is a natural transformation from the identity to GF and it is the\r
unit of the adjunction. The counit is \u000F with \u000FhM,∗i : [x, y] 7→ xy∗.\r
Proof. η(M,X) maps X into the set U of ∗-units, thus is a C-arrow (M, X) →\r
T(M∗\r
X,U). The naturalness is obvious.\r
We have to prove that\r
(\u000FF)(M,X)(Fη)(M,X) = IdM∗\r
X\r
and\r
(G\u000F)hM,∗i(ηF)hM,∗i = IdG(hM,∗i).\r
(\u000FF)(M,X): FG(M∗\r
X) → M∗\r
X by [[x, y], [z, w]] 7→ [xw, yz]\r
(Fη)(M,X): M∗\r
X → FG(M∗X) by [x, y] 7→ [[x, e], [y, e]]\r
(G\u000F)H : GFG(hM, ∗i) → G(hM, ∗i) by [x, y] 7→ xy∗\r
(ηG)H : G(hM, ∗i) → GFG(hM, ∗i) by x 7→ [x, e]\r
Then\r
(\u000FF)(M,X)(Fη)(M,X)([x, y]) = (\u000FF)(M,X)([[x, e], [y, e]]) = [xe, ye] = [x, y]\r
and\r
(G\u000F)hM,∗i(ηG)hM,∗i(x) = (G\u000F)hM,∗i([x, e]) = xe∗ = x.\r
ηˆ(M,X)is a transformation from MX to T(M∗\r
X), natural in (M, X).\r
Remark. Involutions on monoids hM, 0, +i will throughout be de\u0002noted by −. We write −x for x\r
∗\r
in this case. Further, we write x−y\r
for x + (−y).\r
Involutions on monoids hM, 1, ·i will throughout be denoted by /.\r
We write /x for x\r
∗\r
in this case. Further, we write x/y for x · (/y).\r
14"""

[[sections]]
number = "3"
title = "Applications to semirings"
text = """
The consideration of commutative monoids leads naturally to consideration of\r
semirings in the sense of e.g. Golan [Gol99] (we define this notion below, the\r
word ‘semiring’ has no uniform meaning in the literature), in the following way.\r
When addition has been defined on the natural numbers, turning N into\r
a commutative monoid, one finds that N can be used to add, not only finite\r
collections of elements, but also finite collections of equally large finite collections\r
of elements. This motivates the introduction of multiplication on N.\r
The argument in the previous paragraph is an elementary way of saying\r
that N can be viewed as its own endomorphism monoid with multiplication\r
being composition. The combination with addition turns N into a semiring.\r
In general, suppose that M = hM, 0, +i is a commutative monoid. Then its\r
monoid End(M) of endomorphisms has a natural additive structure inherited\r
from M by\r
0(x) = 0,\r
(f + g)(x) = f(x) + g(x).\r
These definitions make End(M) a semiring.\r
Definition 3.1. A semiring is a structure hM, 0, 1, +, ·i such that\r
1. hM, 0, +i is a commutative monoid.\r
2. hM, 1, ·i is a monoid.\r
3. (x + y)z = xz + yz and x(y + z) = xy + xz.\r
4. 0x = x0 = 0.\r
We do not exclude the trivial case 0 = 1.\r
If there is a solution a to the equation 1 + x = 0 in a semiring A, then we\r
may define −x = ax and we get x + (−x) = 1x + ax = (1 + a)x = 0x = 0, so\r
that A is a ring in this case.\r
Beside the important example End(M), we have many mathematical struc\u0002tures that are semirings, for instance:"""

[[sections]]
number = "1"
title = "Any ring with identity."
text = ""

[[sections]]
number = "2"
title = "The (left or right) ideals of a ring, with I + J defined to be {i + j | i ∈"
text = """
I, j ∈ J} and IJ defined to be the (left or right) ideal generated by\r
{ij | i ∈ I, j ∈ J}. 0 is the trivial ideal and 1 is the improper ideal.\r
3. Any bounded distributive lattice, e.g. Heyting algebras and Boolean alge\u0002bras. Here h0, 1, +, ·i is h⊥, >, ∨, ∧i.\r
We need some definitions, which are taken from [Gol99], except that we\r
use the word ‘module’ for what there is called ‘semimodule’. The reason for\r
this choice is that ‘module’ is shorter and we see no point in distinguishing\r
the notions since if A happens to be a ring, then an A-module in the following\r
sense is automatically an A-module in the sense of rings, since if we define\r
−m = (−1)m, then m + (−m) = (1 + (−1))m = 0m = 0."""

[[sections]]
number = "15"
title = "Definition 3.2. Let A be a semiring. A left A-module is a commutative monoid"
text = """
hM, 0, +i with multiplication by A-elements to the left defined (formally, a func\u0002tion A×M → M written (a, m) 7→ am) such that for any a, a\r
0 ∈ A, m, m0 ∈ M,\r
(aa0)m = a(a\r
0m)\r
1m = m\r
(a + a\r
0\r
)m = am + a\r
0m\r
a(m + m0) = am + am0\r
0m = 0\r
a0 = 0\r
where 0 to the left is in A, while 0 to the right or alone is in M.\r
Every commutative monoid hM, e, ·i is an N-module with the multiplication\r
(n, m) 7→ mn. This is in analogy with the fact that every abelian group is a\r
Z-module.\r
Definition 3.3. A left ideal of A is a left A-module inside A; i.e., it is a\r
submonoid of the additive monoid of A and it is closed under multiplication to\r
the left by any element from A."""

[[sections]]
number = "7"
title = "The notions of right A-module and right ideal are defined analogously."
text = ""

[[sections]]
number = "3.1"
title = "Applications to additive monoids of semirings"
text = """
We show how our construction can be used for extending a semiring so that an\r
additive involution − can be defined on the result. The process is similar to the\r
construction of Z from N, but it does not need that all elements are additively\r
cancellable.\r
The idea is that we first apply our construction to the additive monoid, then\r
defining multiplication on the result.\r
Suppose that hA, 0, +i is the additive monoid of a semiring A and that X is\r
a subset. Let S be the right ideal generated by X; i.e., S consists of all finite\r
sums\r
X\r
i\r
xiai (xi ∈ X, ai ∈ A).\r
We use the construction hA, 0, +i\r
∗\r
S\r
, given in section 2.2, writing −x for x\r
∗\r
.\r
In section 2.2, we noted that each element of M∗\r
X is of the form xy∗\r
for x, y ∈ M;\r
the corresponding statement now is that each element is of the form x + (−y),\r
which will be written as x−y. Such elements x−y and x\r
0−y0\r
(with x, y, x\r
0\r
, y\r
0 ∈\r
A) are equal when there exists s, s\r
0 with (s, s)+(x, y) = (s0\r
, s\r
0\r
)+(x\r
0\r
, y\r
0\r
) in A×A\r
(in particular, 1−1 = 0 holds precisely when there is some s such that s+1 ∈ S,\r
see proposition 2.15).\r
We now define a ‘multiplication’ by\r
(x − y)(z − w) = (xz + yw) − (xw + yz). (x, y, z, w ∈ A)\r
7We accept improper ideals, which [Gol99] does not. This is natural since we accept trivial\r
semirings."""

[[sections]]
number = "16"
title = "It is well-defined, since if x − y = x"
text = """
0 − y0\r
, then there are s, s\r
0 ∈ S with (s, s) +\r
(x, y) = (s\r
0\r
, s\r
0\r
) + (x\r
0\r
, y\r
0\r
) in A × A, so that\r
(sx0 + sy0, sx0 + sy0) + (xz + yw, xw + yz)\r
= ((s + x)z + (s + y)w,(s + x)w + (s + y)z)\r
= ((s\r
0 + x0\r
)z + (s\r
0 + y0\r
)w,(s\r
0 + x0\r
)w + (s\r
0 + y0\r
)z)\r
= (s\r
0\r
z + s\r
0w, s0w + s0\r
z) + (x\r
0\r
z + y\r
0w, x0w + y0\r
z)\r
and since S is a right ideal, sx0 + sy0 ∈ S and s\r
0\r
z + s\r
0w ∈ S. Hence (xz + yz) −\r
(xw + yz) = (x\r
0\r
z + y\r
0\r
z) − (x\r
0w + y0\r
z).\r
The structure obtained, together with the constant 1, will be denoted by A\r
−\r
X.\r
It is clearly a semiring: indeed, it is a quotient of A\r
−\r
∅ which is the ‘convolution\r
algebra’, or ‘monoid-semiring’, on A defined by the monoid {1, −1}."""

[[sections]]
number = "8"
title = "A natural"
text = """
morphism η(A,X): A → A\r
−\r
X is given by η(A,X)(x) = η(hA,0,+i,X)(x) = x.\r
Example 3.4. Z = N\r
−\r
N\r
.\r
Example 3.5. An example when 1−1 6= 0 is obtained by thinking of machines\r
not capable of counting with elements larger than the natural number N.\r
Let ∼ be defined on N as “equal or large”, formally:\r
x ∼ y means x = y ∨ (x ≥ N ∧ y ≥ N).\r
Then ∼ is a congruence relation and N/∼ consists of N + 1 elements. Since\r
no element except 0 is additively cancellable, we can’t introduce an additive\r
inverse, but we may construct (N/∼)\r
−\r
∅\r
, in which 1 − 1 6= 0.\r
Now, consider (N/∼)×(Z/7Z) (it can be thought of as a data structure with\r
elements being pairs representing numbers together with a day of the week). An\r
element (x, y) of it is additively cancellable if and only if x = 0. Let S0 be the\r
set of such elements. It holds in ((N/∼) × (Z/7Z))−\r
S0\r
that (0, x) − (0, x) = 0,\r
but not that 1 − 1 = 0.\r
Example 3.6. Let N∞ be N extended with an element ∞ with\r
x + ∞ = ∞ + x = ∞\r
x∞ = ∞x =\r
(\r
0 (x = 0)\r
∞ (x 6= 0).\r
This notion of infinity differs from that in the introduction, since here we have\r
0∞ = 0, while we had 0∞ = ⊥ in the introduction.\r
N∞ is clearly a semiring, thus we may construct (N∞)\r
−\r
X . However, if a ∈ X\r
for some a 6= 0, then ∞ is an element of the right ideal generated by X, hence\r
(N∞)\r
−\r
X is trivial, since (∞, ∞) + (x, y) = (∞, ∞) + (x\r
0\r
, y\r
0\r
) for all x, y, x\r
0\r
, y"""

[[sections]]
number = "0"
title = "Hence, if we want non-triviality, we need to take X ⊂ {0}, ending up with the"
text = """
structure (N∞)\r
−\r
∅\r
. In that structure, x − x = 0 is true only for x = 0.\r
The operation − makes A\r
−\r
X a semiring−:\r
8See [Gol99, example 3.3, p. 29]. The notation is different."""

[[sections]]
number = "17"
title = "Definition 3.7. A semiring− is a semiring with an additive involution − such"
text = """
that\r
−x = (−1)x = x(−1).\r
A homomorphism of semirings− is a semiring homomorphism which also pre\u0002serves −.\r
One could also describe a semiring− as a semiring with a constant −1 such\r
that (−1)(−1) = 1 and (−1)x = x(−1) for all x. An involution with the required\r
properties is then given by −x = (−1)x.\r
Note that a ring is precisely a semiring− in which 1 − 1 = 0 holds. Then\r
x − x = (1 − 1)x = 0x = 0 for all x.\r
The construction solves the following universal problem. Let T be the func\u0002tor which forgets the − of semirings−, turning them into semirings.\r
Theorem 3.8. Suppose that A is a semiring and X a subset of it. Suppose\r
also that B is a semiring− and ϕ : A → T(B) a semiring morphism such\r
that ϕ(x) − ϕ(x) = 0 for all x ∈ X. Then there exists a unique morphism\r
ϕˆ : A\r
−\r
X → B of semirings− such that ϕ = T(ϕˆ) ◦ η(A,X)\r
.\r
T(A\r
−\r
X)\r
\r
\r
\r
\r
\r
η(A,X)\r
✒ ❅\r
❅\r
❅\r
❅\r
❅\r
T(ϕˆ)\r
❘\r
A\r
ϕ ✲ T(B)\r
Proof. Note first that if s ∈ S, then ϕ(s) − ϕ(s) = 0, since\r
ϕ(\r
X\r
i\r
xiai) − ϕ(\r
X\r
i\r
xiai) =\r
X\r
i\r
(ϕ(xi) − ϕ(xi))ϕ(ai)\r
=\r
X\r
i\r
(0ϕ(ai)) = 0.\r
Hence, we may replace X by S everywhere in the statement of the theorem.\r
Then theorem 2.7 gives the unique candidate ϕˆ : [x, y] 7→ ϕ(x)−ϕ(y) and proves\r
that it preserves 0, +, −. It also preserves 1, since ϕˆ(1) = ϕˆ([1, 0]) = ϕ(1) = 1.\r
Preservation of multiplication is checked thus: Let x, y, z, w ∈ A.\r
ϕˆ((x − y)(z − w)) = ϕˆ((xz + yw) − (xw + yz))\r
= ϕ(xz + yw) − ϕ(xw + yz)\r
= ϕ(x)ϕ(z) + ϕ(y)ϕ(w) − (ϕ(x)ϕ(w) + ϕ(y)ϕ(z))\r
= (ϕ(x) − ϕ(y))(ϕ(z) − ϕ(w))\r
= ϕˆ(x − y)ϕˆ(z − w).\r
The rules −x = (−1)x = x(−1) were applied in the fourth step.\r
18"""

[[sections]]
number = "3.2"
title = "Applications to multiplicative monoids of commuta\u0002tive semirings"
text = """
In the following, all monoids and semirings are assumed to be com\u0002mutative (a semiring is commutative if + and · are commutative).\r
When we use notions like units, divisional closures etc., we refer to\r
the multiplicative monoid (when nothing else is stated).\r
We will sometimes write x\r
y\r
for x/y.\r
Given a commutative semiring, one may first apply the construction to the\r
additive monoid, introducing an additive involution as was explained in the\r
previous section. One may then continue by applying the construction to the\r
multiplicative monoid, introducing also a multiplicative involution /. We show\r
in this section how that second step is carried out. It is not necessary that\r
an additive involution is present, one may as well start from a plain semiring.\r
However, if both − and / are wanted, then − should be constructed first, since\r
the result of the construction in this section will not be a semiring anymore.\r
In section 1.2, it was sketched how this construction is made. We there\r
supposed that it was applied to a ring, but semirings work as well. We now\r
show that the choice of definition of + was not arbitrary, it is the unique choice\r
which yields a functorial definition (using some very general conditions). More\r
precisely, let M be the multiplicative monoid of a semiring. Then there is a\r
unique way of defining on M∗\r
X a binary operation + with neutral element 0,\r
such that the functor F : M 7→ M∗\r
X acts functorially also with respect to 0 and\r
+ and such that η(M,X) preserves also these operations.\r
Technically, we state it in the theorem below. We need some preliminaries.\r
Definition 3.9. Let C0be the category with objects (A, X) where A is a (com\u0002mutative) semiring and X a subset of it. An arrow (A, X) → (A0\r
, X0) is a\r
semiring morphism ϕ : A → A0 with ϕ(X) ⊂ X0.\r
Note that there is a forgetful functor T1 : C0 → C (the category C was\r
defined on page 14), forgetting the additive structure.\r
Definition 3.10 (weak wheel). A weak wheel is a structure hH, 0, 1, +, ·, /i\r
with hH, 1, ·, /i a commutative involution-monoid and 0 neutral for +, i.e. 0 +\r
x = x + 0 = x.\r
Let T2 be the forgetful functor (forgetting 0 and +) from the category WW\r
of weak wheels to the category CInvMon of commutative involution-monoids.\r
Theorem 3.11. There is a unique functor F\r
0\r
: C0 → WW such that the\r
diagram\r
C\r
0 F\r
0\r
✲ WW\r
C\r
T1\r
❄ F ✲ CInvMon\r
T2\r
❄\r
19

commutes and such that, for each (A, X), there is an operation-preserving func\u0002tion η(A,X) which makes the following diagram commute (here M is the multi\u0002plicative monoid of A).\r
(A, X)\r
η(A,X) ✲ F\r
0\r
(A, X)\r
(M, X)\r
x 7→ x\r
❄ η(M,X) ✲ M∗\r
X\r
x 7→ x\r
❄\r
Proof. There is a unique possible definition of η(A,X): by the lower diagram,\r
F\r
0\r
(A, X) is M∗\r
X with additional structure (with the notation / instead of ∗ and\r
with ‘\r
x\r
y\r
’ sometimes denoting x/y), so that we must have η(A,X)(x) = η(M,X)(x).\r
We therefore define η(A,X) as x 7→ η(M,X)(x). We then have what is needed to\r
check that the lower diagram commutes, but it is not clear that η(A,X) preserves\r
the operations, since 0 and + have not yet been defined.\r
Preservation of 0 requires that 0 be defined in F\r
0\r
(A, X) as η(A,X)(0), which\r
has to be η(M,X)(0) by the previous paragraph. We therefore make this defi\u0002nition. Note that it is compatible with our general use of the notation ‘x’ for\r
η(M,X)(x).\r
It remains to investigate how + must be defined in order for η(A,X) to pre\u0002serve + and for the upper diagram to commute.\r
Uniqueness:\r
The requirement that + be preserved by η(A,X) means that there should be\r
no difference between η(A,X)(x) + η(A,X)(y) and η(A,X)(x + y). Thus, we may\r
safely use the notation ‘x + y’ for both.\r
We have to know how F\r
0 must act on arrows. Let ϕ be an arrow in C0\r
. How\r
F\r
0\r
(ϕ) acts on elements is given by how it acts after the forgetful functor T2 has\r
been applied. We have for x, y ∈ A that ((T2F\r
0\r
)(ϕ))(x/y) = ((FT1)(ϕ))(x/y) =\r
ϕ(x)/ϕ(y).\r
Consider N[x1, x2, x3, x4], the semiring of polynomials in {x1, x2, x3, x4}\r
with natural numbers as coefficients.9 Clearly, in F\r
0\r
(N[x1, x2, x3, x4], ∅), we\r
have\r
x1\r
x2\r
+\r
x3\r
x4\r
=\r
p(x1, x2, x3, x4)\r
q(x1, x2, x3, x4)\r
for some pair of polynomials (p, q) with natural numbers as coefficients. For\r
any (A, X) in C0 and any a1, a2, a3, a4 ∈ A, there is a unique morphism ϕ :\r
(N[x1, x2, x3, x4], ∅) → (A, X) with ϕ(xi) = ai, hence\r
a1\r
a2\r
+\r
a3\r
a4\r
=\r
ϕ(x1)\r
ϕ(x2)\r
+\r
ϕ(x3)\r
ϕ(x4)\r
= (F\r
0\r
(ϕ)) \u0012\r
x1\r
x2\r
+\r
x3\r
x4\r
\u0013\r
= (F\r
0\r
(ϕ)) \u0012\r
p(x1, x2, x3, x4)\r
q(x1, x2, x3, x4)\r
\u0013\r
=\r
ϕ(p(x1, x2, x3, x4))\r
ϕ(q(x1, x2, x3, x4))\r
=\r
p(a1, a2, a3, a4)\r
q(a1, a2, a3, a4)\r
.\r
9We use x1, x2, x3, x4 as formal symbols, distinguishing them from variables x1, x2, x3, x4."""

[[sections]]
number = "20"
title = "So, addition has to be defined by p and q in F"
text = """
0\r
(A, X), for any choice of (A, X).\r
The polynomials p and q are homogeneous of the same degree, since in F\r
0\r
(N, {2})\r
we must have (for x, y, z, w ∈ N)\r
p(2x, 2y, 2z, 2w)\r
q(2x, 2y, 2z, 2w)\r
=\r
2x\r
2y\r
+\r
2z\r
2w\r
=\r
2\r
2\r
·\r
x\r
y\r
+\r
2\r
2\r
·\r
z\r
w\r
= 1 ·\r
x\r
y\r
+ 1 ·\r
z\r
w\r
=\r
x\r
y\r
+\r
z\r
w\r
=\r
p(x, y, z, w)\r
q(x, y, z, w)\r
so that there exist n, m with\r
(2n, 2\r
n\r
)(p(2x, 2y, 2z, 2w), q(2x, 2y, 2z, 2w)) =\r
(2m, 2\r
m)(p(x, y, z, w), q(x, y, z, w)).\r
But then p and q must be homogeneous of degree m − n.\r
We now compute q. Since the η(A,X) are required to preserve +, we must\r
have\r
x\r
1\r
+\r
y\r
1\r
=\r
x + y\r
1\r
so that q(x, 1, z, 1) = 1. Hence q(x, y, z, w) = y\r
iwj\r
for some i, j with i + j =\r
m − n. Since 0 is required to be neutral for +, we must also have\r
x\r
y\r
+\r
0\r
1\r
=\r
x\r
y\r
,\r
0\r
1\r
+\r
z\r
w\r
=\r
z\r
w\r
,\r
hence q(x, y, 0, 1) = y and q(0, 1, z, w) = w. Hence i = j = 1 and we conclude\r
that q(x, y, z, w) = yw.\r
We now compute p, which has to be homogeneous of degree 2, as q is.\r
Preservation of + gives (see above) that p(x, 1, z, 1) = x+z, hence p(x, y, z, w) =\r
xykw\r
1−k+zy`w1−`\r
for some k, ` ∈ {0, 1}. That 0 is neutral gives p(x, y, 0, 1) = x\r
and p(0, 1, z, w) = z, hence k = 0 and ` = 1, so that p(x, y, z, w) = xw + yz.\r
Existence:\r
Let F\r
0\r
(A, X) be M∗\r
X (again with the notation / instead of ∗ and with ‘\r
x\r
y\r
’\r
sometimes denoting x/y) with 0 = [0, 1] and + defined as\r
x\r
y\r
+\r
z\r
w\r
=\r
xw + yz\r
yw\r
. (x, y, z, w ∈ A)\r
It is well-defined, since if x\r
0\r
, y\r
0\r
, z\r
0\r
, w\r
0 ∈ A and x0/y0 = x/y and z0/w0 = z/w,\r
then there are s1, s2, s3, s4 with (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and (s3, s3)(z, w)\r
= (s4, s4)(z\r
0\r
, w\r
0\r
), hence\r
x\r
0w0 + y0\r
z\r
0\r
y\r
0w0\r
=\r
s2s4\r
s2s4\r
·\r
x\r
0w0 + y0\r
z\r
0\r
y\r
0w0\r
=\r
s2x\r
0\r
s4w\r
0 + s2y0\r
s4z\r
0\r
s2y\r
0s4w0\r
=\r
s1xs3w + s1ys3z\r
s1ys3w\r
=\r
s1s3\r
s1s3\r
·\r
xw + yz\r
yw\r
=\r
xw + yz\r
yw\r
.\r
If ϕ : (A, XA) → (B, XB) is a C0-arrow, then let F\r
0\r
(ϕ) be x/y 7→ ϕ(x)/ϕ(y)\r
(for x, y ∈ A). Let us check that it is well-defined. Let SA be the multiplicative\r
monoid generated by XA and SB the one generated by XB. That ϕ is a C0-\r
arrow means that ϕ(XA) ⊂ XB, hence ϕ(s) ∈ SB for all s ∈ SA, so that every\r
21

ϕ(s) is /-invertible in F\r
0\r
(B, X). Suppose x/y = x\r
0/y0 with x0\r
, y\r
0 ∈ A. That\r
means that there are s, s\r
0 ∈ S such that (s, s)(x, y) = (s0\r
, s\r
0\r
)(x\r
0\r
, y\r
0\r
) and hence\r
ϕ(x\r
0\r
)\r
ϕ(y\r
0)\r
=\r
ϕ(s\r
0\r
)\r
ϕ(s\r
0)\r
·\r
ϕ(x\r
0\r
)\r
ϕ(y\r
0)\r
=\r
ϕ(s\r
0\r
)ϕ(x\r
0\r
)\r
ϕ(s\r
0)ϕ(y0)\r
=\r
ϕ(s\r
0x0\r
)\r
ϕ(s\r
0y0)\r
=\r
ϕ(sx)\r
ϕ(sy)\r
=\r
ϕ(s)ϕ(x)\r
ϕ(s)ϕ(y)\r
=\r
ϕ(s)\r
ϕ(s)\r
·\r
ϕ(x)\r
ϕ(y)\r
=\r
ϕ(x)\r
ϕ(y)\r
.\r
F\r
0\r
is now clearly a functor.\r
According to the proof of this theorem, the construction of wheels of frac\u0002tions, as given in section 1.2, is in a sense the most well-behaving one can\r
have as a solution to the problem of making division a total function. We used\r
the category WW as a tool for showing that, and we will not need this cate\u0002gory anymore, neither the functor F\r
0\r
, as defined in the proof above. Instead,\r
we use the full subcategory Wheel, with objects being the wheels (definition\r
1.1). We regard \f as a functor C0 → Wheel, given by (A, X) 7→ \fXA and\r
ϕ 7→ (x/y 7→ ϕ(x)/ϕ(y)) (it is easy to verify that wheels of fractions are indeed\r
wheels). The full subcategory of wheels of fractions will be denoted by WF.\r
Note that \fXA is defined for any commutative semiring A, not only for\r
rings as was the case in section 1.2.\r
Example 3.12. \f∅N is the initial object in Wheel.\r
Example 3.13. \fN\\{0}N is the wheel which is obtained from the semiring of\r
non-negative rational numbers by adjoining two extra elements 1/0 and 0/0.\r
The next proposition shows that the wheels of fractions are special among\r
the wheels and the theorem that follows states that these rules characterize\r
wheels of fractions completely up to isomorphism.\r
Proposition 3.14. Any wheel of fractions is a wheel (definition 1.1 on page 5)\r
and it holds in it that\r
1. ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0,\r
2. ∀x∀y∀x\r
0∀y0\r
: (x/y = x\r
0/y0 ∧0x = 0y = 0x0 = 0y0 = 0 ⇒ ∃z : x = zx0 ∧y =\r
zy\r
0 ∧ 0z = 0/z = 0).\r
Proof. That a wheel of fractions is a wheel is straight-forward to check.\r
To show ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0, use that every element x ∈ \fXA\r
is of the form y/z, where y, z ∈ A.\r
See theorem 4.16 for the proof of 2.\r
Theorem 3.15 (completeness for wheels of fractions). A wheel is iso\u0002morphic to a wheel of fractions if and only if it has the properties given in the\r
previous proposition.\r
Proof. See theorem 4.16.\r
Remark. We refer in the proofs to theorem 4.16 which is not\r
yet given. There is no risk for circular reasoning, since we will not\r
use these results for deriving others, just for constructions of some\r
examples.\r
We state them now because it is good to know a complete axioma\u0002tization in order to understand the class of structures under consid\u0002eration.\r
22"""

[[sections]]
number = "4"
title = "Wheels"
text = """
Since the class of wheels is defined by a set of equations (it is an ‘equational\r
class’), it follows that substructures of wheels are wheels (‘subwheels’), that\r
homomorphic images of wheels are wheels, and that products of wheels are\r
wheels (for formal definitions, see some textbook in universal algebra, e.g. [BS81,\r
Gr¨a79]). It is also complete and cocomplete as a category (see [Bor94, p. 138]).\r
The corresponding is however not true for wheels of fractions: there are\r
such which have subwheels or quotients that are not isomorphic to any wheel\r
of fractions.\r
Example 4.1. Let A be the ring of functions Z × Z → Z, with the operations\r
defined point-wise. Let x be the element [π1, π2] of \f∅A, with π1(x, y) = x and\r
π2(x, y) = y. Let H be the subwheel generated by x, i.e., the elements of H\r
are those which are given by terms composed of (zero or more occurrences of)\r
x and the operations. We will show that ∀x∃y∃z : x = y/z ∧ 0y = 0z = 0 fails\r
to hold in H. We do that by showing that for any y, z ∈ H with 0y = 0z = 0,\r
we have x 6= y/z.\r
Every element [f, g] of \f∅A defines a function Z×Z → Z×Z by [f, g](x, y) =\r
(f(x, y), g(x, y)). x defines the identity function. Note that\r
x(0, 0) = (0, 0)\r
(x + [f, g])(0, 0) = (0, 0)\r
(x · [f, g])(0, 0) = (0, 0)\r
(/x)(0, 0) = (0, 0)\r
so that the elements of H which are given by terms in which x occurs at least\r
once, define functions which takes the value (0, 0) in at least one point.\r
Suppose 0y = 0z = 0 and y, z ∈ H. Take f, g such that y = [f, g]. Then\r
0y = [0, g] = [0, 1], but then g = 1 and hence y = [f, 1], so that y defines a\r
function that does not take (0, 0) as value. Hence y is described by a term\r
which does not contain x. The same argument applies to z. But then y/z is\r
described by a term which does not contain x, so that y/z defines a constant\r
function. Then x 6= y/z, since the function defined by x is not constant.\r
Hence H is not isomorphic to any wheel of fractions.\r
Example 4.2. Let H = \f{1,3}(Z/4Z) and define the congruence relation\r
x ≡ y means x = y ∨ x, y ∈ {0/0, 0/2, 2/0, 2/2}.\r
Then the rule ∀x, y, x\r
0\r
, y\r
0\r
: (x/y = x\r
0/y0 ∧ 0x = 0y = 0x0 = 0y0 = 0 ⇒ ∃z : x =\r
zx\r
0 ∧ y = zy0 ∧ 0z = 0/z = 0) fails in H/ ≡, since 0/0 = 2/2, but 2 6= z0 for\r
every z.\r
Hence H/ ≡ is not isomorphic to any wheel of fractions.\r
Hence, the class of wheels isomorphic to wheels of fractions is not axiomatiz\u0002able by equations. It is therefore not an accident that we needed non-equational\r
rules to characterize (up to isomorphism) the wheels of fractions among the\r
wheels.\r
It is not satisfactory to work in a class that is not closed under such opera\u0002tions, sooner or later one is lead to consider constructions like those given above.\r
23

Also, it is not satisfactory to succeed in making division total, but introducing\r
partiality of important class operations.\r
That is the reason why we choose to study wheels, instead of wheels of\r
fractions only.\r
10"""

[[sections]]
number = "4.1"
title = "Basic properties"
text = """
We devote some pages to an abstract study of wheels (definition 1.1, p. 5).\r
Wheels of fractions are studied more in section 4.2.\r
Remember that the distributivity rule (3) for wheels looks different from the\r
one for rings (or semirings). However, when 0z = 0, it gives that (x + y)z =\r
xz + yz. We emphasize this fact now once and for all, in the following we will\r
apply it freely in computing things like 0(x + y) = 0x + 0y.\r
Proposition 4.3 (derived rules). The following rules hold in wheels:\r
/1 = 1 (9)\r
0x + 0y = 0xy (10)\r
(0/0)x = 0/0 (11)\r
x/x = 1 + 0x/x (12)\r
xz = yz ⇒ x + 0z/z = y + 0z/z. (13)\r
Proof. (9) Since / is an involution. To repeat the argument: /1 = 1/1 =\r
//1/1 = /(/1 · 1) = //1 = 1.\r
(10) 0x + 0y\r
(6)\r
= (0 + 0y)x = 0xy.\r
(11) (0/0)x = 0x/0\r
(10)\r
= 0x + 0/0\r
(8)\r
= 0/0.\r
(12) x/x = (0 + x · 1)/x (4)= 0/x + 1 + 0x\r
(10)\r
= 1 + 0x/x.\r
(13) One should really learn to do without implicational rules like this, but we\r
state it since it is characteristic for computations in wheel algebra.\r
xz = yz\r
xz/z = yz/z\r
x(1 + 0z/z) = y(1 + 0z/z) by (12)\r
x + 0z/z = y + 0z/z. by (6)\r
Note that by (8) and (11), a term is equal to ‘0/0’ if it contains ‘0/0’ as a\r
subterm.\r
A notion of negation can sometimes be introduced. If H is a wheel and\r
a ∈ H with 0a = 0 and a\r
2 = 1, then − : x 7→ ax is an additive involution since\r
a(x + y) = (x + y)a + 0a = xa + ya = ay + ax and aax = 1x = x. There are at\r
least three natural ways in which such an a can appear.\r
1. a = 1. This gives the identity (thus not an interesting involution to use).\r
10See section 4.3 for further comments on the choice of axioms\r
24"""

[[sections]]
number = "2"
title = "If H = \fXA with A a semiring−. Then a = −1 gives an involution which"
text = "extends the − of A. If A is a ring, then this case coincides with the next."

[[sections]]
number = "3"
title = "If a is a solution to the equation 1+x = 0, then 0a = 1·0+a·0 = (1+a)0 ="
text = """
0·0 = 0 and a\r
2 = 1+a+a2 = 1+(1+a)a+0a = 1+0a+0a = 1+0+0 = 1.\r
With this choice of a, we have the nice formula\r
x − x = 0x\r
2\r
,\r
since x − x = 1x + ax = (1 + a)x + 0x = 0x + 0x = 0x"""

[[sections]]
number = "2"
title = "The wheel of fractions \f∅(Z/2Z) is the (up to isomorphism unique) smallest"
text = """
non-trivial wheel, since it contains only four elements:\r
Proposition 4.4. If any two of the elements 0, 1, /0 and 0/0 are equal in a\r
wheel H, then H is trivial.\r
Proof. There are six cases to go through.\r
0 = 1 Then 1 = 1/1 = 0/0. See below for the rest.\r
0 = /0 Then 0 = 0 · 0 = 0/0. See below.\r
0 = 0/0 Then x = 0 + x = 0/0 + x = 0/0.\r
1 = /0 Then 1 = 1/1 = /0//0 = 0/0. See below.\r
1 = 0/0 Then x = 1x = (0/0)x = 0/0.\r
/0 = 0/0 Then x = 0 + x = //0 + x = /(0/0) + x = 0/0 + x = 0/0.\r
The two notions of reciprocal and multiplicative inverse are connected by\r
the operations 0, + as follows.\r
Proposition 4.5. Let x be a unit.\r
1. x\r
−1 + 0/x = /x + 0x−1\r
.\r
2. x\r
−1 = /x + 0\r
x\r
−1\r
x−1 .\r
3. /x = x\r
−1 + 0\r
x\r
x\r
.\r
Proof. 1. x\r
−1 + 0/x = x−1/(xx−1\r
) + 0/x = /x + 0x\r
−1/(xx−1\r
) = /x + 0x\r
−1\r
."""

[[sections]]
number = "2"
title = "Add 0/(x"
text = """
−1\r
) to each side of 1."""

[[sections]]
number = "3"
title = "Add 0x to each side of 1."
text = """
Note also that if xy is /-invertible, then x and y are units with x\r
−1 =\r
y/(xy) = /x + 0y/y and y\r
−1 = x/(xy) = /y + 0x/x.\r
We may construct a right adjoint to the functor \f in the following steps.\r
Definition 4.6. Let H be a wheel. Then define the following subsets:\r
RH = {x | 0x = 0},\r
SH = {x | 0x = 0/x = 0}."""

[[sections]]
number = "25"
title = "Proposition 4.7. RH is a semiring under the operations 0, 1, + and ·. SH"
text = """
is a multiplicative group in RH.\r
Proof. Suppose that x, y ∈ RH. Then\r
1. 0(x + y) = 0(x + y) + 0 · 0 = 0x + 0y = 0 + 0 = 0,\r
2. 0(xy) = (0x)y = 0y = 0.\r
Thus RH is closed under addition and multiplication. 0 ∈ RH by (5) and\r
1 ∈ RH since 1 is the identity in the multiplicative monoid.\r
That SH is closed under multiplication follows from the fact that if x, y ∈\r
SH, then 0/(xy) = (0/y)/x = 0/x = 0. We have 1 ∈ SH by (9). Given\r
an element x ∈ SH, then /x ∈ SH (since / is an involution) and it is the\r
multiplicative inverse of x by the computation x/x = 1+0x/x = 1+0/x = 1.\r
We will use the notation RH also for the semiring it becomes when the\r
operations 0, 1, +, · are induced by H. It will be called ‘the semiring of H’ or\r
simply ‘the semiring’ when the context is clear. It is the largest semiring in H\r
since 0x = 0 holds in any semiring.\r
Remarks. We showed that every element of SH is /-invertible. On\r
the other hand, SH contains every /-unit that is inside the subset\r
RH, since if x is /-invertible and 0x = 0, then 0/x = 0x/x = 0·1 = 0.\r
An element of RH is a unit in RH iff it is a unit in H. To see\r
this, note that if x ∈ RH and xy = 1, then also y ∈ RH, since\r
0y = 0xy = 0 · 1 = 0.\r
The question whether x ∈ H is a unit or not is partially answered\r
by the information whether or not x ∈ RH and/or /x ∈ RH:\r
x ∈ RH? /x ∈ RH? x unit? x /-unit?\r
No No ⇒ Maybe Maybe\r
Yes No ⇒ Maybe No\r
No Yes ⇒ Maybe No\r
Yes Yes ⇒ Yes Yes\r
Let us consider η(A,X): x 7→ [x, 0] as a C0-arrow (A, X) → (R\fXA, S\fXA),\r
which we may do since, if x ∈ X, then 0/η(A,X)(x) = [0, 1]/[x, 1] = [0, x] =\r
[0, 1] = 0, so that η(A,X)(X) ⊂ S\fXA.\r
Let (R, S) be the functor Wheel → C0 given by (R, S)(H) = (RH, SH)\r
and (R, S)(ϕ) being the restriction of ϕ to RH. This works since if 0x = 0,\r
then 0ϕ(x) = ϕ(0)ϕ(x) = ϕ(0x) = ϕ(0) = 0 (thus ϕ actually maps the semiring\r
of the domain into the semiring of the codomain), and if in addition 0/x = 0,\r
then 0/ϕ(x) = ϕ(0)/ϕ(x) = ϕ(0/x) = ϕ(0) = 0 (thus (R, S)(ϕ) behaves as it\r
should with respect to S).\r
Theorem 4.8. The functor \f : C0 → Wheel is left adjoint to (R, S) :\r
Wheel → C0 with unit η and counit \u000F, given by \u000FH : [x, y] 7→ x/y.\r
Proof. \u000FH is well-defined since if [x, y] = [x\r
0\r
, y\r
0\r
], then there exist s1, s2 ∈ SH\r
such that (s1, s1)(x, y) = (s2, s2)(x\r
0\r
, y\r
0\r
) and hence x/y = (x/y)(1 + 0s1/s1) =\r
26

(s1x)/(s1y) = (s2x\r
0\r
)/(s2y\r
0\r
) = (x\r
0/y0\r
)(1 + 0s2/s2) = x\r
0/y0\r
. It is easily seen that\r
\u000F is a natural transformation.\r
By basic category theory, the result follows if we show that for any C-object\r
(A, X) and any wheel H, we have\r
11\r
(\u000F\f)(A,X)(\fη)(A,X) = Id\fX A\r
and\r
((R, S)\u000F)H (η(R, S))H = Id(RH,SH).\r
(\u000F\f)(A,X): \fS\fX AR\fXA → \fXA by [[x, y], [z, w]] 7→ [xw, yz]\r
(\fη)(A,X): \fX A → \fS\fX AR\fXA by [x, y] 7→ [[x, 1], [y, 1]]\r
((R, S)\u000F)H : (R\fSHRH, S\fSHRH) → (RH, SH) by [x, y] 7→ x/y\r
(η(R, S))H : (RH, SH) → (R\fSHRH, S\fSHRH) by x 7→ [x, 1]\r
Then\r
(\u000F\f)(A,X)(\fη)(A,X)([x, y]) = (\u000F\f)(A,X)([[x, 1], [y, 1]]) = [x · 1, y · 1] = [x, y]\r
and\r
((R, S)\u000F)H (η(R, S))H (x) = ((R, S)\u000F)H ([x, 1]) = x/1 = x."""

[[sections]]
number = "4.2"
title = "Applications to wheels of fractions"
text = ""

[[sections]]
number = "4.2.1"
title = "The semiring in a wheel of fractions"
text = """
The following fact will be used freely without reference to the proposition.\r
Proposition 4.9. If x ∈ A, then 0/x = 0 in \fXA if and only if x ∈ S˜, which\r
is the divisional closure of S, which is the multiplicative monoid generated by\r
X.\r
Proof. Proposition 2.15 gives us that x/x = 1 is equivalent to x ∈ S˜. We need\r
to prove x/x = 1 ⇐⇒ 0/x = 0 under the condition 0x = 0.\r
Suppose x/x = 1. Then 0/x = 0x/x = 0 · 1 = 0.\r
Suppose 0/x = 0. Then x/x = 1 + 0x/x = 1.\r
The elements of R\fXA are of a very special form:\r
Lemma 4.10. x ∈ R\fXA iff x = r/s for some r ∈ A, s ∈ S, with S the\r
multiplicative monoid generated by X.\r
Proof. If x = r/s, then 0x = 0r/s = 0/s = 0. On the other hand, suppose that\r
0x = 0, say with x = y/z (y, z ∈ A). Then 0/z = 0x = 0, so that z ∈ S˜, say\r
s\r
0\r
z ∈ S. With r = s\r
0y, s = s0\r
z, we get r/s = (s\r
0y)/(s0\r
z) = (s\r
0/s0\r
)(y/z) = x.\r
In commutative algebra and algebraic geometry, one often uses the ring of\r
fractions S\r
−1A, where S is a multiplicative submonoid of a commutative ring\r
A (often the complement of a prime ideal). One defines S\r
−1A as the monoid\r
AS together with 0 = [0, 1] and [x, s] + [x\r
0\r
, s\r
0\r
] = [xs0 + x\r
0\r
s, ss0]. As is seen, this\r
construction is similar to ours. In fact, we have factorized it in two parts: as \f\r
followed by R.\r
11The naturalness must also be checked, but our constructions are obviously natural."""

[[sections]]
number = "27"
title = "Theorem 4.11. If A is a commutative ring with identity and S a multiplicative"
text = """
submonoid, then S\r
−1A ∼= R\fSA by the isomorphism r/s 7→ r/s.\r
Proof. The mapping ηˆ(A,S): AS → R\fSA, r/s 7→ r/s is an injective morphism\r
of the multiplicative monoids by theorem 2.10. It is easy to see that it preserves\r
0 and + too. It is surjective by the previous lemma and thus a bijection. S\r
−1A\r
is a ring so ηˆ(A,S)is an isomorphism of rings.\r
Any wheel of fractions is (according to proposition 2.14) of the form \fSA\r
with S being closed under division. For that presentation, we have a stronger\r
version of the previous theorem.\r
Theorem 4.12. S\r
−1A and R\fSA are identical iff S is closed under division.\r
Proof. Take [x, y] ∈ R\fSA. Then 0/y = 0x/y = 0, so that y ∈ S˜. If S is closed\r
under division, we get y ∈ S, so that (x, y) ∈ A × S. Hence R\fSA = S\r
−1A in\r
that case.\r
Suppose instead that R\fSA and S\r
−1A are identical as sets. Take x ∈ S˜;\r
we shall prove x ∈ S. We have (x, x) ∈ [x, x] = x/x but since x/x ∈ R\fSA\r
by the previous lemma, we get that (x, x) ∈ A × S when R\fSA and S\r
−1A are\r
identical as sets.\r
We summarize the results above in the following corollary. It states one\r
isomorphism and two identities:\r
Corollary 4.13. Let A be a semiring, S a multiplicative monoid in it, S˜ its\r
divisional closure. Then S\r
−1A ∼= R\fSA = R\fS˜A = S˜−1A.\r
Proof. By theorem 4.11, S\r
−1A ∼= R\fSA. By theorem 2.14, R\fSA = R\fS˜A\r
and by theorem 4.12, R\fS˜A = S˜−1A."""

[[sections]]
number = "4.2.2"
title = "Obtaining /-invertible wheels of fractions"
text = """
In the choice between S\r
−1A and \fSA in practical computing when A is a\r
ring, it may seem to be a drawback of the latter that one has to distinguish\r
between reciprocals and multiplicative inverses. One should then remember that\r
S\r
−1A and R\fSA are isomorphic as rings and that the multiplicative inversion\r
therefore is the same in both structures. The difficulty appears first at the\r
moment when we start using the involution /. Hence, there is no real drawback,\r
since one can stick to multiplicative inversion when that is more comfortable.\r
But that does not explain why we introduced the operation /. If finding\r
inverses is what we want it for, then we would like to have no difference between\r
reciprocals and inverses, i.e., we would like to have a /-invertible wheel, so that\r
x\r
−1 = /x whenever x−1\r
is defined. By proposition 2.19, we obtain that if\r
and only if S˜ is saturated as a submonoid of the multiplicative monoid of A.\r
The question is therefore if a given S can be replaced by one having saturated\r
divisional closure.\r
Definition 4.14 (saturated closure). The saturated closure S¯ of a sub\u0002monoid S of a commutative monoid M is the set {x ∈ M | ∃y ∈ M : xy ∈ S}\r
(it is the smallest saturated submonoid of M that contains S)."""

[[sections]]
number = "28"
title = "Since S"
text = """
˜¯ = S¯, S¯ is a submonoid with saturated divisional closure. In the\r
following, S¯ will denote the saturated closure of S in the multiplicative monoid\r
of A.\r
There is a well-known natural isomorphism S\r
−1A ∼= S¯−1A given by r/s 7→\r
r/s. Theorem 4.12 shows that S¯−1A = R\fS¯A, so that the isomorphism is\r
in fact S\r
−1A → R\fS¯A. Since \fS¯A is /-invertible, it is in a sense a better\r
extension of S\r
−1A than \fSA is.12\r
It is well-known that any ring A may be extended to its ‘total ring of frac\u0002tions’ S\r
−1"""

[[sections]]
number = "0"
title = "A, so that every multiplicatively cancelable element in A becomes a"
text = """
unit. However, when doing that, some structure of A can be lost. For instance,\r
in extending Z to Q, one looses all non-trivial proper ideals. Hence, there is\r
a reason for not always extending rings as much as one can. The construction\r
of wheels of fractions have the advantage that it need not destroy any struc\u0002ture. The following corollary shows that a semiring can always be extended to\r
a /-invertible wheel in such a way that it can be retrieved using the R operator.\r
Corollary 4.15. Let U be the set of units in a semiring A. Then \fU A is\r
/-invertible and it extends A in the sense that"""

[[sections]]
number = "1"
title = "R\fU A is isomorphic to A,"
text = """
2. the operations 0, 1, +, · of A are extended to corresponding operations of\r
\fU A,\r
3. if A is a semiring−, then the involution − of A is extended to an involution\r
− of \fU A.\r
4. the restriction of / to A is the partial function ·\r
−1\r
.\r
Proof. This is just a restatement of 2.20 and 2.21, together with information on\r
how + and − are defined (see page 24 for the latter)."""

[[sections]]
number = "4.2.3"
title = "Axiomatizing the class of wheels of fractions"
text = """
We now restate and prove the completeness theorem for the axioms of wheels\r
of fractions. The symbols R and S simplify the notation compared to that used\r
in proposition 3.14.\r
Theorem 4.16. A wheel H is isomorphic to some wheel of fractions if and only\r
if it has the following properties:\r
∀x∃y, z ∈ RH : x = y/z (14)\r
∀x, y, x\r
0\r
, y\r
0 ∈ RH : (x/y = x0\r
/y0 ⇒ ∃s ∈ SH : x = sx0 ∧ y = sy0) (15)\r
Proof. (14) holds in any \fXA since every x is of the form y/z for some y, z ∈ A\r
so we have x = y/z for the corresponding elements in R\fXA.\r
To show that (15) holds in \fXA, suppose that x/y = x\r
0/y0∧0x = 0y = 0x0 =\r
0y\r
0 = 0. By lemma 4.10, we may assume that x = a/s1, y = b/s2, x0 = c/s3,\r
12It is true that R\fSA and R\fS¯A are isomorphic as rings by the mapping r/s 7→ r/s, but\r
not in general that / is preserved under this isomorphism. Consider e.g. R\f{1,2,3,...}\r
and\r
R\f{±1,±2,±3,...}. They are isomorphic as rings, but /(−1) = −1 is true only in the latter.\r
(−1)−1 = −1 is of course true whenever − is obtained in one of the ways mentioned on page\r
24.\r
29

y\r
0 = d/s4 with a, b, c, d ∈ A. Then (s2/s1)a/b = x/y = x0/y0 = (s4/s3)(c/d), so\r
there exist s\r
0\r
, s\r
00 such that\r
(s\r
0\r
, s\r
0\r
)(s2, s1)(a, b) = (s\r
00\r
, s\r
00)(s4, s3)(c, d).\r
Taking\r
s =\r
s3s4s\r
00\r
s1s2s\r
0\r
(which is in SH), we get\r
sx0 =\r
s3s4s\r
00\r
s1s2s\r
0\r
·\r
c\r
s3\r
=\r
s3s4s\r
00c\r
s1s2s3s\r
0\r
=\r
s3s2s\r
0a\r
s1s2s3s\r
0\r
=\r
a\r
s1\r
= x.\r
and\r
sy0 =\r
s3s4s\r
00\r
s1s2s\r
0\r
·\r
d\r
s4\r
=\r
s3s4s\r
00d\r
s1s2s4s\r
0\r
=\r
s1s4s\r
0\r
b\r
s1s2s4s\r
0\r
=\r
b\r
s2\r
= y.\r
On the other hand, suppose that (14) and (15) are true in a wheel H. Then\r
\u000FH (defined in theorem 4.8) is surjective by (14) and injective by (15). Hence it\r
is an isomorphism \fSHRH → H."""

[[sections]]
number = "4.2.4"
title = "Cancellation of zero-terms"
text = """
In computing with (semi-)rings, one does not only use equational rules, but\r
additional information, for instance, that a certain element a is ‘multiplicatively\r
cancellable’ (·-cancellable): ax = ay ⇒ x = y.\r
We have seen that any semiring can be viewed as a part of a wheel; tech\u0002nically, that any semiring A is embedded in \fU A (where U is the set of units\r
of A) and that an isomorphic copy of A can be recovered from \fU A by the\r
operator R. It is important that we can transfer information about cancellation\r
to the wheel.\r
Consider the equation ax = ay in a semiring A. The information ‘a is ·-\r
cancellable’ lets us conclude that x = y. When A is considered as embedded in a\r
wheel, it is instead natural to reason as follows (without any use of cancellation):\r
ax = ay\r
ax/a = ay/a\r
x + 0a/a = y + 0a/a\r
x + 0/a = y + 0/a.\r
The question of cancellation now comes in since we need to know whether\r
0/a is additively cancellable (+-cancellable). In this way, the problem of ·-\r
cancellation is reduced to a problem of +-cancellation. One might however\r
suspect that there could be situations in which a is ·-cancellable in A, but 0/a\r
is not +-cancellable in \fXA. Fortunately, there are no such cases, according to\r
the following proposition.\r
Proposition 4.17. If a is ·-cancellable in A, then 0/a is +-cancellable in \fX A.\r
Proof. Suppose that a is ·-cancellable in A. Suppose also that [x, y] + 0/a =\r
[x\r
0\r
, y\r
0\r
] + 0/a, that is, that [ax, ay] = [ax0, ay0]. Then there are s, s\r
0\r
such that\r
sax = s\r
0ax0 and say = s0ay0 but since a is ·-cancellable, we conclude that\r
sx = s\r
0x and sy = s0y0\r
, hence [x, y] = [x\r
0\r
, y\r
0\r
]."""

[[sections]]
number = "30"
title = 'Suppose now that if a 6= 0 in A, then a is ·-cancellable, i.e., that S0 = A\{0}.'
text = "We say (following [Gol99]) that such a semiring is multiplicatively cancellative."

[[sections]]
number = "13"
title = "This is a maximality property, since if a = 0, then a cannot be ·-cancellable"
text = """
unless the semiring is trivial. A corresponding maximality property for wheels\r
is 0x 6= x ⇒ (0/x is +-cancellable), since if 0x = x, then 0/x can’t be +-\r
cancellable unless the wheel is trivial (y + 0/x = z + 0/x holds for any y and\r
z if 0x = x, since then y + 0/x = y + 0/(0x) = 0/0 = z + 0/(0x) = z + 0/x).\r
These properties are connected as follows.\r
Proposition 4.18. 1. If A is multiplicatively cancellative, then 0x 6= x ⇒\r
(0/x is +-cancellable) holds in \fXA."""

[[sections]]
number = "2"
title = "If 0x 6= x ⇒ (0/x is +-cancellable) holds in H, then RH is multiplicatively"
text = """
cancellative.\r
Proof. 1. We shall prove that 0/x is +-cancellable whenever 0x 6= x. Let\r
x = [x\r
0\r
, x\r
00] and assume 0x 6= x. Suppose that x0 = 0. Then x = [0, x00] =\r
[0, 1][0, x\r
00] = 0x, which is refuted, hence x0 6= 0. If A is multiplicatively\r
cancellative, then x\r
0\r
is ·-cancellable. Hence 0/x0is +-cancellable, but\r
0/x = 0/x0 and we are done."""

[[sections]]
number = "2"
title = "Take x ∈ RH with x 6= 0. Then 0x = 0 6= x, so that 0/x is +-cancellable."
text = """
We may then compute as follows:\r
xy = xz\r
xy/x = xz/x\r
y + 0x/x = z + 0x/x\r
y + 0/x = z + 0/x\r
y = z.\r
Note that we did not need to assume that y, z ∈ RH.\r
Example 4.19. Solve the equation 3x = 12.\r
We have x + 0/3 = 3x/3 = 12/3 = 3 · 4/3 = 4 + 0/3. That gives x =\r
4 whenever 0/3 is +-cancellable, which happens for instance if the wheel in\r
question is \fXZ, for any subset X ⊂ Z, since 3 is ·-cancellable in Z. In general\r
we may not conclude more than x + 0/3 = 4 + 0/3, which is sound since the\r
equation does not have a unique solution in general.\r
Ring algebra does not allow us to derive anything from 3x = 12 when 3\r
is not ·-cancellable (e.g. when the equation have several solutions), but wheel\r
algebra always lets us develop to x+0/3 = 4+0/3, which can be used in further\r
calculations: if x and 0/3 appear in the left hand side of an equation, then we\r
may use the axioms for zero-terms to move 0/3 close to x, then replacing x+0/3\r
by 4+0/3 and finally move the term 0/3 out using the rules for zero-terms again.\r
If x appears, but not 0/3, then we may add 0/3 to both sides of the equation,\r
hence introducing 0/3 but eliminating an occurrence of x. Note that when such\r
an introduction has been made, then one can use the introduced term over and\r
13The term ‘integral’ is unfortunately already used in another sense in the context of semi\u0002rings [Gol99]. E.g. \r
/6is integral as a semiring in this sense.\r
31

over again, until all occurrences of x are eliminated. One may view these 0/3-\r
terms as flags indicating that the result is worthless if e.g. 0 = 3, since then the\r
rule ‘x + 0/0 = 0/0’ can be used for reducing the equation to 0/0 = 0/0.\r
Say that we want to compute the value of x\r
2 + x, given that 3x = 12. We\r
can’t give a definite answer, since the value is not uniquely determined unless we\r
specify which semiring we think of. What we can do is to compute x\r
2 +x+0/3:\r
x\r
2 + x + 0/3 = x2 + 4 + 0/3 = x(x + 0/3) + 4 = x(4 + 0/3) + 4\r
= (x + 0/3)4 + 4 = (4 + 0/3)4 + 4 = 4 · 4 + 4 + 0/3\r
= 20 + 0/3.\r
If we get information at a later stage, letting us conclude that 0/3 is +-\r
cancellable, then we can get something explicit for x\r
2 +x. This might happen if\r
we get more knowledge about the semiring we started with, but also if we pass\r
to a quotient of that semiring. For instance, suppose that we conclude that we\r
need the value modulo 16. We then pass to a quotient defined by 0 = 16. In\r
such a quotient, 3 is a unit, and hence 0/3 is +-cancellable.14 We conclude that\r
x\r
2 + x = 20 = 4 (mod 16).\r
We may view the wheel alternative as computing modulo everything at the\r
same time."""

[[sections]]
number = "4.3"
title = "Equational logic for wheels of fractions"
text = """
One may ask if our definition of ‘wheel’ is ‘the right one’. Are the axioms chosen\r
ad hoc, or do they axiomatize a class of structures that is in some sense naturally\r
delimited?\r
There is some evidence that we can’t improve the definition:"""

[[sections]]
number = "1"
title = "The wheels of fractions are wheels according to our definition."
text = ""

[[sections]]
number = "2"
title = "The axioms are a set of equations. That is by Birkhoff’s theorem [Bir35]"
text = """
necessary for the axiomatized class to be closed under substructures, quo\u0002tients, products and isomorphisms. Further, by ‘compactness for equa\u0002tional logic’, if it is finitely axiomatizable in first order predicate logic,\r
then it is finitely axiomatizable by equations. Hence, there is no need to\r
consider other candidates than equations as axioms."""

[[sections]]
number = "3"
title = "The axioms are finitely many."
text = ""

[[sections]]
number = "4"
title = "We have empirical experience that the axioms are precisely what we need"
text = """
to make natural computations.\r
On the other hand, there is some counterevidence too: There are identities,\r
like (x + 1)2 = x(x + 2) + 1, that hold in any wheel of fractions but does not\r
seem to be provable from our axioms. But (x + 1)2 = x(x + 2) + 1 is not a\r
very natural identity and may be thought of as valid in wheels of fractions ‘by\r
accident’: that it just ‘happens to be’ and that there is nothing conceptual that\r
suggests that it should be valid in all wheels.15\r
14If x is a unit, then 0x and 0/x are +-cancellable since 0x + 0x−1 = 0xx−1 = 0 and\r
0/x + 0/(x−1) = 0/(xx−1) = 0 in that case.\r
15However, by completeness, (14) (see theorem 4.16) suffices (together with wheel axioms)\r
for derivation of any identity that is valid in all wheels of fractions, since every wheel which\r
has this property is a homomorphic image of a wheel of fractions. This is because \u000FH (defined\r
in theorem 4.8) is surjective by (14)."""

[[sections]]
number = "32"
title = "Anyway, one might wish to include more axioms for wheels, perhaps those"
text = """
needed to prove every identity that is valid in the class WF of wheels of fractions.\r
By Birkhoff’s theorem, we should have equational axioms only, so that the class\r
axiomatized is still closed under products, substructures and quotients. This\r
amounts to axiomatizing the class V (WF), called ‘the variety generated by\r
WF’, consisting of structures that can be obtained in finitely many steps from\r
wheels of fractions, taking products, substructures, quotients and isomorphic\r
copies.16\r
We will study the class V (WF), but also simultaneously the following. A\r
wheel with negation is a wheel with an additional constant −1 such that 1 +\r
(−1) = 0. By the discussion on page 24, such a constant determines an additive\r
involution by −x = (−1)x and it holds that x − x = 0x\r
2\r
, hence the semiring in\r
such a wheel is in fact a ring. A wheel of fractions with negation is obtained\r
for instance when the semiring used in the construction is a ring. We denote by\r
Wheelneg the class of wheels with negation and by WFneg the class of wheels\r
of fractions with negation. A morphism of wheels with negation should preserve\r
−1, but that is automatically satisfied by any morphism of wheels: suppose H\r
and H0 are wheels with negation and ϕ : H → H0 a wheel morphism. Then it\r
holds in H0that ϕ(−1) = 1+(−1)+ϕ(−1) = −1+ϕ(1+(−1)) = −1+ϕ(0) = −1.\r
We will emphasize on the classes Wheel, WF and V (WF) in the following,\r
but the treatment of Wheelneg, WFneg and V (WFneg) is precisely analo\u0002gous, just replace N by Z, N[x1, . . . , xn] by Z[x1, . . . , xn], \f∅N by \f∅Z, “wheel\r
axioms” by “wheel axioms and ‘1+(−1) = 0’ ”, “semirings” by “rings with iden\u0002tity”, and so on. One has to check some details of negation in the proofs, but\r
that is straight-forward and omitted for the purpose of readability (we include\r
a remark at a crucial point).\r
Definition 4.20. A term p(x1, . . . , xn) is a polynomial term if it contains no\r
occurrence of /. We say that such terms are equivalent if they can be proved\r
to be equal using the axioms for commutative semirings. This is an equivalence\r
relation and its equivalence classes are called polynomials.\r
Example 4.21. The polynomial terms ‘(x + 1)(x + 1)’ and ‘(xx) + ((2x) + 1)’\r
are not identical, but equivalent. Hence they define the same polynomial.\r
When wheels with negation are treated, polynomial terms are equivalent if\r
they can be proved to be equal using axioms for commutative rings with identity.\r
Theorem 4.22. The following are equivalent for a wheel H."""

[[sections]]
number = "1"
title = "H ∈ V (WF)."
text = ""

[[sections]]
number = "2"
title = "H ∈ V ({\f∅N})."
text = ""

[[sections]]
number = "3"
title = "Any identity which is valid in all wheels of fractions is valid in H too."
text = ""

[[sections]]
number = "4"
title = "Any identity which is valid in \f∅N is valid in H too."
text = ""

[[sections]]
number = "5"
title = "H is isomorphic to a quotient of a subwheel of a power of \f∅N."
text = ""

[[sections]]
number = "6"
title = "H is isomorphic to a quotient of a subwheel of \f∅(N"
text = """
I\r
), where N\r
I\r
is the\r
semiring of functions I → N, for some set I.\r
16See some textbook in universal algebra, e.g. [BS81, Gr¨a79]."""

[[sections]]
number = "33"
title = "Proof. We first prove 1 ⇐⇒ 2 ⇐⇒ 3 ⇐⇒ 4 by showing 1 ⇒ 3 ⇒ 4 ⇒ 2 ⇒ 1."
text = """
The step 4 ⇒ 2 follows from Birkhoff’s theorem and the other steps are obvious,\r
except for 3 ⇒ 4 which needs a proof.\r
Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is valid in \f∅N. We shall prove that it\r
is valid in all wheels of fractions. Substitute [x\r
0\r
i\r
, x\r
00\r
i\r
] for every xiin the identity\r
and compute the values of each side. The result is [p(x1, . . . , xn), q(x1, . . . , xn)]\r
= [p\r
0\r
(x1, . . . , xn), q\r
0\r
(x1, . . . , xn)] for polynomials p, p\r
0\r
, q, q\r
0 with coefficients from\r
N. That t(x1, . . . , xn) = s(x1, . . . , xn) is valid in \f∅N means that (p(x1, . . . , xn),\r
q(x1, . . . , xn)) and (p\r
0\r
(x1, . . . , xn), q\r
0\r
(x1, . . . , xn)) takes the same values if we\r
substitute natural numbers for the variables. But then p = p\r
0 and q = q0 as\r
polynomials, so that the identity is valid in any wheel of fractions.\r
A theorem by Tarski gives 2 ⇒ 5 (see e.g. [BS81]) and 5 ⇒ 2 is obvious.\r
To establish 5 ⇐⇒ 6, we need to show (\f∅N)\r
I ∼= \f∅(NI\r
). We get this\r
from the identity (N × N)\r
I ∼= NI × NI\r
for the multiplicative monoid of N. It is\r
obvious that this isomorphism preserves also 0 and +.\r
One says that \f∅N is generic for V (WF), because of the equivalence 1 ⇐⇒"""

[[sections]]
number = "4"
title = "It is moreover the WF-free wheel over ∅. In general, if K is a class of wheels,"
text = """
then the K-free wheel over a set X is the (up to isomorphism unique) wheel\r
FK(X) with the property that for any function X → H, where H ∈ K, there\r
is a morphism FK(X) → H that extends it. It is easily seen from Birkhoff’s\r
construction that FK(X) = FV (K)(X) and in our case we have V (WF) =\r
V ({\f∅N}), so that FWF(X) = F{\f∅N}(X) and the latter is (again by Birkhoff’s\r
construction) a subwheel of some wheel of the form (\f∅N)\r
I — which, as we\r
proved in the theorem, is isomorphic to \f∅(N\r
I\r
). One may consider it as the\r
wheel of wheel-terms with identification made when two terms yield identical\r
values in \f∅N. Hence an equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid in WF\r
if and only if t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
Remark. Note how we use the terms ‘valid’ and ‘true’. We only\r
apply ‘true’ to a closed formula (which in our case means a formula\r
in which no variable occur, since we consider quantifier-free formu\u0002las only). An open formula is valid if it becomes true after any\r
substitution with elements from any of the structures considered.\r
The corresponding theorem for wheels with negation reads as follows.\r
Theorem 4.23. The following are equivalent for a wheel H with negation (\f∅Z\r
is here considered as a wheel with negation, that means for instance that \f∅N\r
is not considered to be a substructure of it)."""

[[sections]]
number = "1"
title = "H ∈ V (WFneg)."
text = ""

[[sections]]
number = "2"
title = "H ∈ V ({\f∅Z})."
text = ""

[[sections]]
number = "3"
title = "Any identity which is valid in all wheels of fractions with negation is valid"
text = "in H too."

[[sections]]
number = "4"
title = "Any identity which is valid in \f∅Z is valid in H too."
text = ""

[[sections]]
number = "5"
title = "H is isomorphic to a quotient of a subwheel of a power of \f∅Z."
text = ""

[[sections]]
number = "6"
title = "H is isomorphic to a quotient of a subwheel of \f∅(Z"
text = """
I\r
), where Z\r
I\r
is the\r
ring of functions I → Z, for some set I."""

[[sections]]
number = "34"
title = "Proof. As the previous proof."
text = """
Since validity in WF is equivalent to truth in FWF({x1, . . . , xn}), we get a\r
completeness result for WF if we give a complete method for deriving formu\u0002las which are true in FWF({x1, . . . , xn}). In this section, we will study such\r
derivations, and similar ones.\r
We work in a language which is obtained from the language of wheels by\r
adjoining constant symbols x1, . . . , xn (and when wheels with negation are con\u0002sidered, the language has an additional constant symbol ‘−1’). In the following,\r
xi will denote\r
1. a constant symbol in the language,\r
2. an element of FK({x1, . . . , xn}) for several choices of K,\r
3. an element of N[x1, . . . , xn],\r
4. an element of \f∅(N[x1, . . . , xn]),\r
so the reader should be careful to observe which is the case for every occurrence.\r
As a consequence, when t is a term, t(x1, . . . , xn) can be interpreted as a closed\r
term in the language or as an element of FK({x1, . . . , xn}) for several choices\r
of K, or as an element of \f∅(N[x1, . . . , xn]).\r
When we say things like “t(x1, . . . , xn) = s(x1, . . . , xn) can be proved using\r
the wheel axioms together with an axiom ‘0xi = 0’ for each i”, we mean that\r
there is a formal derivation of the formula t(x1, . . . , xn) = s(x1, . . . , xn) in the\r
system of equational logic with the axioms indicated (here, ‘axioms’ should be\r
interpreted in the sense of formal systems). The formula ‘1 + (−1) = 0’ is an\r
axiom when we work with wheels with negation.\r
Theorem 4.24 (completeness). The equation t(x1, . . . , xn) = s(x1, . . . , xn)\r
is valid in WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) =\r
s(x1, . . . , xn) is provable using the axioms for wheels together with the axioms\r
‘0xi is +-cancellable’ (i = 1, . . . , n).\r
Proof. Validity of the equation t(x1, . . . , xn) = s(x1, . . . , xn) is equivalent to\r
the truth of t(x1, . . . , xn) = s(x1, . . . , xn) in FWF({x1, . . . , xn) (by definition\r
of the latter wheel). Lemma 4.47 will show that if the latter equation is true,\r
then it is provable using the axioms for wheels together with the axioms ‘0xiis\r
+-cancellable’.\r
On the other hand, if it is provable by that technique, then it is true by\r
lemma 4.39.\r
Before we state and prove some technical lemmas, we state the following the\u0002orems, which are alternatives to the previous ones. By distinguishing between\r
‘balanced’ and ‘unbalanced’ equations, they make more precise statements than\r
the previous ones.\r
Definition 4.25. An equation is balanced if each variable occurs equally many\r
times on each side. Otherwise, it is unbalanced.\r
Note that all axioms for wheels except ‘x + 0/0 = 0/0’ are balanced. Re\u0002member that x occurs n times in ‘x\r
n’, since ‘xn’ is just a short notation for a\r
product of n x’s. A warning: the equation ‘0xi = 0’ is balanced, since xiis not\r
35

a variable in our formal sense, but a constant symbol, interpreted as a special\r
element of the structure considered in the context.\r
Theorem 4.26. An unbalanced equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid\r
in WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) = 0/0 and\r
s(x1, . . . , xn) = 0/0 are true in \f∅(N[x1, . . . , xn]).\r
Proof. Use lemma 4.49 and the equivalence between validity and truth.\r
Example 4.27. The formula 1 + 1\r
x = x+1x\r
is valid in Q \\ {0}. Is it perhaps\r
valid in all wheels of fractions? The answer is no, since it is not balanced, and\r
one easily checks that 1 +\r
1\r
x\r
6=\r
0\r
0\r
in \f∅(N[x]). A balanced analogue is\r
1 +\r
1\r
x\r
+ 0x =\r
x + 1\r
x\r
,\r
which is easily proved by the wheel axioms.\r
Theorem 4.28. A balanced equation t(x1, . . . , xn) = s(x1, . . . , xn) is valid in\r
WF (and hence valid in V (WF)) if and only if t(x1, . . . , xn) = s(x1, . . . , xn)\r
is true in \f∅(N[x1, . . . , xn]).\r
Proof. If t(x1, . . . , xn) = s(x1, . . . , xn) is valid, t(x1, . . . , xn) = s(x1, . . . , xn) is\r
clearly true.\r
For the other direction, use lemma 4.50 and the equivalence between validity\r
and truth.\r
Example 4.29. (x+1)2\r
x =\r
x(x+2)+1\r
x\r
is valid in all wheels of fractions since it is\r
balanced (x occurs three times on each side) and (x+1)2\r
x =\r
x(x+2)+1\r
x\r
is true in\r
\f∅(N[x]).\r
Example 4.30. (x + y)(x − y) = x\r
2 − y2\r
is valid in all wheels of fractions with\r
negation. This follows since it is balanced and (x1 + x2)(x1 − x2) = x\r
2\r
1 − x\r
2\r
2\r
is\r
true in \f∅(Z[x1, x2]).\r
These two results give a completeness result for WF together with the fol\u0002lowing theorem:\r
Theorem 4.31. The equation t(x1, . . . , xn) = s(x1, . . . , xn) is true in the wheel\r
\f∅(N[x1, . . . , xn]) if and only if it is provable by the wheel axioms together with\r
the rules ‘0xi = 0’ for each i = 1, . . . , n.\r
Proof. 0xi = 0 is evidently true in \f∅(N[x1, . . . , xn]), so provable equations are\r
true.\r
Suppose on the other hand that t(x1, . . . , xn) = s(x1, . . . , xn) is true in\r
\f∅(N[x1, . . . , xn]). Then t(x1, . . . , xn) ≡ s(x1, . . . , xn) in FWheel({x1, . . . , xn})\r
(definition 4.40 and lemma 4.44), say t(x1, . . . , xn) + zt1 = s(x1, . . . , xn) + zt2\r
is true in FWheel({x1, . . . , xn}) for some zero-terms zt1 and zt2. Then (by\r
completeness) it is provable from the wheel axioms. The rules ‘0xi = 0’ can\r
finally be used to prove that zt1 = 0 and zt2 = 0.\r
The acceptance of the rules ‘0xi = 0’ lets us count as in rings with polynomial\r
expressions in x1, . . . , xn."""

[[sections]]
number = "36"
title = "Example 4.32. (x + 1)2 = x(x + 2) + 1 is provable using wheel axioms and"
text = """
‘0x = 0’:\r
(x + 1)2 = (x + 1)(x + 1) + 0x + 0 · 1 = (x + 1)(x + 1) + 0(x + 1)\r
= x(x + 1) + 1(x + 1) = x(x + 1) + x + 1\r
= x(x + 1 + 1) + 0x + 1 = x(x + 2) + 1\r
The theorems above have some corollaries. The first states how identities\r
from semirings can be transferred to wheels of fractions.\r
Corollary 4.33. If t(x1, . . . , xn) and s(x1, . . . , xn) are polynomial terms, then\r
t(x1, . . . , xn) = s(x1, . . . , xn) is valid in WF if and only if it is balanced and\r
valid in N.\r
Proof. Suppose it is valid in WF. Then it is valid in \f∅N and hence in N. Since\r
t(x1, . . . , xn) ∈ N[x1, . . . , xn] ∼= R\f∅(N[x1, . . . , xn]), we conclude that it cannot\r
be equal to 0/0. So the equation is balanced.\r
On the other hand, if the equation is valid in N, then t(x1, . . . , xn) =\r
s(x1, . . . , xn) in\r
N[x1, . . . , xn] ⊂ \f∅(N[x1, . . . , xn]).\r
If it is also balanced, then it is valid in WF.\r
Example 4.34. (x + 1)2 = x(x + 2) + 1 is balanced and valid in N, hence it is\r
valid in wheels of fractions.\r
Example 4.35. (x + y)(x − y) = x\r
2 − y2\r
is balanced and valid in Z, hence it\r
is valid in wheels of fractions with negation.\r
The next result states how equations that have partial meaning and partial\r
validity in fields of characteristic zero can be transferred to wheels of fractions.\r
Corollary 4.36. Suppose there is an infinite subset X of Q such that the terms\r
t(x1, . . . , xn) and s(x1, . . . , xn) are meaningful and Q-valued when values from\r
X are substituted for the variables and / is interpreted as inversion. Suppose\r
also that t and s yield the same values when such substitutions are made. Then\r
t(x1, . . . , xn) + 0s(x1, . . . , xn) = s(x1, . . . , xn) + 0t(x1, . . . , xn)\r
is valid in WF.\r
Proof. Since the latter equation is balanced, we use that its validity in WF is\r
equivalent to the truth of\r
t(x1, . . . , xn) + 0s(x1, . . . , xn) = s(x1, . . . , xn) + 0t(x1, . . . , xn)\r
in \f∅(N[x1, . . . , xn]).\r
If each side is computed, we get [pt(x1, . . . , xn), qt(x1, . . . , xn)] on the left\r
for some polynomials pt, qt and [ps(x1, . . . , xn), qs(x1, . . . , xn)] on the right for\r
some polynomials ps, qs. Clearly, qt and qs will be equal as polynomials. We\r
shall prove that also pt and ps must be equal as polynomials.\r
When x1, . . . , xn are replaced by values from X, then we get values in Q =\r
R\fS0 Z. Hence qt and qs are non-zero for such substitutions. Since we also\r
know that the values for t and s are equal for such substitutions, we conclude\r
that the values for pt and ps are equal. But since X is infinite, that implies that\r
pt and ps are equal as polynomials."""

[[sections]]
number = "37"
title = 'Example 4.37. The equation x/x = 1 is valid in Q \ {0}, hence x/x + 0 · 1 ='
text = """
1+0x/x is valid in wheels of fractions (this is of course a known rule for wheels,\r
but it is instructive to see how it is related to validity in Q).\r
Example 4.38. The equation x/x − 1 = 0 is valid in Q \\ {0}, hence x/x − 1 =\r
0x/x is valid in wheels of fractions with negation.\r
We now prove the lemmas for the theorems.\r
Lemma 4.39. 0xi is +-cancellable in FWF({x1, . . . , xn}), for i = 1, . . . , n.\r
Proof. We shall prove that if t(x1, . . . , xn) + 0xi = s(x1, . . . , xn) + 0xiis valid\r
in \f∅N, then t(x1, . . . , xn) = s(x1, . . . , xn) is too.\r
Substitute therefore x\r
0\r
j\r
/x00\r
j\r
for every variable xj and compute the values of\r
the terms, ending up with the following form, where pt, qt, ps, qs are polynomials:\r
t(x1, . . . , xn) =\r
pt(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
qt(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
s(x1, . . . , xn) =\r
ps(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
qs(x\r
0\r
1\r
, . . . , x\r
0\r
n, x\r
00\r
1\r
, . . . , x\r
00\r
n)\r
.\r
The values of t(x1, . . . , xn) + 0xi and s(x1, . . . , xn) + 0xi are then\r
t(x1, . . . , xn) + 0xi =\r
pt(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
qt(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
s(x1, . . . , xn) + 0xi =\r
ps(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
qs(x\r
0\r
1\r
, . . . , x\r
0\r
n\r
, x\r
00\r
1\r
, . . . , x\r
00\r
n\r
)x\r
00\r
i\r
.\r
Since t(x1, . . . , xn) + 0xi = s(x1, . . . , xn) + 0xiis valid in \f∅N, we have\r
identical values for any substitution in \f∅N, hence pt = ps and qt = qs as\r
polynomials. But then t(x1, . . . , xn) and s(x1, . . . , xn) take the same values for\r
any substitution with elements from \f∅N, hence t(x1, . . . , xn) = s(x1, . . . , xn)\r
is valid in \f∅N.\r
Definition 4.40. Let t(x1, . . . , xn) ≡ s(x1, . . . , xn) mean that there are zero\u0002terms 0x\r
n1\r
1\r
. . . x\r
nn\r
n and 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
such that\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = s(x1, . . . , xn) + 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
in FWheel({x1, . . . , xn}).\r
Lemma 4.41. ≡ is a congruence relation.\r
Proof. It is clearly reflexive and symmetric. The transitivity follows from 0x +\r
0y = 0xy (10). We must prove that it preserves +, · and /. Suppose therefore\r
that t ≡ s (let us suppress the part (x1, . . . , xn) everywhere). Then there are\r
zero-terms, say zt1 and zt2 for short, such that t+zt1 = s+zt2. We then have\r
(using (6) and (7) in the second and third row)\r
t + u + zt1 = s + u + zt2\r
tu + zt1 = (t + zt1)u = (s + zt2)u = su + zt2\r
/t + zt1 = /(t + zt1) = /(s + zt2) = /s + zt2.\r
38

Lemma 4.42. If the polynomial terms p(x1, . . . , xn) and q(x1, . . . , xn) are equi\u0002valent, then p(x1, . . . , xn) ≡ q(x1, . . . , xn).\r
Proof. We first prove that 0p(x1, . . . , xn) ≡ 0 by induction on the number\r
of occurrences of operations composing p. It is obvious if p is xi or a con\u0002stant. If p is t + s, then 0p(x1, . . . , xn) = 0(t(x1, . . . , xn) + s(x1, . . . , xn)) =\r
0t(x1, . . . , xn) + 0s(x1, . . . , xn) ≡ 0 + 0 = 0. If p is ts, then 0p(x1, . . . , xn) =\r
0t(x1, . . . , xn)s(x1, . . . , xn) ≡ 0s(x1, . . . , xn) ≡ 0.\r
Hence, if p is a polynomial term and z = p(x1, . . . , xn), then for every\r
x, y ∈ FWheel({x1, . . . , xn}) we have (x+y)z = (x+y)z +0z ≡ xz +yz, so that\r
we have\r
x + y = y + x\r
x + (y + z) = (x + y) + z\r
0 + x = x\r
xy = yx\r
x(yz) = (xy)z\r
1x = x\r
(x + y)z ≡ xz + yz\r
0z ≡ 0\r
when counting with polynomial terms. We conclude that every derivation of\r
p(x1, . . . , xn) = q(x1, . . . , xn) that uses the axioms for commutative semirings\r
only, is transformed into an argument that proves p(x1, . . . , xn) ≡ q(x1, . . . , xn),\r
by changing each ‘=’ to ‘≡’.\r
Remark: The analogous case of wheels with negation is treated by use of\r
z − z ≡ 0, which is true since z − z = 0z\r
2\r
.\r
On the other hand, if p(x1, . . . , xn) ≡ q(x1, . . . , xn) for polynomial terms p\r
and q, then they are equivalent. Hence ≡ can be thought of as an extension of\r
the equivalence for polynomial terms.17\r
Lemma 4.43. For any term t(x1, . . . , xn), one can find two polynomial terms\r
p(x1, . . . , xn) and q(x1, . . . , xn) with\r
t(x1, . . . , xn) ≡\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
in FWheel({x1, . . . , xn}).\r
Proof. We use induction on the number of occurrences of operations composing\r
t.\r
0 occurrences: t(x1, . . . , xn) is xi. Then choose p(x1, . . . , xn) = xi and\r
q(x1, . . . , xn) = 1 and the result is obvious.\r
N+1 occurrences, assuming that we have proved the result for N occurrences\r
(let us suppress the part (x1, . . . , xn) everywhere): If t is a constant, then choose\r
p = t and q = 1. Otherwise, we have the following possibilities.\r
17Note however that this statement is informal, since ≡ is not a relation between terms,\r
but between elements of a certain wheel.\r
39

1. t is t1 + t2. By the induction hypotheses, we have t1 ≡ p1/q1 and t2 ≡\r
p2/q2. Hence\r
t = t1 + t2 ≡\r
pt1\r
qt1\r
+\r
pt2\r
qt2\r
≡\r
pt1\r
qt1\r
+\r
pt2\r
qt2\r
+ 0qt1 =\r
pt1 +\r
pt2qt1\r
qt2\r
qt1\r
≡\r
pt1 +\r
pt2qt1\r
qt2\r
qt1\r
+ 0qt2 =\r
pt1 +\r
pt2qt1\r
qt2\r
+ 0qt2\r
qt1\r
=\r
pt1qt2 +pt2qt1\r
qt2\r
qt1\r
=\r
pt1qt2 + pt2qt1\r
qt1qt2\r
.\r
2. t is t1t2.\r
t = t1t2 ≡\r
\u0012\r
pt1\r
qt1\r
\u0013 \u0012\r
pt2\r
qt2\r
\u0013\r
=\r
pt1 pt2\r
qt1qt2\r
3. t is /t1.\r
t = /t1 ≡ /(pt1 /qt1) = qt1 /pt1\r
Lemma 4.44. (FWheel({x1, . . . , xn})/≡) ∼= \f∅(N[x1, . . . , xn]).\r
Proof. The evaluation morphism FWheel({x1, . . . , xn}) → \f∅(N[x1, . . . , xn]) is\r
surjective, we shall prove that its kernel is ≡.\r
Clearly, if t(x1, . . . , xn) ≡ s(x1, . . . , xn) is true in FWheel({x1, . . . , xn}),\r
then t(x1, . . . , xn) = s(x1, . . . , xn) is true in \f∅(N[x1, . . . , xn]). We need to\r
prove the other direction.\r
Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) in \f∅(N[x1, . . . , xn]). By the\r
previous lemma, there are polynomial terms pt, qt, ps, qs such that\r
t(x1, . . . , xn) ≡\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
and\r
s(x1, . . . , xn) ≡\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
.\r
Hence it holds in \f∅(N[x1, . . . , xn]) that\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
= t(x1, . . . , xn) = s(x1, . . . , xn) =\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
.\r
Therefore, pt and ps are equivalent, as well as qt and qs. Hence, by lemma 4.42,\r
we have\r
pt(x1, . . . , xn) ≡ ps(x1, . . . , xn)\r
and\r
qt(x1, . . . , xn) ≡ qs(x1, . . . , xn),\r
so that\r
t(x1, . . . , xn) ≡\r
pt(x1, . . . , xn)\r
qt(x1, . . . , xn)\r
≡\r
ps(x1, . . . , xn)\r
qs(x1, . . . , xn)\r
≡ s(x1, . . . , xn)."""

[[sections]]
number = "40"
title = "Lemma 4.45. Suppose p and q are polynomial terms, not both equivalent to 0."
text = """
If\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ 0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
is true in FWF({x1, . . . , xn}), then it is true in FWheel({x1, . . . , xn}) too.\r
Proof. We prove that (n1, . . . , nn) = (m1, . . . , mn).\r
Choose distinct positive prime numbers a1, . . . , an, b1, . . . , bn such that\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
=\r
a\r
b\r
6=\r
0\r
0\r
in \f∅N.\r
Then\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
+ 0(a1/b1)\r
n1\r
. . .(an/bn)\r
nn =\r
abn1\r
1\r
. . . b\r
nn\r
n\r
bbn1\r
1\r
. . . b\r
nn\r
n\r
and\r
p(a1/b1, . . . , an/bn)\r
q(a1/b1, . . . , an/bn)\r
+ 0(a1/b1)\r
m1\r
. . .(an/bn)\r
mn =\r
abm1\r
1\r
. . . b\r
mn\r
n\r
bbm1\r
1\r
. . . b\r
mn\r
n\r
but by assumption, these should be equal. Since a 6= 0 or b 6= 0, we conclude\r
that (n1, . . . , nn) = (m1, . . . , mn).\r
Lemma 4.46. If t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}),\r
then there is a term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
such that t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n is true in FWheel({x1, . . . , xn}).\r
Proof. Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
Then it is in \f∅(N[x1, . . . , xn]) too. Hence, there are polynomials p(x1, . . . , xn)\r
and q(x1, . . . , xn) with\r
t(x1, . . . , xn) =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
s(x1, . . . , xn) =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
true in \f∅(N[x1, . . . , xn]).\r
If both p and q are equivalent to ‘0’, then we may suppose that they are\r
actually both the term ‘0’.\r
Since FWheel({x1, . . . , xn})/≡ ∼= \f∅(N[x1, . . . , xn]), there are zero-terms,\r
say zt1, zt2, zt3, zt4 for short, such that\r
t(x1, . . . , xn) + zt1 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2\r
s(x1, . . . , xn) + zt3 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4\r
in FWheel({x1, . . . , xn)})."""

[[sections]]
number = "41"
title = "Since"
text = """
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3 = t(x1, . . . , xn) + zt1 + zt3\r
= s(x1, . . . , xn) + zt1 + zt3\r
=\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
in FWF({x1, . . . , xn) and zt2 + zt3 and zt4 + zt1 compute to zero-terms of the\r
form used in the statement of the previous lemma, we may use that lemma to\r
conclude that if p and q are not both the term ‘0’, then\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3 =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
is true also in FWheel({x1, . . . , xn}). But if p and q are both ‘0’, then this fact\r
follows from the axiom 8 instead of from the lemma.\r
Now choose (n1, . . . , nn) such that zt1 + zt3 = 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
. Then\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt2 + zt3\r
=\r
p(x1, . . . , xn)\r
q(x1, . . . , xn)\r
+ zt4 + zt1\r
= s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
Lemma 4.47. Any equation t(x1, . . . , xn) = s(x1, . . . , xn) which is true in\r
FWF({x1, . . . xn}) can be proved using the wheel axioms together with the axioms\r
‘0xi is +-cancellable’ (i = 1, . . . , n).\r
Proof. Suppose t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}). By\r
the previous lemma, we get an equation which is true in FWheel({x1, . . . , xn})\r
by adding a zero-term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
to each side. The resulting equation can\r
be proved using the axioms for wheels. The term 0x\r
n1\r
1\r
. . . x\r
nn\r
n can then be\r
cancelled by the use of ‘0xiis +-cancellable’ several times for different i, since\r
it is provable that\r
0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
Xn\r
j=1\r
Xnj\r
k=1\r
0xj .\r
Lemma 4.48. Suppose that t(x1, . . . , xn) = 0/0 is true in \f∅(N[x1, . . . , xn]).\r
Then it is true in FWF({x1, . . . , xn}) too.\r
Proof. Assume the conditions. t(x1, . . . , xn) ≡ 0/0 in FWheel({x1, . . . , xn})\r
according to lemma 4.44, say\r
t(x1, . . . , xn) + zt1 = 0/0 + zt2 = 0/0 = 0/0 + zt1.\r
Hence t(x1, . . . , xn)+zt1 = 0/0+zt1 also in FWF({x1, . . . , xn}), but by lemma\r
4.39, we conclude that t(x1, . . . , xn) = 0/0."""

[[sections]]
number = "42"
title = "Lemma 4.49. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is an unbalanced"
text = """
equation. Then t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}) if\r
and only if each side is equal to 0/0 in \f∅(N[x1, . . . , xn]) (and hence, by the\r
previous lemma, in FWF({x1, . . . , xn}) too).\r
Proof. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
By lemma 4.46, there is a zero-term 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
such that\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
in FWheel({x1, . . . , xn}). By completeness, this equation is provable using the\r
wheel axioms, but since it is unbalanced, one must use an unbalanced axiom.\r
There is just one, namely ‘x+0/0 = 0/0’. That can be used only if ‘0/0’ occurs\r
as a subterm in the derivation; but if it does, then every term in the derivation\r
can be proved to be equal to 0/0.\r
Hence\r
t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
and\r
s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
in FWF({x1, . . . , xn}) and hence also in \f∅(N[x1, . . . , xn]). But in the latter,\r
we have 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0, hence we conclude that\r
t(x1, . . . , xn) = t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
and\r
s(x1, . . . , xn) = s(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0\r
holds in \f∅(N[x1, . . . , xn]).\r
The other direction was proved in the previous lemma.\r
Lemma 4.50. Suppose that t(x1, . . . , xn) = s(x1, . . . , xn) is a balanced equation\r
and that t(x1, . . . , xn) = s(x1, . . . , xn) is true in \f∅(N[x1, . . . , xn]). Then it is\r
true also in FWF({x1, . . . , xn}).\r
Proof. Assume the conditions. Then t(x1, . . . , xn) ≡ s(x1, . . . , xn) is true in\r
FWheel({x1, . . . , xn}) by lemma 4.44, say that t(x1, . . . , xn) + 0x\r
n1\r
1\r
. . . x\r
nn\r
n =\r
s(x1, . . . , xn) + 0x\r
m1\r
1\r
. . . x\r
mn\r
n . Since this is true in FWheel({x1, . . . , xn}), it is\r
in FWF({x1, . . . , xn}) too. If (n1, . . . , nn) = (m1, . . . , mn), then it follows by\r
lemma 4.39 that t(x1, . . . , xn) = s(x1, . . . , xn) is true in FWF({x1, . . . , xn}).\r
If (n1, . . . , nn) 6= (m1, . . . , mn), then the equation t(x1, . . . , xn)+0x\r
n1\r
1\r
. . . x\r
nn\r
n\r
= s(x1, . . . , xn)+0x\r
m1\r
1\r
. . . x\r
mn\r
n\r
is unbalanced, hence, by the previous lemma, we\r
have that t(x1, . . . , xn)+0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0/0 and s(x1, . . . , xn)+0x\r
m1\r
1\r
. . . x\r
mn\r
n =\r
0/0 in \f∅(N[x1, . . . , xn]). But since 0x\r
n1\r
1\r
. . . x\r
nn\r
n = 0 in \f∅(N[x1, . . . , xn]), we\r
have\r
t(x1, . . . , xn) = 0/0\r
and\r
s(x1, . . . , xn) = 0/0\r
which by lemma 4.48 implies that t(x1, . . . , xn) = s(x1, . . . , xn) is true in\r
FWF({x1, . . . , xn}).\r
43"""

[[sections]]
number = "5"
title = "Wheel-modules"
text = """
Since the notion of module is central in the study of rings, and wheels can be\r
used as a replacement of rings, we should introduce the notion of an H-module\r
over a wheel H. We indicate briefly how a theory of modules may be developed.\r
The notion of A-module, where A is an arbitrary semiring, was defined in\r
section 3 (definition 3.2) and it was noted that when A happens to be a ring,\r
then an A-module in the defined sense is an A-module in the usual sense of rings.\r
The following definition is similar to that definition. Note that the axioms are\r
the wheel axioms that are interpretable in the given context, we mark to the\r
right to which wheel axiom each axiom corresponds.\r
Definition 5.1. Let H be a wheel. An H-module is a commutative monoid\r
hM, 0, +i with multiplication by H-elements defined (formally, a function H ×\r
M → M written (x, m) 7→ xm) such that for any x, x\r
0 ∈ H, m, m0 ∈ M,\r
(xx0)m = x(x\r
0m) (as 2)\r
1m = m (as 2)\r
(x + x\r
0\r
)m + 0m = xm + x\r
0m (as 3)\r
x(m + m0) + x0 = xm + xm0(as 3)\r
(/x)m + m0 + x0 = (/x)(m + xm0) (as 4)\r
0 · 0 = 0 (as 5)\r
x(m + 0m0) = xm + 0m0(as 6)\r
m + (/0)0 = (/0)0 (as 8)\r
where 0 to the left is in H, while 0 to the right or alone is in M.\r
A morphism of H-modules is as usual a monoid-morphism which also pre\u0002serves the multiplication. Let RHM be the subset {m ∈ M | 0m = 0}, which is\r
clearly an RH-module and for any H-module-morphism ϕ : M → N, let RHϕ\r
be the RH-module-morphism obtained by restriction to RHM. RH is clearly\r
a functor from the category of H-modules to the category of RH-modules.\r
The construction of wheels of fractions works also for modules over commu\u0002tative semirings, so that we may construct “\fXA-modules” from A-modules.\r
Let A be a commutative semiring, X a subset and S the multiplicative\r
monoid generated by X. Let M be an A-module and define ∼ on M × A by\r
(m, a) ∼ (m0, a\r
0\r
) ⇐⇒ ∃s1, s2 ∈ S : (s1m, s1a) = (s2m0, s2a\r
0\r
).\r
That this is an equivalence relation is seen in the same way as before. Let \fXM\r
be M × A/∼ with the operations ([c, d] ∈ \fXA)\r
0 = [0, 1]\r
[m, a] + [m0, a\r
0\r
] = [a\r
0m + am0\r
, aa0]\r
[c, d][m, a\r
0\r
] = [cm, da0].\r
These operations are well-defined by the same arguments as before, and the\r
resulting structure is clearly a \fXA-module, denoted \fXM.\r
If ϕ : M → N is an A-module homomorphism, let \fXϕ be the \fXA\u0002module homomorphism \fXM → \fX N given by [m, a] 7→ [ϕ(m), a]. \fX is then\r
44

a functor from the category of A-modules to the category of \fXA-modules;\r
with right adjoint R\fX A. If A is a ring, then the composition R\fX A\fX is the\r
well-known functor S\r
−1\r
.\r
As an application, we may define \fXA in the case when A is a commutative\r
ring without identity element. Suppose A is such a ring, X a subset of it. Let\r
A[1] be (following Nagata) the additive group Z × A together with the extra\r
operations 1 = (1, 0) and\r
(n, a)(n\r
0\r
, a\r
0\r
) = (nn0, na0 + n\r
0\r
a + aa0),\r
which makes A[1] a commutative ring with identity 1, and with A injectively\r
embedded by the operation-preserving injection x 7→ (0, x). Identify A with\r
its image under this embedding. A is then an ideal of A[1], in particular an\r
A[1]-module. In this way, \fX A is defined as a \fXA[1]-module.\r
Another application is exponentiation with fractions as exponents. Since\r
every commutative monoid hM, e, ·i is an N-module by multiplication mn(m ∈\r
M, n ∈ N), it is extended to a \fS0N-module \fS0M consisting of elements [m, n]\r
(m ∈ M, n ∈ N, write √n m for [m, n]). One has √n m\r
p/q =\r
q√n mp. In particular,\r
x\r
1/0 and x0/0\r
is defined in this way."""

[[sections]]
number = "45"
title = "References"
text = """
[AM69] M. F. Atiyah and I. G. MacDonald. Introduction to Commutative\r
Algebra. Addison-Wesley, London, 1969.\r
[Bir35] Birkhoff, 1935. See e.g. [BS81] theorem 11.9, p. 75 or [Gr¨a79] theorem\r
3, p. 171.\r
[Bor94] F. Borceux. Handbook of Categorical Algebra, volume 2. Cambridge\r
University Press, Cambridge, 1994.\r
[Bou73] N. Bourbaki. Elements of Mathematics, Algebra, Part I. Addison\u0002Wesley, Reading, Massachusetts, 1973.\r
[BS81] S. Burris and H. P. Sankappanavar. A Course in Universal Algebra.\r
Springer-Verlag, New York, 1981.\r
[EP00] A. Edalat and P. J. Potts. A new representation for exact real num\u0002bers. In S. Brookes and M. Mislove, editors, Electronic Notes in\r
Theoretical Computer Science, volume 6. Elsevier Science Publishers,\r
2000.\r
[Gol99] J. S. Golan. Semirings and their Applications. Kluwer Academic\r
Publishers, Dordrecht, 1999.\r
[Gr¨a79] G. Gr¨atzer. Universal Algebra. Springer-Verlag, New York, second\r
edition, 1979.\r
[Har77] R. Hartshorne. Algebraic Geometry. Springer-Verlag, New York, 1977.\r
[Hey56] A. Heyting. Intuitionism: An Introduction. North-Holland, Amster\u0002dam, 1956.\r
[ML84] P. Martin-L¨of. Intuitionistic Type Theory. Bibliopolis, Naples, 1984.\r
[MRR88] R. Mines, F. Richman, and W. Ruitenburg. A Course in Constructive\r
Algebra. Springer-Verlag, New York, 1988.\r
[Ob¨ e00] M. Ob¨ erg. Algebraiska och topologiska hjul. Examensarbete i matem\u0002atik, Stockholm University, 2000.\r
[Pot98] P. J. Potts. Exact Real Arithmetic using M¨obius Transformations.\r
PhD thesis, University of London, 1998. Currently available at\r
http://www.purplefinder.com/˜potts/.\r
[Set97] A. Setzer. Wheels (draft). Currently available at http://www\u0002compsci.swan.ac.uk/˜csetzer/, 1997.\r
46"""

[[figures]]
label = "fig:1"
page_num = 1
image_path = "images/image_p1_1.png"

[[figures]]
label = "fig:2"
page_num = 1
image_path = "images/image_p1_2.png"

[[figures]]
label = "fig:3"
page_num = 5
image_path = "images/image_p5_3.png"

[[figures]]
label = "fig:4"
page_num = 6
image_path = "images/image_p6_4.png"

[[figures]]
label = "fig:5"
page_num = 7
image_path = "images/image_p7_5.png"

[[figures]]
label = "fig:6"
page_num = 7
image_path = "images/image_p7_6.png"

[[figures]]
label = "fig:7"
page_num = 7
image_path = "images/image_p7_7.png"

[[figures]]
label = "fig:8"
page_num = 7
image_path = "images/image_p7_8.png"

[[figures]]
label = "fig:9"
page_num = 8
image_path = "images/image_p8_9.png"

[[figures]]
label = "fig:10"
page_num = 11
image_path = "images/image_p11_10.png"

[[figures]]
label = "fig:11"
page_num = 11
image_path = "images/image_p11_11.png"

[[figures]]
label = "fig:12"
page_num = 12
image_path = "images/image_p12_12.png"

[[figures]]
label = "fig:13"
page_num = 12
image_path = "images/image_p12_13.png"

[[figures]]
label = "fig:14"
page_num = 12
image_path = "images/image_p12_14.png"

[[figures]]
label = "fig:15"
page_num = 12
image_path = "images/image_p12_15.png"

[[figures]]
label = "fig:16"
page_num = 12
image_path = "images/image_p12_16.png"

[[figures]]
label = "fig:17"
page_num = 13
image_path = "images/image_p13_17.png"

[[figures]]
label = "fig:18"
page_num = 13
image_path = "images/image_p13_18.png"

[[figures]]
label = "fig:19"
page_num = 13
image_path = "images/image_p13_19.png"

[[figures]]
label = "fig:20"
page_num = 13
image_path = "images/image_p13_20.png"

[[figures]]
label = "fig:21"
page_num = 13
image_path = "images/image_p13_21.png"

[[figures]]
label = "fig:22"
page_num = 13
image_path = "images/image_p13_22.png"

[[figures]]
label = "fig:23"
page_num = 13
image_path = "images/image_p13_23.png"

[[figures]]
label = "fig:24"
page_num = 13
image_path = "images/image_p13_24.png"

[[figures]]
label = "fig:25"
page_num = 13
image_path = "images/image_p13_25.png"

[[figures]]
label = "fig:26"
page_num = 14
image_path = "images/image_p14_26.png"

[[figures]]
label = "fig:27"
page_num = 14
image_path = "images/image_p14_27.png"

[[figures]]
label = "fig:28"
page_num = 14
image_path = "images/image_p14_28.png"

[[figures]]
label = "fig:29"
page_num = 14
image_path = "images/image_p14_29.png"

[[figures]]
label = "fig:30"
page_num = 14
image_path = "images/image_p14_30.png"

[[figures]]
label = "fig:31"
page_num = 14
image_path = "images/image_p14_31.png"

[[figures]]
label = "fig:32"
page_num = 14
image_path = "images/image_p14_32.png"

[[figures]]
label = "fig:33"
page_num = 14
image_path = "images/image_p14_33.png"

[[figures]]
label = "fig:34"
page_num = 14
image_path = "images/image_p14_34.png"

[[figures]]
label = "fig:35"
page_num = 14
image_path = "images/image_p14_35.png"

[[figures]]
label = "fig:36"
page_num = 14
image_path = "images/image_p14_36.png"

[[figures]]
label = "fig:37"
page_num = 14
image_path = "images/image_p14_37.png"

[[figures]]
label = "fig:38"
page_num = 14
image_path = "images/image_p14_38.png"

[[figures]]
label = "fig:39"
page_num = 14
image_path = "images/image_p14_39.png"

[[figures]]
label = "fig:40"
page_num = 14
image_path = "images/image_p14_40.png"

[[figures]]
label = "fig:41"
page_num = 14
image_path = "images/image_p14_41.png"

[[figures]]
label = "fig:42"
page_num = 14
image_path = "images/image_p14_42.png"

[[figures]]
label = "fig:43"
page_num = 14
image_path = "images/image_p14_43.png"

[[figures]]
label = "fig:44"
page_num = 14
image_path = "images/image_p14_44.png"

[[figures]]
label = "fig:45"
page_num = 14
image_path = "images/image_p14_45.png"

[[figures]]
label = "fig:46"
page_num = 14
image_path = "images/image_p14_46.png"

[[figures]]
label = "fig:47"
page_num = 14
image_path = "images/image_p14_47.png"

[[figures]]
label = "fig:48"
page_num = 14
image_path = "images/image_p14_48.png"

[[figures]]
label = "fig:49"
page_num = 14
image_path = "images/image_p14_49.png"

[[figures]]
label = "fig:50"
page_num = 14
image_path = "images/image_p14_50.png"

[[figures]]
label = "fig:51"
page_num = 14
image_path = "images/image_p14_51.png"

[[figures]]
label = "fig:52"
page_num = 14
image_path = "images/image_p14_52.png"

[[figures]]
label = "fig:53"
page_num = 14
image_path = "images/image_p14_53.png"

[[figures]]
label = "fig:54"
page_num = 14
image_path = "images/image_p14_54.png"

[[figures]]
label = "fig:55"
page_num = 14
image_path = "images/image_p14_55.png"

[[figures]]
label = "fig:56"
page_num = 14
image_path = "images/image_p14_56.png"

[[figures]]
label = "fig:57"
page_num = 14
image_path = "images/image_p14_57.png"

[[figures]]
label = "fig:58"
page_num = 14
image_path = "images/image_p14_58.png"

[[figures]]
label = "fig:59"
page_num = 15
image_path = "images/image_p15_59.png"

[[figures]]
label = "fig:60"
page_num = 15
image_path = "images/image_p15_60.png"

[[figures]]
label = "fig:61"
page_num = 15
image_path = "images/image_p15_61.png"

[[figures]]
label = "fig:62"
page_num = 15
image_path = "images/image_p15_62.png"

[[figures]]
label = "fig:63"
page_num = 15
image_path = "images/image_p15_63.png"

[[figures]]
label = "fig:64"
page_num = 15
image_path = "images/image_p15_64.png"

[[figures]]
label = "fig:65"
page_num = 15
image_path = "images/image_p15_65.png"

[[figures]]
label = "fig:66"
page_num = 15
image_path = "images/image_p15_66.png"

[[figures]]
label = "fig:67"
page_num = 15
image_path = "images/image_p15_67.png"

[[figures]]
label = "fig:68"
page_num = 15
image_path = "images/image_p15_68.png"

[[figures]]
label = "fig:69"
page_num = 15
image_path = "images/image_p15_69.png"

[[figures]]
label = "fig:70"
page_num = 15
image_path = "images/image_p15_70.png"

[[figures]]
label = "fig:71"
page_num = 15
image_path = "images/image_p15_71.png"

[[figures]]
label = "fig:72"
page_num = 15
image_path = "images/image_p15_72.png"

[[figures]]
label = "fig:73"
page_num = 15
image_path = "images/image_p15_73.png"

[[figures]]
label = "fig:74"
page_num = 15
image_path = "images/image_p15_74.png"

[[figures]]
label = "fig:75"
page_num = 16
image_path = "images/image_p16_75.png"

[[figures]]
label = "fig:76"
page_num = 16
image_path = "images/image_p16_76.png"

[[figures]]
label = "fig:77"
page_num = 16
image_path = "images/image_p16_77.png"

[[figures]]
label = "fig:78"
page_num = 16
image_path = "images/image_p16_78.png"

[[figures]]
label = "fig:79"
page_num = 18
image_path = "images/image_p18_79.png"

[[figures]]
label = "fig:80"
page_num = 19
image_path = "images/image_p19_80.png"

[[figures]]
label = "fig:81"
page_num = 20
image_path = "images/image_p20_81.png"

[[figures]]
label = "fig:82"
page_num = 20
image_path = "images/image_p20_82.png"

[[figures]]
label = "fig:83"
page_num = 20
image_path = "images/image_p20_83.png"

[[figures]]
label = "fig:84"
page_num = 20
image_path = "images/image_p20_84.png"

[[figures]]
label = "fig:85"
page_num = 20
image_path = "images/image_p20_85.png"

[[figures]]
label = "fig:86"
page_num = 21
image_path = "images/image_p21_86.png"

[[figures]]
label = "fig:87"
page_num = 21
image_path = "images/image_p21_87.png"

[[figures]]
label = "fig:88"
page_num = 21
image_path = "images/image_p21_88.png"

[[figures]]
label = "fig:89"
page_num = 21
image_path = "images/image_p21_89.png"

[[figures]]
label = "fig:90"
page_num = 21
image_path = "images/image_p21_90.png"

[[figures]]
label = "fig:91"
page_num = 21
image_path = "images/image_p21_91.png"

[[figures]]
label = "fig:92"
page_num = 21
image_path = "images/image_p21_92.png"

[[figures]]
label = "fig:93"
page_num = 21
image_path = "images/image_p21_93.png"

[[figures]]
label = "fig:94"
page_num = 21
image_path = "images/image_p21_94.png"

[[figures]]
label = "fig:95"
page_num = 21
image_path = "images/image_p21_95.png"

[[figures]]
label = "fig:96"
page_num = 21
image_path = "images/image_p21_96.png"

[[figures]]
label = "fig:97"
page_num = 21
image_path = "images/image_p21_97.png"

[[figures]]
label = "fig:98"
page_num = 21
image_path = "images/image_p21_98.png"

[[figures]]
label = "fig:99"
page_num = 21
image_path = "images/image_p21_99.png"

[[figures]]
label = "fig:100"
page_num = 21
image_path = "images/image_p21_100.png"

[[figures]]
label = "fig:101"
page_num = 21
image_path = "images/image_p21_101.png"

[[figures]]
label = "fig:102"
page_num = 21
image_path = "images/image_p21_102.png"

[[figures]]
label = "fig:103"
page_num = 21
image_path = "images/image_p21_103.png"

[[figures]]
label = "fig:104"
page_num = 21
image_path = "images/image_p21_104.png"

[[figures]]
label = "fig:105"
page_num = 21
image_path = "images/image_p21_105.png"

[[figures]]
label = "fig:106"
page_num = 21
image_path = "images/image_p21_106.png"

[[figures]]
label = "fig:107"
page_num = 21
image_path = "images/image_p21_107.png"

[[figures]]
label = "fig:108"
page_num = 21
image_path = "images/image_p21_108.png"

[[figures]]
label = "fig:109"
page_num = 21
image_path = "images/image_p21_109.png"

[[figures]]
label = "fig:110"
page_num = 21
image_path = "images/image_p21_110.png"

[[figures]]
label = "fig:111"
page_num = 21
image_path = "images/image_p21_111.png"

[[figures]]
label = "fig:112"
page_num = 21
image_path = "images/image_p21_112.png"

[[figures]]
label = "fig:113"
page_num = 21
image_path = "images/image_p21_113.png"

[[figures]]
label = "fig:114"
page_num = 21
image_path = "images/image_p21_114.png"

[[figures]]
label = "fig:115"
page_num = 22
image_path = "images/image_p22_115.png"

[[figures]]
label = "fig:116"
page_num = 22
image_path = "images/image_p22_116.png"

[[figures]]
label = "fig:117"
page_num = 22
image_path = "images/image_p22_117.png"

[[figures]]
label = "fig:118"
page_num = 22
image_path = "images/image_p22_118.png"

[[figures]]
label = "fig:119"
page_num = 22
image_path = "images/image_p22_119.png"

[[figures]]
label = "fig:120"
page_num = 22
image_path = "images/image_p22_120.png"

[[figures]]
label = "fig:121"
page_num = 22
image_path = "images/image_p22_121.png"

[[figures]]
label = "fig:122"
page_num = 22
image_path = "images/image_p22_122.png"

[[figures]]
label = "fig:123"
page_num = 22
image_path = "images/image_p22_123.png"

[[figures]]
label = "fig:124"
page_num = 22
image_path = "images/image_p22_124.png"

[[figures]]
label = "fig:125"
page_num = 22
image_path = "images/image_p22_125.png"

[[figures]]
label = "fig:126"
page_num = 22
image_path = "images/image_p22_126.png"

[[figures]]
label = "fig:127"
page_num = 22
image_path = "images/image_p22_127.png"

[[figures]]
label = "fig:128"
page_num = 22
image_path = "images/image_p22_128.png"

[[figures]]
label = "fig:129"
page_num = 22
image_path = "images/image_p22_129.png"

[[figures]]
label = "fig:130"
page_num = 22
image_path = "images/image_p22_130.png"

[[figures]]
label = "fig:131"
page_num = 22
image_path = "images/image_p22_131.png"

[[figures]]
label = "fig:132"
page_num = 22
image_path = "images/image_p22_132.png"

[[figures]]
label = "fig:133"
page_num = 22
image_path = "images/image_p22_133.png"

[[figures]]
label = "fig:134"
page_num = 22
image_path = "images/image_p22_134.png"

[[figures]]
label = "fig:135"
page_num = 22
image_path = "images/image_p22_135.png"

[[figures]]
label = "fig:136"
page_num = 22
image_path = "images/image_p22_136.png"

[[figures]]
label = "fig:137"
page_num = 22
image_path = "images/image_p22_137.png"

[[figures]]
label = "fig:138"
page_num = 22
image_path = "images/image_p22_138.png"

[[figures]]
label = "fig:139"
page_num = 22
image_path = "images/image_p22_139.png"

[[figures]]
label = "fig:140"
page_num = 22
image_path = "images/image_p22_140.png"

[[figures]]
label = "fig:141"
page_num = 22
image_path = "images/image_p22_141.png"

[[figures]]
label = "fig:142"
page_num = 22
image_path = "images/image_p22_142.png"

[[figures]]
label = "fig:143"
page_num = 22
image_path = "images/image_p22_143.png"

[[figures]]
label = "fig:144"
page_num = 22
image_path = "images/image_p22_144.png"

[[figures]]
label = "fig:145"
page_num = 22
image_path = "images/image_p22_145.png"

[[figures]]
label = "fig:146"
page_num = 22
image_path = "images/image_p22_146.png"

[[figures]]
label = "fig:147"
page_num = 22
image_path = "images/image_p22_147.png"

[[figures]]
label = "fig:148"
page_num = 22
image_path = "images/image_p22_148.png"

[[figures]]
label = "fig:149"
page_num = 22
image_path = "images/image_p22_149.png"

[[figures]]
label = "fig:150"
page_num = 22
image_path = "images/image_p22_150.png"

[[figures]]
label = "fig:151"
page_num = 22
image_path = "images/image_p22_151.png"

[[figures]]
label = "fig:152"
page_num = 22
image_path = "images/image_p22_152.png"

[[figures]]
label = "fig:153"
page_num = 23
image_path = "images/image_p23_153.png"

[[figures]]
label = "fig:154"
page_num = 23
image_path = "images/image_p23_154.png"

[[figures]]
label = "fig:155"
page_num = 23
image_path = "images/image_p23_155.png"

[[figures]]
label = "fig:156"
page_num = 23
image_path = "images/image_p23_156.png"

[[figures]]
label = "fig:157"
page_num = 23
image_path = "images/image_p23_157.png"

[[figures]]
label = "fig:158"
page_num = 23
image_path = "images/image_p23_158.png"

[[figures]]
label = "fig:159"
page_num = 23
image_path = "images/image_p23_159.png"

[[figures]]
label = "fig:160"
page_num = 23
image_path = "images/image_p23_160.png"

[[figures]]
label = "fig:161"
page_num = 23
image_path = "images/image_p23_161.png"

[[figures]]
label = "fig:162"
page_num = 23
image_path = "images/image_p23_162.png"

[[figures]]
label = "fig:163"
page_num = 23
image_path = "images/image_p23_163.png"

[[figures]]
label = "fig:164"
page_num = 23
image_path = "images/image_p23_164.png"

[[figures]]
label = "fig:165"
page_num = 23
image_path = "images/image_p23_165.png"

[[figures]]
label = "fig:166"
page_num = 23
image_path = "images/image_p23_166.png"

[[figures]]
label = "fig:167"
page_num = 23
image_path = "images/image_p23_167.png"

[[figures]]
label = "fig:168"
page_num = 23
image_path = "images/image_p23_168.png"

[[figures]]
label = "fig:169"
page_num = 23
image_path = "images/image_p23_169.png"

[[figures]]
label = "fig:170"
page_num = 23
image_path = "images/image_p23_170.png"

[[figures]]
label = "fig:171"
page_num = 23
image_path = "images/image_p23_171.png"

[[figures]]
label = "fig:172"
page_num = 23
image_path = "images/image_p23_172.png"

[[figures]]
label = "fig:173"
page_num = 23
image_path = "images/image_p23_173.png"

[[figures]]
label = "fig:174"
page_num = 23
image_path = "images/image_p23_174.png"

[[figures]]
label = "fig:175"
page_num = 23
image_path = "images/image_p23_175.png"

[[figures]]
label = "fig:176"
page_num = 23
image_path = "images/image_p23_176.png"

[[figures]]
label = "fig:177"
page_num = 23
image_path = "images/image_p23_177.png"

[[figures]]
label = "fig:178"
page_num = 23
image_path = "images/image_p23_178.png"

[[figures]]
label = "fig:179"
page_num = 23
image_path = "images/image_p23_179.png"

[[figures]]
label = "fig:180"
page_num = 23
image_path = "images/image_p23_180.png"

[[figures]]
label = "fig:181"
page_num = 23
image_path = "images/image_p23_181.png"

[[figures]]
label = "fig:182"
page_num = 23
image_path = "images/image_p23_182.png"

[[figures]]
label = "fig:183"
page_num = 23
image_path = "images/image_p23_183.png"

[[figures]]
label = "fig:184"
page_num = 23
image_path = "images/image_p23_184.png"

[[figures]]
label = "fig:185"
page_num = 23
image_path = "images/image_p23_185.png"

[[figures]]
label = "fig:186"
page_num = 24
image_path = "images/image_p24_186.png"

[[figures]]
label = "fig:187"
page_num = 24
image_path = "images/image_p24_187.png"

[[figures]]
label = "fig:188"
page_num = 24
image_path = "images/image_p24_188.png"

[[figures]]
label = "fig:189"
page_num = 24
image_path = "images/image_p24_189.png"

[[figures]]
label = "fig:190"
page_num = 24
image_path = "images/image_p24_190.png"

[[figures]]
label = "fig:191"
page_num = 24
image_path = "images/image_p24_191.png"

[[figures]]
label = "fig:192"
page_num = 24
image_path = "images/image_p24_192.png"

[[figures]]
label = "fig:193"
page_num = 24
image_path = "images/image_p24_193.png"

[[figures]]
label = "fig:194"
page_num = 24
image_path = "images/image_p24_194.png"

[[figures]]
label = "fig:195"
page_num = 24
image_path = "images/image_p24_195.png"

[[figures]]
label = "fig:196"
page_num = 24
image_path = "images/image_p24_196.png"

[[figures]]
label = "fig:197"
page_num = 24
image_path = "images/image_p24_197.png"

[[figures]]
label = "fig:198"
page_num = 24
image_path = "images/image_p24_198.png"

[[figures]]
label = "fig:199"
page_num = 24
image_path = "images/image_p24_199.png"

[[figures]]
label = "fig:200"
page_num = 24
image_path = "images/image_p24_200.png"

[[figures]]
label = "fig:201"
page_num = 24
image_path = "images/image_p24_201.png"

[[figures]]
label = "fig:202"
page_num = 24
image_path = "images/image_p24_202.png"

[[figures]]
label = "fig:203"
page_num = 24
image_path = "images/image_p24_203.png"

[[figures]]
label = "fig:204"
page_num = 24
image_path = "images/image_p24_204.png"

[[figures]]
label = "fig:205"
page_num = 24
image_path = "images/image_p24_205.png"

[[figures]]
label = "fig:206"
page_num = 24
image_path = "images/image_p24_206.png"

[[figures]]
label = "fig:207"
page_num = 24
image_path = "images/image_p24_207.png"

[[figures]]
label = "fig:208"
page_num = 26
image_path = "images/image_p26_208.png"

[[figures]]
label = "fig:209"
page_num = 26
image_path = "images/image_p26_209.png"

[[figures]]
label = "fig:210"
page_num = 26
image_path = "images/image_p26_210.png"

[[figures]]
label = "fig:211"
page_num = 26
image_path = "images/image_p26_211.png"

[[figures]]
label = "fig:212"
page_num = 26
image_path = "images/image_p26_212.png"

[[figures]]
label = "fig:213"
page_num = 27
image_path = "images/image_p27_213.png"

[[figures]]
label = "fig:214"
page_num = 27
image_path = "images/image_p27_214.png"

[[figures]]
label = "fig:215"
page_num = 27
image_path = "images/image_p27_215.png"

[[figures]]
label = "fig:216"
page_num = 27
image_path = "images/image_p27_216.png"

[[figures]]
label = "fig:217"
page_num = 27
image_path = "images/image_p27_217.png"

[[figures]]
label = "fig:218"
page_num = 27
image_path = "images/image_p27_218.png"

[[figures]]
label = "fig:219"
page_num = 27
image_path = "images/image_p27_219.png"

[[figures]]
label = "fig:220"
page_num = 27
image_path = "images/image_p27_220.png"

[[figures]]
label = "fig:221"
page_num = 27
image_path = "images/image_p27_221.png"

[[figures]]
label = "fig:222"
page_num = 27
image_path = "images/image_p27_222.png"

[[figures]]
label = "fig:223"
page_num = 28
image_path = "images/image_p28_223.png"

[[figures]]
label = "fig:224"
page_num = 28
image_path = "images/image_p28_224.png"

[[figures]]
label = "fig:225"
page_num = 28
image_path = "images/image_p28_225.png"

[[figures]]
label = "fig:226"
page_num = 28
image_path = "images/image_p28_226.png"

[[figures]]
label = "fig:227"
page_num = 28
image_path = "images/image_p28_227.png"

[[figures]]
label = "fig:228"
page_num = 28
image_path = "images/image_p28_228.png"

[[figures]]
label = "fig:229"
page_num = 28
image_path = "images/image_p28_229.png"

[[figures]]
label = "fig:230"
page_num = 28
image_path = "images/image_p28_230.png"

[[figures]]
label = "fig:231"
page_num = 28
image_path = "images/image_p28_231.png"

[[figures]]
label = "fig:232"
page_num = 28
image_path = "images/image_p28_232.png"

[[figures]]
label = "fig:233"
page_num = 28
image_path = "images/image_p28_233.png"

[[figures]]
label = "fig:234"
page_num = 28
image_path = "images/image_p28_234.png"

[[figures]]
label = "fig:235"
page_num = 28
image_path = "images/image_p28_235.png"

[[figures]]
label = "fig:236"
page_num = 28
image_path = "images/image_p28_236.png"

[[figures]]
label = "fig:237"
page_num = 28
image_path = "images/image_p28_237.png"

[[figures]]
label = "fig:238"
page_num = 28
image_path = "images/image_p28_238.png"

[[figures]]
label = "fig:239"
page_num = 28
image_path = "images/image_p28_239.png"

[[figures]]
label = "fig:240"
page_num = 28
image_path = "images/image_p28_240.png"

[[figures]]
label = "fig:241"
page_num = 28
image_path = "images/image_p28_241.png"

[[figures]]
label = "fig:242"
page_num = 28
image_path = "images/image_p28_242.png"

[[figures]]
label = "fig:243"
page_num = 28
image_path = "images/image_p28_243.png"

[[figures]]
label = "fig:244"
page_num = 28
image_path = "images/image_p28_244.png"

[[figures]]
label = "fig:245"
page_num = 28
image_path = "images/image_p28_245.png"

[[figures]]
label = "fig:246"
page_num = 28
image_path = "images/image_p28_246.png"

[[figures]]
label = "fig:247"
page_num = 28
image_path = "images/image_p28_247.png"

[[figures]]
label = "fig:248"
page_num = 28
image_path = "images/image_p28_248.png"

[[figures]]
label = "fig:249"
page_num = 28
image_path = "images/image_p28_249.png"

[[figures]]
label = "fig:250"
page_num = 28
image_path = "images/image_p28_250.png"

[[figures]]
label = "fig:251"
page_num = 28
image_path = "images/image_p28_251.png"

[[figures]]
label = "fig:252"
page_num = 28
image_path = "images/image_p28_252.png"

[[figures]]
label = "fig:253"
page_num = 28
image_path = "images/image_p28_253.png"

[[figures]]
label = "fig:254"
page_num = 28
image_path = "images/image_p28_254.png"

[[figures]]
label = "fig:255"
page_num = 28
image_path = "images/image_p28_255.png"

[[figures]]
label = "fig:256"
page_num = 28
image_path = "images/image_p28_256.png"

[[figures]]
label = "fig:257"
page_num = 28
image_path = "images/image_p28_257.png"

[[figures]]
label = "fig:258"
page_num = 28
image_path = "images/image_p28_258.png"

[[figures]]
label = "fig:259"
page_num = 28
image_path = "images/image_p28_259.png"

[[figures]]
label = "fig:260"
page_num = 28
image_path = "images/image_p28_260.png"

[[figures]]
label = "fig:261"
page_num = 28
image_path = "images/image_p28_261.png"

[[figures]]
label = "fig:262"
page_num = 28
image_path = "images/image_p28_262.png"

[[figures]]
label = "fig:263"
page_num = 28
image_path = "images/image_p28_263.png"

[[figures]]
label = "fig:264"
page_num = 29
image_path = "images/image_p29_264.png"

[[figures]]
label = "fig:265"
page_num = 29
image_path = "images/image_p29_265.png"

[[figures]]
label = "fig:266"
page_num = 29
image_path = "images/image_p29_266.png"

[[figures]]
label = "fig:267"
page_num = 29
image_path = "images/image_p29_267.png"

[[figures]]
label = "fig:268"
page_num = 29
image_path = "images/image_p29_268.png"

[[figures]]
label = "fig:269"
page_num = 29
image_path = "images/image_p29_269.png"

[[figures]]
label = "fig:270"
page_num = 29
image_path = "images/image_p29_270.png"

[[figures]]
label = "fig:271"
page_num = 29
image_path = "images/image_p29_271.png"

[[figures]]
label = "fig:272"
page_num = 29
image_path = "images/image_p29_272.png"

[[figures]]
label = "fig:273"
page_num = 29
image_path = "images/image_p29_273.png"

[[figures]]
label = "fig:274"
page_num = 29
image_path = "images/image_p29_274.png"

[[figures]]
label = "fig:275"
page_num = 29
image_path = "images/image_p29_275.png"

[[figures]]
label = "fig:276"
page_num = 29
image_path = "images/image_p29_276.png"

[[figures]]
label = "fig:277"
page_num = 30
image_path = "images/image_p30_277.png"

[[figures]]
label = "fig:278"
page_num = 30
image_path = "images/image_p30_278.png"

[[figures]]
label = "fig:279"
page_num = 30
image_path = "images/image_p30_279.png"

[[figures]]
label = "fig:280"
page_num = 30
image_path = "images/image_p30_280.png"

[[figures]]
label = "fig:281"
page_num = 30
image_path = "images/image_p30_281.png"

[[figures]]
label = "fig:282"
page_num = 30
image_path = "images/image_p30_282.png"

[[figures]]
label = "fig:283"
page_num = 30
image_path = "images/image_p30_283.png"

[[figures]]
label = "fig:284"
page_num = 30
image_path = "images/image_p30_284.png"

[[figures]]
label = "fig:285"
page_num = 30
image_path = "images/image_p30_285.png"

[[figures]]
label = "fig:286"
page_num = 30
image_path = "images/image_p30_286.png"

[[figures]]
label = "fig:287"
page_num = 30
image_path = "images/image_p30_287.png"

[[figures]]
label = "fig:288"
page_num = 30
image_path = "images/image_p30_288.png"

[[figures]]
label = "fig:289"
page_num = 31
image_path = "images/image_p31_289.png"

[[figures]]
label = "fig:290"
page_num = 31
image_path = "images/image_p31_290.png"

[[figures]]
label = "fig:291"
page_num = 31
image_path = "images/image_p31_291.png"

[[figures]]
label = "fig:292"
page_num = 31
image_path = "images/image_p31_292.png"

[[figures]]
label = "fig:293"
page_num = 31
image_path = "images/image_p31_293.png"

[[figures]]
label = "fig:294"
page_num = 32
image_path = "images/image_p32_294.png"

[[figures]]
label = "fig:295"
page_num = 32
image_path = "images/image_p32_295.png"

[[figures]]
label = "fig:296"
page_num = 32
image_path = "images/image_p32_296.png"

[[figures]]
label = "fig:297"
page_num = 32
image_path = "images/image_p32_297.png"

[[figures]]
label = "fig:298"
page_num = 32
image_path = "images/image_p32_298.png"

[[figures]]
label = "fig:299"
page_num = 32
image_path = "images/image_p32_299.png"

[[figures]]
label = "fig:300"
page_num = 32
image_path = "images/image_p32_300.png"

[[figures]]
label = "fig:301"
page_num = 32
image_path = "images/image_p32_301.png"

[[figures]]
label = "fig:302"
page_num = 32
image_path = "images/image_p32_302.png"

[[figures]]
label = "fig:303"
page_num = 32
image_path = "images/image_p32_303.png"

[[figures]]
label = "fig:304"
page_num = 32
image_path = "images/image_p32_304.png"

[[figures]]
label = "fig:305"
page_num = 32
image_path = "images/image_p32_305.png"

[[figures]]
label = "fig:306"
page_num = 32
image_path = "images/image_p32_306.png"

[[figures]]
label = "fig:307"
page_num = 32
image_path = "images/image_p32_307.png"

[[figures]]
label = "fig:308"
page_num = 32
image_path = "images/image_p32_308.png"

[[figures]]
label = "fig:309"
page_num = 32
image_path = "images/image_p32_309.png"

[[figures]]
label = "fig:310"
page_num = 32
image_path = "images/image_p32_310.png"

[[figures]]
label = "fig:311"
page_num = 32
image_path = "images/image_p32_311.png"

[[figures]]
label = "fig:312"
page_num = 32
image_path = "images/image_p32_312.png"

[[figures]]
label = "fig:313"
page_num = 33
image_path = "images/image_p33_313.png"

[[figures]]
label = "fig:314"
page_num = 33
image_path = "images/image_p33_314.png"

[[figures]]
label = "fig:315"
page_num = 33
image_path = "images/image_p33_315.png"

[[figures]]
label = "fig:316"
page_num = 33
image_path = "images/image_p33_316.png"

[[figures]]
label = "fig:317"
page_num = 33
image_path = "images/image_p33_317.png"

[[figures]]
label = "fig:318"
page_num = 34
image_path = "images/image_p34_318.png"

[[figures]]
label = "fig:319"
page_num = 35
image_path = "images/image_p35_319.png"

[[figures]]
label = "fig:320"
page_num = 36
image_path = "images/image_p36_320.png"

[[figures]]
label = "fig:321"
page_num = 36
image_path = "images/image_p36_321.png"

[[figures]]
label = "fig:322"
page_num = 36
image_path = "images/image_p36_322.png"

[[figures]]
label = "fig:323"
page_num = 36
image_path = "images/image_p36_323.png"

[[figures]]
label = "fig:324"
page_num = 37
image_path = "images/image_p37_324.png"

[[figures]]
label = "fig:325"
page_num = 37
image_path = "images/image_p37_325.png"

[[figures]]
label = "fig:326"
page_num = 37
image_path = "images/image_p37_326.png"

[[figures]]
label = "fig:327"
page_num = 37
image_path = "images/image_p37_327.png"

[[figures]]
label = "fig:328"
page_num = 37
image_path = "images/image_p37_328.png"

[[figures]]
label = "fig:329"
page_num = 37
image_path = "images/image_p37_329.png"

[[figures]]
label = "fig:330"
page_num = 37
image_path = "images/image_p37_330.png"

[[figures]]
label = "fig:331"
page_num = 37
image_path = "images/image_p37_331.png"

[[figures]]
label = "fig:332"
page_num = 38
image_path = "images/image_p38_332.png"

[[figures]]
label = "fig:333"
page_num = 38
image_path = "images/image_p38_333.png"

[[figures]]
label = "fig:334"
page_num = 38
image_path = "images/image_p38_334.png"

[[figures]]
label = "fig:335"
page_num = 38
image_path = "images/image_p38_335.png"

[[figures]]
label = "fig:336"
page_num = 38
image_path = "images/image_p38_336.png"

[[figures]]
label = "fig:337"
page_num = 38
image_path = "images/image_p38_337.png"

[[figures]]
label = "fig:338"
page_num = 38
image_path = "images/image_p38_338.png"

[[figures]]
label = "fig:339"
page_num = 38
image_path = "images/image_p38_339.png"

[[figures]]
label = "fig:340"
page_num = 38
image_path = "images/image_p38_340.png"

[[figures]]
label = "fig:341"
page_num = 38
image_path = "images/image_p38_341.png"

[[figures]]
label = "fig:342"
page_num = 38
image_path = "images/image_p38_342.png"

[[figures]]
label = "fig:343"
page_num = 38
image_path = "images/image_p38_343.png"

[[figures]]
label = "fig:344"
page_num = 38
image_path = "images/image_p38_344.png"

[[figures]]
label = "fig:345"
page_num = 38
image_path = "images/image_p38_345.png"

[[figures]]
label = "fig:346"
page_num = 38
image_path = "images/image_p38_346.png"

[[figures]]
label = "fig:347"
page_num = 38
image_path = "images/image_p38_347.png"

[[figures]]
label = "fig:348"
page_num = 38
image_path = "images/image_p38_348.png"

[[figures]]
label = "fig:349"
page_num = 38
image_path = "images/image_p38_349.png"

[[figures]]
label = "fig:350"
page_num = 38
image_path = "images/image_p38_350.png"

[[figures]]
label = "fig:351"
page_num = 38
image_path = "images/image_p38_351.png"

[[figures]]
label = "fig:352"
page_num = 38
image_path = "images/image_p38_352.png"

[[figures]]
label = "fig:353"
page_num = 38
image_path = "images/image_p38_353.png"

[[figures]]
label = "fig:354"
page_num = 39
image_path = "images/image_p39_354.png"

[[figures]]
label = "fig:355"
page_num = 39
image_path = "images/image_p39_355.png"

[[figures]]
label = "fig:356"
page_num = 39
image_path = "images/image_p39_356.png"

[[figures]]
label = "fig:357"
page_num = 39
image_path = "images/image_p39_357.png"

[[figures]]
label = "fig:358"
page_num = 39
image_path = "images/image_p39_358.png"

[[figures]]
label = "fig:359"
page_num = 39
image_path = "images/image_p39_359.png"

[[figures]]
label = "fig:360"
page_num = 39
image_path = "images/image_p39_360.png"

[[figures]]
label = "fig:361"
page_num = 39
image_path = "images/image_p39_361.png"

[[figures]]
label = "fig:362"
page_num = 40
image_path = "images/image_p40_362.png"

[[figures]]
label = "fig:363"
page_num = 40
image_path = "images/image_p40_363.png"

[[figures]]
label = "fig:364"
page_num = 40
image_path = "images/image_p40_364.png"

[[figures]]
label = "fig:365"
page_num = 40
image_path = "images/image_p40_365.png"

[[figures]]
label = "fig:366"
page_num = 40
image_path = "images/image_p40_366.png"

[[figures]]
label = "fig:367"
page_num = 40
image_path = "images/image_p40_367.png"

[[figures]]
label = "fig:368"
page_num = 40
image_path = "images/image_p40_368.png"

[[figures]]
label = "fig:369"
page_num = 40
image_path = "images/image_p40_369.png"

[[figures]]
label = "fig:370"
page_num = 40
image_path = "images/image_p40_370.png"

[[figures]]
label = "fig:371"
page_num = 40
image_path = "images/image_p40_371.png"

[[figures]]
label = "fig:372"
page_num = 40
image_path = "images/image_p40_372.png"

[[figures]]
label = "fig:373"
page_num = 40
image_path = "images/image_p40_373.png"

[[figures]]
label = "fig:374"
page_num = 41
image_path = "images/image_p41_374.png"

[[figures]]
label = "fig:375"
page_num = 41
image_path = "images/image_p41_375.png"

[[figures]]
label = "fig:376"
page_num = 41
image_path = "images/image_p41_376.png"

[[figures]]
label = "fig:377"
page_num = 41
image_path = "images/image_p41_377.png"

[[figures]]
label = "fig:378"
page_num = 41
image_path = "images/image_p41_378.png"

[[figures]]
label = "fig:379"
page_num = 41
image_path = "images/image_p41_379.png"

[[figures]]
label = "fig:380"
page_num = 42
image_path = "images/image_p42_380.png"

[[figures]]
label = "fig:381"
page_num = 42
image_path = "images/image_p42_381.png"

[[figures]]
label = "fig:382"
page_num = 42
image_path = "images/image_p42_382.png"

[[figures]]
label = "fig:383"
page_num = 42
image_path = "images/image_p42_383.png"

[[figures]]
label = "fig:384"
page_num = 42
image_path = "images/image_p42_384.png"

[[figures]]
label = "fig:385"
page_num = 42
image_path = "images/image_p42_385.png"

[[figures]]
label = "fig:386"
page_num = 42
image_path = "images/image_p42_386.png"

[[figures]]
label = "fig:387"
page_num = 42
image_path = "images/image_p42_387.png"

[[figures]]
label = "fig:388"
page_num = 42
image_path = "images/image_p42_388.png"

[[figures]]
label = "fig:389"
page_num = 42
image_path = "images/image_p42_389.png"

[[figures]]
label = "fig:390"
page_num = 42
image_path = "images/image_p42_390.png"

[[figures]]
label = "fig:391"
page_num = 42
image_path = "images/image_p42_391.png"

[[figures]]
label = "fig:392"
page_num = 42
image_path = "images/image_p42_392.png"

[[figures]]
label = "fig:393"
page_num = 42
image_path = "images/image_p42_393.png"

[[figures]]
label = "fig:394"
page_num = 42
image_path = "images/image_p42_394.png"

[[figures]]
label = "fig:395"
page_num = 42
image_path = "images/image_p42_395.png"

[[figures]]
label = "fig:396"
page_num = 42
image_path = "images/image_p42_396.png"

[[figures]]
label = "fig:397"
page_num = 42
image_path = "images/image_p42_397.png"

[[figures]]
label = "fig:398"
page_num = 42
image_path = "images/image_p42_398.png"

[[figures]]
label = "fig:399"
page_num = 42
image_path = "images/image_p42_399.png"

[[figures]]
label = "fig:400"
page_num = 42
image_path = "images/image_p42_400.png"

[[figures]]
label = "fig:401"
page_num = 42
image_path = "images/image_p42_401.png"

[[figures]]
label = "fig:402"
page_num = 42
image_path = "images/image_p42_402.png"

[[figures]]
label = "fig:403"
page_num = 42
image_path = "images/image_p42_403.png"

[[figures]]
label = "fig:404"
page_num = 42
image_path = "images/image_p42_404.png"

[[figures]]
label = "fig:405"
page_num = 42
image_path = "images/image_p42_405.png"

[[figures]]
label = "fig:406"
page_num = 42
image_path = "images/image_p42_406.png"

[[figures]]
label = "fig:407"
page_num = 42
image_path = "images/image_p42_407.png"

[[figures]]
label = "fig:408"
page_num = 42
image_path = "images/image_p42_408.png"

[[figures]]
label = "fig:409"
page_num = 42
image_path = "images/image_p42_409.png"

[[figures]]
label = "fig:410"
page_num = 43
image_path = "images/image_p43_410.png"

[[figures]]
label = "fig:411"
page_num = 43
image_path = "images/image_p43_411.png"

[[figures]]
label = "fig:412"
page_num = 43
image_path = "images/image_p43_412.png"

[[figures]]
label = "fig:413"
page_num = 43
image_path = "images/image_p43_413.png"

[[figures]]
label = "fig:414"
page_num = 43
image_path = "images/image_p43_414.png"

[[figures]]
label = "fig:415"
page_num = 43
image_path = "images/image_p43_415.png"

[[figures]]
label = "fig:416"
page_num = 43
image_path = "images/image_p43_416.png"

[[figures]]
label = "fig:417"
page_num = 43
image_path = "images/image_p43_417.png"

[[figures]]
label = "fig:418"
page_num = 43
image_path = "images/image_p43_418.png"

[[figures]]
label = "fig:419"
page_num = 43
image_path = "images/image_p43_419.png"

[[figures]]
label = "fig:420"
page_num = 43
image_path = "images/image_p43_420.png"

[[figures]]
label = "fig:421"
page_num = 43
image_path = "images/image_p43_421.png"

[[figures]]
label = "fig:422"
page_num = 43
image_path = "images/image_p43_422.png"

[[figures]]
label = "fig:423"
page_num = 43
image_path = "images/image_p43_423.png"

[[figures]]
label = "fig:424"
page_num = 43
image_path = "images/image_p43_424.png"

[[figures]]
label = "fig:425"
page_num = 43
image_path = "images/image_p43_425.png"

[[figures]]
label = "fig:426"
page_num = 43
image_path = "images/image_p43_426.png"

[[figures]]
label = "fig:427"
page_num = 44
image_path = "images/image_p44_427.png"

[[figures]]
label = "fig:428"
page_num = 44
image_path = "images/image_p44_428.png"

[[figures]]
label = "fig:429"
page_num = 44
image_path = "images/image_p44_429.png"

[[figures]]
label = "fig:430"
page_num = 44
image_path = "images/image_p44_430.png"

[[figures]]
label = "fig:431"
page_num = 44
image_path = "images/image_p44_431.png"

[[figures]]
label = "fig:432"
page_num = 44
image_path = "images/image_p44_432.png"

[[figures]]
label = "fig:433"
page_num = 44
image_path = "images/image_p44_433.png"

[[figures]]
label = "fig:434"
page_num = 44
image_path = "images/image_p44_434.png"

[[figures]]
label = "fig:435"
page_num = 44
image_path = "images/image_p44_435.png"

[[figures]]
label = "fig:436"
page_num = 44
image_path = "images/image_p44_436.png"

[[figures]]
label = "fig:437"
page_num = 44
image_path = "images/image_p44_437.png"

[[figures]]
label = "fig:438"
page_num = 44
image_path = "images/image_p44_438.png"

[[figures]]
label = "fig:439"
page_num = 44
image_path = "images/image_p44_439.png"

[[figures]]
label = "fig:440"
page_num = 44
image_path = "images/image_p44_440.png"

[[figures]]
label = "fig:441"
page_num = 44
image_path = "images/image_p44_441.png"

[[figures]]
label = "fig:442"
page_num = 44
image_path = "images/image_p44_442.png"

[[figures]]
label = "fig:443"
page_num = 44
image_path = "images/image_p44_443.png"

[[figures]]
label = "fig:444"
page_num = 44
image_path = "images/image_p44_444.png"

[[figures]]
label = "fig:445"
page_num = 45
image_path = "images/image_p45_445.png"

[[figures]]
label = "fig:446"
page_num = 45
image_path = "images/image_p45_446.png"

[[figures]]
label = "fig:447"
page_num = 45
image_path = "images/image_p45_447.png"

[[figures]]
label = "fig:448"
page_num = 45
image_path = "images/image_p45_448.png"

[[figures]]
label = "fig:449"
page_num = 45
image_path = "images/image_p45_449.png"

[[figures]]
label = "fig:450"
page_num = 45
image_path = "images/image_p45_450.png"

[[figures]]
label = "fig:451"
page_num = 45
image_path = "images/image_p45_451.png"

[[figures]]
label = "fig:452"
page_num = 45
image_path = "images/image_p45_452.png"

[[figures]]
label = "fig:453"
page_num = 47
image_path = "images/image_p47_453.png"

[[figures]]
label = "fig:454"
page_num = 47
image_path = "images/image_p47_454.png"

[[figures]]
label = "fig:455"
page_num = 47
image_path = "images/image_p47_455.png"
